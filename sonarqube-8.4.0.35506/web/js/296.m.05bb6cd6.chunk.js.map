{"version":3,"sources":["webpack:///./src/main/js/apps/create/project/ManualProjectCreate.css?95f7","webpack:///./src/main/js/apps/create/project/ManualProjectCreate.css","webpack:///./src/main/js/apps/create/project/style.css?00fe","webpack:///./src/main/js/apps/create/project/style.css","webpack:///./src/main/js/apps/create/project/types.ts","webpack:///./src/main/js/apps/create/project/BitbucketProjectAccordion.tsx","webpack:///./src/main/js/apps/create/project/BitbucketRepositories.tsx","webpack:///./src/main/js/apps/create/project/BitbucketSearchResults.tsx","webpack:///./src/main/js/apps/create/project/BitbucketImportRepositoryForm.tsx","webpack:///./src/main/js/apps/create/project/BitbucketPersonalAccessTokenForm.tsx","webpack:///./src/main/js/apps/create/project/CreateProjectPageHeader.tsx","webpack:///./src/main/js/apps/create/project/BitbucketProjectCreateRenderer.tsx","webpack:///./src/main/js/apps/create/project/BitbucketProjectCreate.tsx","webpack:///./src/main/js/api/alm-integrations.ts","webpack:///./src/main/js/apps/create/project/CreateProjectModeSelection.tsx","webpack:///./src/main/js/apps/create/project/GitHubProjectCreateRenderer.tsx","webpack:///./src/main/js/apps/create/project/GitHubProjectCreate.tsx","webpack:///./src/main/js/apps/create/project/ManualProjectCreate.tsx","webpack:///./src/main/js/apps/create/project/constants.ts","webpack:///./src/main/js/apps/create/project/CreateProjectPage.tsx","webpack:///./node_modules/sonar-ui-common/components/controls/HelpTooltip.js","webpack:///./node_modules/sonar-ui-common/components/controls/HelpTooltip.css?2512","webpack:///./node_modules/sonar-ui-common/components/controls/HelpTooltip.css","webpack:///./node_modules/sonar-ui-common/components/controls/ListFooter.js","webpack:///./src/main/js/app/components/a11y/A11ySkipTarget.tsx","webpack:///./node_modules/sonar-ui-common/components/icons/ChevronDownIcon.js","webpack:///./node_modules/sonar-ui-common/components/controls/Radio.css?01af","webpack:///./node_modules/sonar-ui-common/components/controls/Radio.js","webpack:///./node_modules/sonar-ui-common/components/controls/Radio.css","webpack:///./node_modules/sonar-ui-common/components/icons/OpenCloseIcon.js","webpack:///./src/main/js/types/alm-settings.ts","webpack:///./node_modules/sonar-ui-common/components/icons/CheckIcon.js","webpack:///./src/main/js/api/alm-settings.ts","webpack:///./node_modules/sonar-ui-common/components/controls/ValidationInput.js","webpack:///./node_modules/sonar-ui-common/components/controls/BoxedGroupAccordion.js","webpack:///./node_modules/sonar-ui-common/components/controls/SearchSelect.js","webpack:///./src/main/js/apps/settings/components/AdditionalCategoryKeys.ts","webpack:///./src/main/js/components/hoc/whenLoggedIn.tsx","webpack:///./src/main/js/components/common/ProjectKeyInput.tsx","webpack:///./src/main/js/helpers/projects.ts"],"names":["api","content","__esModule","default","module","i","options","exported","locals","exports","___CSS_LOADER_API_IMPORT___","push","CreateProjectModes","BitbucketProjectAccordion","props","disableRepositories","open","project","repositories","selectedRepository","showingAllRepositories","repositoryCount","length","className","onClick","key","title","name","Alert","variant","defaultMessage","id","values","link","to","pathname","query","mode","BitbucketServer","resetPat","map","repo","sqProjectKey","fill","green","size","checked","disabled","onCheck","onSelectRepository","value","String","BitbucketRepositories","projects","projectRepositories","openProjectKeys","setOpenProjectKeys","allAreExpanded","p","isOpen","includes","allShown","projectKey","handleClick","BitbucketSearchResults","searching","searchResults","filteredProjects","r","find","filter","loading","BitbucketImportRepositoryForm","onChange","onSearch","placeholder","BitbucketPersonalAccessTokenForm","bitbucketSetting","url","submitting","validationFailed","touched","setTouched","isInvalid","onSubmit","e","preventDefault","FormData","currentTarget","get","onPersonalAccessTokenCreate","error","undefined","isValid","label","required","autoFocus","minLength","type","display","alt","height","src","href","replace","rel","target","perm","CreateProjectPageHeader","additionalActions","BitbucketProjectCreateRenderer","canAdmin","importing","showPersonalAccessTokenForm","submittingToken","tokenValidationFailed","onImportRepository","category","super","mounted","fetchInitialData","async","this","setState","patIsValid","checkPersonalAccessToken","catch","fetchBitbucketProjects","fetchBitbucketRepositories","state","almSetting","then","response","status","throwGlobalError","Promise","resolve","all","projectName","isLastPage","results","reduce","acc","handlePersonalAccessTokenCreate","token","pat","handleImportRepository","repositorySlug","slug","onProjectCreate","handleSearch","repositoryName","handleSelectRepository","bitbucketSettings","prevProps","loadingBindings","location","Boolean","renderAlmOption","alm","almCounts","count","onSelectMode","style","lineHeight","overlay","CreateProjectModeSelection","Manual","Bitbucket","GitHub","orgToOption","organizations","q","o","GitHubProjectCreateRenderer","loadingOrganizations","selectedOrganization","defaultOptions","minimumQueryLength","onSelect","onSelectOrganization","loadingRepositories","repositoryPaging","searchQuery","isDisabled","repository","total","loadMore","onLoadMore","renderRepositoryList","triggerSearch","fetchRepositories","organizationKey","handleSelectOrganization","handleLoadMore","page","pageIndex","settings","organization","repositoryKey","pageSize","initialize","router","code","fetchOrganizations","redirectToGithub","clientId","queryParams","param","join","instanceRootUrl","window","getGithubOrganizations","params","data","ps","getGithubRepositories","paging","_","checkFreeKey","component","alreadyExist","projectKeyError","validating","handleFormSubmit","event","canSubmit","trim","handleProjectKeyChange","validateKey","prevState","projectNameChanged","projectNameError","validateName","handleProjectNameChange","result","Valid","projectNameIsInvalid","projectNameIsValid","ProjectKeyInput","help","onProjectKeyChange","description","maxLength","githubSettings","fetchAlmBindings","almSettings","s","handleModeSelect","handleProjectCreate","projectKeys","appState","branchesEnabled","Azure","GitLab","titleTemplate","A11ySkipTarget","anchor","renderForm","whenLoggedIn","withAppState","Object","defineProperty","classNames","React","HelpIcon_1","theme_1","Tooltip_1","_a","tagName","createElement","mouseLeaveDelay","onShow","placement","children","ThemeConsumer","theme","colors","gray71","l10n_1","measures_1","DeferredSpinner_1","buttons_1","button","needReload","ready","hasMore","reload","Button","translate","translateWithParameters","formatMeasure","Consumer","addA11ySkipLink","removeA11ySkipLink","A11ySkipTargetInner","getLink","weight","__assign","assign","t","n","arguments","prototype","hasOwnProperty","call","apply","__rest","indexOf","getOwnPropertySymbols","propertyIsEnumerable","Icon_1","_b","iconProps","d","extendStatics","__extends","b","setPrototypeOf","__proto__","Array","__","constructor","create","Radio","_super","_this","render","role","PureComponent","ChevronDownIcon_1","ChevronRightIcon_1","AlmKeys","getAlmDefinitions","getAlmDefinitionsNoCatch","getAlmSettings","createGithubConfiguration","updateGithubConfiguration","createAzureConfiguration","updateAzureConfiguration","createBitbucketConfiguration","updateBitbucketConfiguration","createGitlabConfiguration","updateGitlabConfiguration","deleteConfiguration","countBindedProjects","getProjectAlmBinding","deleteProjectAlmBinding","setProjectAzureBinding","setProjectBitbucketBinding","setProjectGithubBinding","setProjectGitlabBinding","AlertErrorIcon_1","AlertSuccessIcon_1","HelpTooltip_1","hasError","htmlFor","OpenCloseIcon_1","BoxedGroupAccordion","hoveringInner","onDetailEnter","onDetailLeave","renderHeader","onMouseEnter","onMouseLeave","lodash_1","Select_1","SearchSelect","currentQuery","handleChange","option","isArray","onMultiSelect","handleInputChange","handleFilterOption","debounce","componentDidMount","componentWillUnmount","autofocus","enumerable","configurable","resetOnBlur","Component","canCreate","Creatable","clearable","escapeClearsValue","filterOption","isLoading","multi","noResultsText","onBlurResetsInput","onInputChange","optionRenderer","renderOption","promptTextCreator","searchable","valueRenderer","ALM_INTEGRATION","ANALYSIS_SCOPE_CATEGORY","LANGUAGES_CATEGORY","NEW_CODE_PERIOD_CATEGORY","PULL_REQUEST_DECORATION_BINDING_CATEGORY","WrappedComponent","Wrapper","currentUser","displayName","validateProjectKey","Empty","TooLong","test","OnlyDigits","InvalidChar"],"mappings":"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","file":"js/296.m.05bb6cd6.chunk.js","sourcesContent":["var api = require(\"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./ManualProjectCreate.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".manual-project-create{max-width:700px}.manual-project-create .button{margin-top:8px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./style.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"#create-project{padding-top:0!important}#create-project header{padding-top:20px;background-color:#f3f3f3;position:-webkit-sticky;position:sticky;top:48px;z-index:50}.create-project-manual{display:flex!important;justify-content:space-between}.create-project-import-bbs .open .boxed-group-header{border-bottom:1px solid #e6e6e6}.create-project-import-bbs .boxed-group-inner{padding-top:24px}.create-project-import-bbs-repo{width:250px;min-height:40px}.create-project-github-repository{box-sizing:border-box;width:33.33%}.create-project-github-repository .notice{display:block;position:absolute}.create-project-github-repository .notice svg{color:#0a0}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport enum CreateProjectModes {\n  Manual = 'manual',\n  BitbucketServer = 'bitbucket',\n  GitHub = 'github'\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { Link } from 'react-router';\nimport BoxedGroupAccordion from 'sonar-ui-common/components/controls/BoxedGroupAccordion';\nimport Radio from 'sonar-ui-common/components/controls/Radio';\nimport CheckIcon from 'sonar-ui-common/components/icons/CheckIcon';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { colors } from '../../../app/theme';\nimport { getProjectUrl } from '../../../helpers/urls';\nimport { BitbucketProject, BitbucketRepository } from '../../../types/alm-integration';\nimport { CreateProjectModes } from './types';\n\nexport interface BitbucketProjectAccordionProps {\n  disableRepositories: boolean;\n  onClick?: () => void;\n  onSelectRepository: (repo: BitbucketRepository) => void;\n  open: boolean;\n  project: BitbucketProject;\n  repositories: BitbucketRepository[];\n  selectedRepository?: BitbucketRepository;\n  showingAllRepositories: boolean;\n}\n\nexport default function BitbucketProjectAccordion(props: BitbucketProjectAccordionProps) {\n  const {\n    disableRepositories,\n    open,\n    project,\n    repositories,\n    selectedRepository,\n    showingAllRepositories\n  } = props;\n\n  const repositoryCount = repositories.length;\n\n  return (\n    <BoxedGroupAccordion\n      className={classNames('big-spacer-bottom', {\n        open,\n        'not-clickable': !props.onClick,\n        'no-hover': !props.onClick\n      })}\n      key={project.key}\n      onClick={\n        props.onClick\n          ? props.onClick\n          : () => {\n              /* noop */\n            }\n      }\n      open={open}\n      title={<h3>{project.name}</h3>}>\n      {open && (\n        <div className=\"display-flex-wrap\">\n          {repositoryCount === 0 && (\n            <Alert variant=\"warning\">\n              <FormattedMessage\n                defaultMessage={translate('onboarding.create_project.no_bbs_repos')}\n                id=\"onboarding.create_project.no_bbs_repos\"\n                values={{\n                  link: (\n                    <Link\n                      to={{\n                        pathname: '/projects/create',\n                        query: { mode: CreateProjectModes.BitbucketServer, resetPat: 1 }\n                      }}>\n                      {translate('onboarding.create_project.update_your_token')}\n                    </Link>\n                  )\n                }}\n              />\n            </Alert>\n          )}\n\n          {repositories.map(repo =>\n            repo.sqProjectKey ? (\n              <div\n                className=\"display-flex-start spacer-right spacer-bottom create-project-import-bbs-repo\"\n                key={repo.id}>\n                <CheckIcon className=\"spacer-right\" fill={colors.green} size={14} />\n                <div className=\"overflow-hidden\">\n                  <div className=\"little-spacer-bottom text-ellipsis\">\n                    <strong title={repo.name}>\n                      <Link to={getProjectUrl(repo.sqProjectKey)}>{repo.name}</Link>\n                    </strong>\n                  </div>\n                  <em>{translate('onboarding.create_project.repository_imported')}</em>\n                </div>\n              </div>\n            ) : (\n              <Radio\n                checked={selectedRepository?.id === repo.id}\n                className={classNames(\n                  'display-flex-start spacer-right spacer-bottom create-project-import-bbs-repo overflow-hidden',\n                  {\n                    disabled: disableRepositories,\n                    'text-muted': disableRepositories,\n                    'link-no-underline': disableRepositories\n                  }\n                )}\n                key={repo.id}\n                onCheck={() => props.onSelectRepository(repo)}\n                value={String(repo.id)}>\n                <strong className=\"text-ellipsis\" title={repo.name}>\n                  {repo.name}\n                </strong>\n              </Radio>\n            )\n          )}\n\n          {!showingAllRepositories && repositoryCount > 0 && (\n            <Alert variant=\"warning\">\n              {translateWithParameters(\n                'onboarding.create_project.only_showing_X_first_repos',\n                repositoryCount\n              )}\n            </Alert>\n          )}\n        </div>\n      )}\n    </BoxedGroupAccordion>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { uniq, without } from 'lodash';\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport {\n  BitbucketProject,\n  BitbucketProjectRepositories,\n  BitbucketRepository\n} from '../../../types/alm-integration';\nimport BitbucketProjectAccordion from './BitbucketProjectAccordion';\n\nexport interface BitbucketRepositoriesProps {\n  disableRepositories: boolean;\n  onSelectRepository: (repo: BitbucketRepository) => void;\n  projects: BitbucketProject[];\n  projectRepositories: BitbucketProjectRepositories;\n  selectedRepository?: BitbucketRepository;\n}\n\nexport default function BitbucketRepositories(props: BitbucketRepositoriesProps) {\n  const { disableRepositories, projects, projectRepositories, selectedRepository } = props;\n\n  const [openProjectKeys, setOpenProjectKeys] = React.useState(\n    projects.length > 0 ? [projects[0].key] : []\n  );\n\n  const allAreExpanded = projects.length <= openProjectKeys.length;\n\n  const handleClick = (isOpen: boolean, projectKey: string) => {\n    setOpenProjectKeys(\n      isOpen ? without(openProjectKeys, projectKey) : uniq([...openProjectKeys, projectKey])\n    );\n  };\n\n  return (\n    <>\n      <div className=\"overflow-hidden spacer-bottom\">\n        <ButtonLink\n          className=\"pull-right\"\n          onClick={() => setOpenProjectKeys(allAreExpanded ? [] : projects.map(p => p.key))}>\n          {allAreExpanded ? translate('collapse_all') : translate('expand_all')}\n        </ButtonLink>\n      </div>\n\n      {projects.map(project => {\n        const isOpen = openProjectKeys.includes(project.key);\n        const { allShown, repositories = [] } = projectRepositories[project.key] || {};\n\n        return (\n          <BitbucketProjectAccordion\n            disableRepositories={disableRepositories}\n            key={project.key}\n            onClick={() => handleClick(isOpen, project.key)}\n            onSelectRepository={props.onSelectRepository}\n            open={isOpen}\n            project={project}\n            repositories={repositories}\n            selectedRepository={selectedRepository}\n            showingAllRepositories={allShown}\n          />\n        );\n      })}\n    </>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { uniq } from 'lodash';\nimport * as React from 'react';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { isDefined } from 'sonar-ui-common/helpers/types';\nimport { BitbucketProject, BitbucketRepository } from '../../../types/alm-integration';\nimport BitbucketProjectAccordion from './BitbucketProjectAccordion';\n\nexport interface BitbucketSearchResultsProps {\n  disableRepositories: boolean;\n  onSelectRepository: (repo: BitbucketRepository) => void;\n  projects: BitbucketProject[];\n  searching: boolean;\n  searchResults?: BitbucketRepository[];\n  selectedRepository?: BitbucketRepository;\n}\n\nexport default function BitbucketSearchResults(props: BitbucketSearchResultsProps) {\n  const {\n    disableRepositories,\n    projects,\n    searching,\n    searchResults = [],\n    selectedRepository\n  } = props;\n\n  const filteredProjects = uniq(\n    searchResults.map(r => projects.find(p => p.key === r.projectKey)).filter(isDefined)\n  );\n\n  return filteredProjects.length === 0 && !searching ? (\n    <Alert className=\"big-spacer-top\" variant=\"warning\">\n      {translate('onboarding.create_project.no_bbs_repos.filter')}\n    </Alert>\n  ) : (\n    <div className=\"big-spacer-top\">\n      <DeferredSpinner loading={searching}>\n        {filteredProjects.map(project => {\n          const repositories = searchResults.filter(r => r.projectKey === project.key);\n\n          return (\n            <BitbucketProjectAccordion\n              disableRepositories={disableRepositories}\n              key={project.key}\n              onSelectRepository={props.onSelectRepository}\n              open={true}\n              project={project}\n              repositories={repositories}\n              selectedRepository={selectedRepository}\n              showingAllRepositories={true}\n            />\n          );\n        })}\n      </DeferredSpinner>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { Link } from 'react-router';\nimport SearchBox from 'sonar-ui-common/components/controls/SearchBox';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport {\n  BitbucketProject,\n  BitbucketProjectRepositories,\n  BitbucketRepository\n} from '../../../types/alm-integration';\nimport BitbucketRepositories from './BitbucketRepositories';\nimport BitbucketSearchResults from './BitbucketSearchResults';\nimport { CreateProjectModes } from './types';\n\nexport interface BitbucketImportRepositoryFormProps {\n  disableRepositories: boolean;\n  onSearch: (query: string) => void;\n  onSelectRepository: (repo: BitbucketRepository) => void;\n  projects?: BitbucketProject[];\n  projectRepositories?: BitbucketProjectRepositories;\n  searching: boolean;\n  searchResults?: BitbucketRepository[];\n  selectedRepository?: BitbucketRepository;\n}\n\nexport default function BitbucketImportRepositoryForm(props: BitbucketImportRepositoryFormProps) {\n  const {\n    disableRepositories,\n    projects = [],\n    projectRepositories = {},\n    searchResults,\n    searching,\n    selectedRepository\n  } = props;\n\n  if (projects.length === 0) {\n    return (\n      <Alert className=\"spacer-top\" variant=\"warning\">\n        <FormattedMessage\n          defaultMessage={translate('onboarding.create_project.no_bbs_projects')}\n          id=\"onboarding.create_project.no_bbs_projects\"\n          values={{\n            link: (\n              <Link\n                to={{\n                  pathname: '/projects/create',\n                  query: { mode: CreateProjectModes.BitbucketServer, resetPat: 1 }\n                }}>\n                {translate('onboarding.create_project.update_your_token')}\n              </Link>\n            )\n          }}\n        />\n      </Alert>\n    );\n  }\n\n  return (\n    <div className=\"create-project-import-bbs\">\n      <SearchBox\n        onChange={props.onSearch}\n        placeholder={translate('onboarding.create_project.search_repositories_by_name')}\n      />\n\n      {searching || searchResults ? (\n        <BitbucketSearchResults\n          disableRepositories={disableRepositories}\n          onSelectRepository={props.onSelectRepository}\n          projects={projects}\n          searchResults={searchResults}\n          searching={searching}\n          selectedRepository={selectedRepository}\n        />\n      ) : (\n        <BitbucketRepositories\n          disableRepositories={disableRepositories}\n          onSelectRepository={props.onSelectRepository}\n          projectRepositories={projectRepositories}\n          projects={projects}\n          selectedRepository={selectedRepository}\n        />\n      )}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport ValidationInput from 'sonar-ui-common/components/controls/ValidationInput';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getBaseUrl } from 'sonar-ui-common/helpers/urls';\nimport { AlmSettingsInstance } from '../../../types/alm-settings';\n\nexport interface BitbucketPersonalAccessTokenFormProps {\n  bitbucketSetting: AlmSettingsInstance;\n  onPersonalAccessTokenCreate: (token: string) => void;\n  submitting?: boolean;\n  validationFailed: boolean;\n}\n\nexport default function BitbucketPersonalAccessTokenForm(\n  props: BitbucketPersonalAccessTokenFormProps\n) {\n  const {\n    bitbucketSetting: { url },\n    submitting = false,\n    validationFailed\n  } = props;\n  const [touched, setTouched] = React.useState(false);\n\n  React.useEffect(() => {\n    setTouched(false);\n  }, [submitting]);\n\n  const isInvalid = validationFailed && !touched;\n\n  return (\n    <div className=\"display-flex-start\">\n      <form\n        onSubmit={(e: React.SyntheticEvent<HTMLFormElement>) => {\n          e.preventDefault();\n          const value = new FormData(e.currentTarget).get('personal_access_token') as string;\n          props.onPersonalAccessTokenCreate(value);\n        }}>\n        <h2 className=\"big\">{translate('onboarding.create_project.grant_access_to_bbs.title')}</h2>\n        <p className=\"big-spacer-top big-spacer-bottom\">\n          {translate('onboarding.create_project.grant_access_to_bbs.help')}\n        </p>\n\n        <ValidationInput\n          error={isInvalid ? translate('onboarding.create_project.pat_incorrect') : undefined}\n          id=\"personal_access_token\"\n          isInvalid={isInvalid}\n          isValid={false}\n          label={translate('onboarding.create_project.enter_pat')}\n          required={true}>\n          <input\n            autoFocus={true}\n            className={classNames('input-super-large', {\n              'is-invalid': isInvalid\n            })}\n            id=\"personal_access_token\"\n            minLength={1}\n            name=\"personal_access_token\"\n            onChange={() => {\n              setTouched(true);\n            }}\n            type=\"text\"\n          />\n        </ValidationInput>\n\n        <SubmitButton disabled={isInvalid || submitting || !touched}>\n          {translate('save')}\n        </SubmitButton>\n        <DeferredSpinner className=\"spacer-left\" loading={submitting} />\n      </form>\n\n      <Alert className=\"big-spacer-left big-spacer-top\" display=\"block\" variant=\"info\">\n        <h3>{translate('onboarding.create_project.pat_help.title')}</h3>\n\n        <p className=\"big-spacer-top big-spacer-bottom\">\n          {translate('onboarding.create_project.pat_help.bbs_help_1')}\n        </p>\n\n        {url && (\n          <div className=\"text-middle\">\n            <img\n              alt=\"\" // Should be ignored by screen readers\n              className=\"spacer-right\"\n              height=\"16\"\n              src={`${getBaseUrl()}/images/alm/bitbucket.svg`}\n            />\n            <a\n              href={`${url.replace(/\\/$/, '')}/plugins/servlet/access-tokens/add`}\n              rel=\"noopener noreferrer\"\n              target=\"_blank\">\n              {translate('onboarding.create_project.pat_help.link')}\n            </a>\n          </div>\n        )}\n\n        <p className=\"big-spacer-top big-spacer-bottom\">\n          {translate('onboarding.create_project.pat_help.bbs_help_2')}\n        </p>\n\n        <ul>\n          <li>\n            <FormattedMessage\n              defaultMessage={translate(\n                'onboarding.create_project.pat_help.bbs_permission_projects'\n              )}\n              id=\"onboarding.create_project.pat_help.bbs_permission_projects\"\n              values={{\n                perm: (\n                  <strong>{translate('onboarding.create_project.pat_help.read_permission')}</strong>\n                )\n              }}\n            />\n          </li>\n          <li>\n            <FormattedMessage\n              defaultMessage={translate('onboarding.create_project.pat_help.bbs_permission_repos')}\n              id=\"onboarding.create_project.pat_help.bbs_permission_repos\"\n              values={{\n                perm: (\n                  <strong>{translate('onboarding.create_project.pat_help.read_permission')}</strong>\n                )\n              }}\n            />\n          </li>\n        </ul>\n      </Alert>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\n\nexport interface CreateProjectPageHeaderProps {\n  additionalActions?: React.ReactNode;\n  title: React.ReactNode;\n}\n\nexport default function CreateProjectPageHeader(props: CreateProjectPageHeaderProps) {\n  const { additionalActions, title } = props;\n\n  return (\n    <header className=\"huge-spacer-bottom bordered-bottom overflow-hidden\">\n      <h1 className=\"pull-left huge big-spacer-bottom\">{title}</h1>\n\n      {additionalActions}\n    </header>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { Link } from 'react-router';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getBaseUrl } from 'sonar-ui-common/helpers/urls';\nimport {\n  BitbucketProject,\n  BitbucketProjectRepositories,\n  BitbucketRepository\n} from '../../../types/alm-integration';\nimport { AlmSettingsInstance } from '../../../types/alm-settings';\nimport { ALM_INTEGRATION } from '../../settings/components/AdditionalCategoryKeys';\nimport BitbucketImportRepositoryForm from './BitbucketImportRepositoryForm';\nimport BitbucketPersonalAccessTokenForm from './BitbucketPersonalAccessTokenForm';\nimport CreateProjectPageHeader from './CreateProjectPageHeader';\n\nexport interface BitbucketProjectCreateRendererProps {\n  bitbucketSetting?: AlmSettingsInstance;\n  canAdmin?: boolean;\n  importing: boolean;\n  loading: boolean;\n  onImportRepository: () => void;\n  onSearch: (query: string) => void;\n  onSelectRepository: (repo: BitbucketRepository) => void;\n  onPersonalAccessTokenCreate: (token: string) => void;\n  onProjectCreate: (projectKeys: string[]) => void;\n  projects?: BitbucketProject[];\n  projectRepositories?: BitbucketProjectRepositories;\n  searching: boolean;\n  searchResults?: BitbucketRepository[];\n  selectedRepository?: BitbucketRepository;\n  showPersonalAccessTokenForm?: boolean;\n  submittingToken?: boolean;\n  tokenValidationFailed: boolean;\n}\n\nexport default function BitbucketProjectCreateRenderer(props: BitbucketProjectCreateRendererProps) {\n  const {\n    bitbucketSetting,\n    canAdmin,\n    importing,\n    loading,\n    projects,\n    projectRepositories,\n    selectedRepository,\n    searching,\n    searchResults,\n    showPersonalAccessTokenForm,\n    submittingToken,\n    tokenValidationFailed\n  } = props;\n\n  return (\n    <>\n      <CreateProjectPageHeader\n        additionalActions={\n          !showPersonalAccessTokenForm && (\n            <div className=\"display-flex-center pull-right\">\n              <DeferredSpinner className=\"spacer-right\" loading={importing} />\n              <Button\n                className=\"button-large button-primary\"\n                disabled={!selectedRepository || importing}\n                onClick={props.onImportRepository}>\n                {translate('onboarding.create_project.import_selected_repo')}\n              </Button>\n            </div>\n          )\n        }\n        title={\n          <span className=\"text-middle\">\n            <img\n              alt=\"\" // Should be ignored by screen readers\n              className=\"spacer-right\"\n              height=\"24\"\n              src={`${getBaseUrl()}/images/alm/bitbucket.svg`}\n            />\n            {translate('onboarding.create_project.from_bbs')}\n          </span>\n        }\n      />\n\n      {loading && <i className=\"spinner\" />}\n\n      {!loading && !bitbucketSetting && (\n        <Alert variant=\"error\">\n          {canAdmin ? (\n            <FormattedMessage\n              defaultMessage={translate('onboarding.create_project.no_bbs_binding.admin')}\n              id=\"onboarding.create_project.no_bbs_binding.admin\"\n              values={{\n                url: (\n                  <Link\n                    to={{\n                      pathname: '/admin/settings',\n                      query: { category: ALM_INTEGRATION }\n                    }}>\n                    {translate('settings.page')}\n                  </Link>\n                )\n              }}\n            />\n          ) : (\n            translate('onboarding.create_project.no_bbs_binding')\n          )}\n        </Alert>\n      )}\n\n      {!loading &&\n        bitbucketSetting &&\n        (showPersonalAccessTokenForm ? (\n          <BitbucketPersonalAccessTokenForm\n            bitbucketSetting={bitbucketSetting}\n            onPersonalAccessTokenCreate={props.onPersonalAccessTokenCreate}\n            submitting={submittingToken}\n            validationFailed={tokenValidationFailed}\n          />\n        ) : (\n          <BitbucketImportRepositoryForm\n            disableRepositories={importing}\n            onSearch={props.onSearch}\n            onSelectRepository={props.onSelectRepository}\n            projectRepositories={projectRepositories}\n            projects={projects}\n            searchResults={searchResults}\n            searching={searching}\n            selectedRepository={selectedRepository}\n          />\n        ))}\n    </>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { WithRouterProps } from 'react-router';\nimport {\n  checkPersonalAccessTokenIsValid,\n  getBitbucketServerProjects,\n  getBitbucketServerRepositories,\n  importBitbucketServerProject,\n  searchForBitbucketServerRepositories,\n  setAlmPersonalAccessToken\n} from '../../../api/alm-integrations';\nimport {\n  BitbucketProject,\n  BitbucketProjectRepositories,\n  BitbucketRepository\n} from '../../../types/alm-integration';\nimport { AlmSettingsInstance } from '../../../types/alm-settings';\nimport BitbucketCreateProjectRenderer from './BitbucketProjectCreateRenderer';\n\ninterface Props extends Pick<WithRouterProps, 'location'> {\n  canAdmin: boolean;\n  bitbucketSettings: AlmSettingsInstance[];\n  loadingBindings: boolean;\n  onProjectCreate: (projectKeys: string[]) => void;\n}\n\ninterface State {\n  bitbucketSetting?: AlmSettingsInstance;\n  importing: boolean;\n  loading: boolean;\n  patIsValid?: boolean;\n  projects?: BitbucketProject[];\n  projectRepositories?: BitbucketProjectRepositories;\n  searching: boolean;\n  searchResults?: BitbucketRepository[];\n  selectedRepository?: BitbucketRepository;\n  submittingToken?: boolean;\n  tokenValidationFailed: boolean;\n}\n\nexport default class BitbucketProjectCreate extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      // For now, we only handle a single instance. So we always use the first\n      // one from the list.\n      bitbucketSetting: props.bitbucketSettings[0],\n      importing: false,\n      loading: false,\n      searching: false,\n      tokenValidationFailed: false\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchInitialData();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.bitbucketSettings.length === 0 && this.props.bitbucketSettings.length > 0) {\n      this.setState({ bitbucketSetting: this.props.bitbucketSettings[0] }, () =>\n        this.fetchInitialData()\n      );\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchInitialData = async () => {\n    this.setState({ loading: true });\n\n    const patIsValid = await this.checkPersonalAccessToken().catch(() => false);\n\n    let projects;\n    if (patIsValid) {\n      projects = await this.fetchBitbucketProjects().catch(() => undefined);\n    }\n\n    let projectRepositories;\n    if (projects && projects.length > 0) {\n      projectRepositories = await this.fetchBitbucketRepositories(projects).catch(() => undefined);\n    }\n\n    if (this.mounted) {\n      this.setState({\n        patIsValid,\n        projects,\n        projectRepositories,\n        loading: false\n      });\n    }\n  };\n\n  checkPersonalAccessToken = () => {\n    const { bitbucketSetting } = this.state;\n\n    if (!bitbucketSetting) {\n      return Promise.resolve(false);\n    }\n\n    return checkPersonalAccessTokenIsValid(bitbucketSetting.key);\n  };\n\n  fetchBitbucketProjects = (): Promise<BitbucketProject[] | undefined> => {\n    const { bitbucketSetting } = this.state;\n\n    if (!bitbucketSetting) {\n      return Promise.resolve(undefined);\n    }\n\n    return getBitbucketServerProjects(bitbucketSetting.key).then(({ projects }) => projects);\n  };\n\n  fetchBitbucketRepositories = (\n    projects: BitbucketProject[]\n  ): Promise<BitbucketProjectRepositories | undefined> => {\n    const { bitbucketSetting } = this.state;\n\n    if (!bitbucketSetting) {\n      return Promise.resolve(undefined);\n    }\n\n    return Promise.all(\n      projects.map(p => {\n        return getBitbucketServerRepositories(bitbucketSetting.key, p.name).then(\n          ({ isLastPage, repositories }) => ({\n            isLastPage,\n            repositories,\n            projectKey: p.key\n          })\n        );\n      })\n    ).then(results => {\n      return results.reduce(\n        (acc: BitbucketProjectRepositories, { isLastPage, projectKey, repositories }) => {\n          return { ...acc, [projectKey]: { allShown: isLastPage, repositories } };\n        },\n        {}\n      );\n    });\n  };\n\n  handlePersonalAccessTokenCreate = (token: string) => {\n    const { bitbucketSetting } = this.state;\n\n    if (!bitbucketSetting || token.length < 1) {\n      return;\n    }\n\n    this.setState({ submittingToken: true, tokenValidationFailed: false });\n    setAlmPersonalAccessToken(bitbucketSetting.key, token)\n      .then(this.checkPersonalAccessToken)\n      .then(patIsValid => {\n        if (this.mounted) {\n          this.setState({ submittingToken: false, patIsValid, tokenValidationFailed: !patIsValid });\n          if (patIsValid) {\n            this.fetchInitialData();\n          }\n        }\n      })\n      .catch(() => {\n        if (this.mounted) {\n          this.setState({ submittingToken: false });\n        }\n      });\n  };\n\n  handleImportRepository = () => {\n    const { bitbucketSetting, selectedRepository } = this.state;\n\n    if (!bitbucketSetting || !selectedRepository) {\n      return;\n    }\n\n    this.setState({ importing: true });\n    importBitbucketServerProject(\n      bitbucketSetting.key,\n      selectedRepository.projectKey,\n      selectedRepository.slug\n    )\n      .then(({ project: { key } }) => {\n        if (this.mounted) {\n          this.setState({ importing: false });\n          this.props.onProjectCreate([key]);\n        }\n      })\n      .catch(() => {\n        if (this.mounted) {\n          this.setState({ importing: false });\n        }\n      });\n  };\n\n  handleSearch = (query: string) => {\n    const { bitbucketSetting } = this.state;\n\n    if (!bitbucketSetting) {\n      return;\n    }\n\n    if (!query) {\n      this.setState({ searching: false, searchResults: undefined, selectedRepository: undefined });\n      return;\n    }\n\n    this.setState({ searching: true, selectedRepository: undefined });\n    searchForBitbucketServerRepositories(bitbucketSetting.key, query)\n      .then(({ repositories }) => {\n        if (this.mounted) {\n          this.setState({ searching: false, searchResults: repositories });\n        }\n      })\n      .catch(() => {\n        if (this.mounted) {\n          this.setState({ searching: false });\n        }\n      });\n  };\n\n  handleSelectRepository = (selectedRepository: BitbucketRepository) => {\n    this.setState({ selectedRepository });\n  };\n\n  render() {\n    const { canAdmin, loadingBindings, location } = this.props;\n    const {\n      bitbucketSetting,\n      importing,\n      loading,\n      patIsValid,\n      projectRepositories,\n      projects,\n      searching,\n      searchResults,\n      selectedRepository,\n      submittingToken,\n      tokenValidationFailed\n    } = this.state;\n\n    return (\n      <BitbucketCreateProjectRenderer\n        bitbucketSetting={bitbucketSetting}\n        canAdmin={canAdmin}\n        importing={importing}\n        loading={loading || loadingBindings}\n        onImportRepository={this.handleImportRepository}\n        onPersonalAccessTokenCreate={this.handlePersonalAccessTokenCreate}\n        onProjectCreate={this.props.onProjectCreate}\n        onSearch={this.handleSearch}\n        onSelectRepository={this.handleSelectRepository}\n        projectRepositories={projectRepositories}\n        projects={projects}\n        searchResults={searchResults}\n        searching={searching}\n        selectedRepository={selectedRepository}\n        showPersonalAccessTokenForm={!patIsValid || Boolean(location.query.resetPat)}\n        submittingToken={submittingToken}\n        tokenValidationFailed={tokenValidationFailed}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { get, getJSON, post, postJSON } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport {\n  BitbucketProject,\n  BitbucketRepository,\n  GithubOrganization,\n  GithubRepository\n} from '../types/alm-integration';\nimport { ProjectBase } from './components';\n\nexport function setAlmPersonalAccessToken(almSetting: string, pat: string): Promise<void> {\n  return post('/api/alm_integrations/set_pat', { almSetting, pat }).catch(throwGlobalError);\n}\n\nexport function checkPersonalAccessTokenIsValid(almSetting: string): Promise<boolean> {\n  return get('/api/alm_integrations/check_pat', { almSetting })\n    .then(() => true)\n    .catch((response: Response) => {\n      if (response.status === 400) {\n        return false;\n      } else {\n        return throwGlobalError(response);\n      }\n    });\n}\n\nexport function getBitbucketServerProjects(\n  almSetting: string\n): Promise<{ projects: BitbucketProject[] }> {\n  return getJSON('/api/alm_integrations/list_bitbucketserver_projects', { almSetting });\n}\n\nexport function getBitbucketServerRepositories(\n  almSetting: string,\n  projectName: string\n): Promise<{\n  isLastPage: boolean;\n  repositories: BitbucketRepository[];\n}> {\n  return getJSON('/api/alm_integrations/search_bitbucketserver_repos', {\n    almSetting,\n    projectName\n  });\n}\n\nexport function importBitbucketServerProject(\n  almSetting: string,\n  projectKey: string,\n  repositorySlug: string\n): Promise<{ project: ProjectBase }> {\n  return postJSON('/api/alm_integrations/import_bitbucketserver_project', {\n    almSetting,\n    projectKey,\n    repositorySlug\n  }).catch(throwGlobalError);\n}\n\nexport function searchForBitbucketServerRepositories(\n  almSetting: string,\n  repositoryName: string\n): Promise<{\n  isLastPage: boolean;\n  repositories: BitbucketRepository[];\n}> {\n  return getJSON('/api/alm_integrations/search_bitbucketserver_repos', {\n    almSetting,\n    repositoryName\n  });\n}\n\nexport function getGithubClientId(almSetting: string): Promise<{ clientId?: string }> {\n  return getJSON('/api/alm_integrations/get_github_client_id', { almSetting });\n}\n\nexport function importGithubRepository(\n  almSetting: string,\n  organization: string,\n  repositoryKey: string\n): Promise<{ project: ProjectBase }> {\n  return postJSON('/api/alm_integrations/import_github_project', {\n    almSetting,\n    organization,\n    repositoryKey\n  }).catch(throwGlobalError);\n}\n\nexport function getGithubOrganizations(\n  almSetting: string,\n  token: string\n): Promise<{ organizations: GithubOrganization[] }> {\n  return getJSON('/api/alm_integrations/list_github_organizations', {\n    almSetting,\n    token\n  }).catch((response?: Response) => {\n    if (response && response.status !== 400) {\n      throwGlobalError(response);\n    }\n  });\n}\n\nexport function getGithubRepositories(data: {\n  almSetting: string;\n  organization: string;\n  ps: number;\n  p?: number;\n  query?: string;\n}): Promise<{ repositories: GithubRepository[]; paging: T.Paging }> {\n  const { almSetting, organization, ps, p = 1, query } = data;\n  return getJSON('/api/alm_integrations/list_github_repositories', {\n    almSetting,\n    organization,\n    p,\n    ps,\n    q: query || undefined\n  }).catch(throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport HelpTooltip from 'sonar-ui-common/components/controls/HelpTooltip';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { getBaseUrl } from 'sonar-ui-common/helpers/urls';\nimport { AlmKeys } from '../../../types/alm-settings';\nimport { CreateProjectModes } from './types';\n\nexport interface CreateProjectModeSelectionProps {\n  almCounts: { [key in AlmKeys]: number };\n  loadingBindings: boolean;\n  onSelectMode: (mode: CreateProjectModes) => void;\n}\n\nfunction renderAlmOption(\n  props: CreateProjectModeSelectionProps,\n  alm: AlmKeys,\n  mode: CreateProjectModes\n) {\n  const { almCounts, loadingBindings } = props;\n\n  const count = almCounts[alm];\n  const disabled = count !== 1 || loadingBindings;\n\n  return (\n    <button\n      className={classNames(\n        'button button-huge big-spacer-left display-flex-column create-project-mode-type-bbs',\n        { disabled }\n      )}\n      disabled={disabled}\n      onClick={() => props.onSelectMode(mode)}\n      type=\"button\">\n      <img\n        alt=\"\" // Should be ignored by screen readers\n        height={80}\n        src={`${getBaseUrl()}/images/alm/${alm}.svg`}\n      />\n      <div className=\"medium big-spacer-top\">\n        {translate('onboarding.create_project.select_method', alm)}\n      </div>\n\n      {loadingBindings && (\n        <span>\n          {translate('onboarding.create_project.check_alm_supported')}\n          <i className=\"little-spacer-left spinner\" />\n        </span>\n      )}\n\n      {!loadingBindings && disabled && (\n        <div className=\"text-muted small spacer-top\" style={{ lineHeight: 1.5 }}>\n          {translate('onboarding.create_project.alm_not_configured')}\n          <HelpTooltip\n            className=\"little-spacer-left\"\n            overlay={\n              count === 0\n                ? translate('onboarding.create_project.zero_alm_instances', alm)\n                : `${translate('onboarding.create_project.too_many_alm_instances', alm)} \n                  ${translateWithParameters(\n                    'onboarding.create_project.alm_instances_count_X',\n                    count\n                  )}`\n            }\n          />\n        </div>\n      )}\n    </button>\n  );\n}\n\nexport default function CreateProjectModeSelection(props: CreateProjectModeSelectionProps) {\n  return (\n    <>\n      <header className=\"huge-spacer-top big-spacer-bottom padded\">\n        <h1 className=\"text-center huge big-spacer-bottom\">\n          {translate('my_account.create_new.TRK')}\n        </h1>\n        <p className=\"text-center big\">{translate('onboarding.create_project.select_method')}</p>\n      </header>\n\n      <div className=\"create-project-modes huge-spacer-top display-flex-justify-center\">\n        <button\n          className=\"button button-huge display-flex-column create-project-mode-type-manual\"\n          onClick={() => props.onSelectMode(CreateProjectModes.Manual)}\n          type=\"button\">\n          <img\n            alt=\"\" // Should be ignored by screen readers\n            height={80}\n            src={`${getBaseUrl()}/images/sonarcloud/analysis/manual.svg`}\n          />\n          <div className=\"medium big-spacer-top\">\n            {translate('onboarding.create_project.select_method.manual')}\n          </div>\n        </button>\n\n        {renderAlmOption(props, AlmKeys.Bitbucket, CreateProjectModes.BitbucketServer)}\n        {renderAlmOption(props, AlmKeys.GitHub, CreateProjectModes.GitHub)}\n      </div>\n    </>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { Link } from 'react-router';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport ListFooter from 'sonar-ui-common/components/controls/ListFooter';\nimport Radio from 'sonar-ui-common/components/controls/Radio';\nimport SearchBox from 'sonar-ui-common/components/controls/SearchBox';\nimport SearchSelect from 'sonar-ui-common/components/controls/SearchSelect';\nimport CheckIcon from 'sonar-ui-common/components/icons/CheckIcon';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getBaseUrl } from '../../../helpers/system';\nimport { GithubOrganization, GithubRepository } from '../../../types/alm-integration';\nimport CreateProjectPageHeader from './CreateProjectPageHeader';\n\nexport interface GitHubProjectCreateRendererProps {\n  canAdmin: boolean;\n  error: boolean;\n  importing: boolean;\n  loadingBindings: boolean;\n  loadingOrganizations: boolean;\n  loadingRepositories: boolean;\n  onImportRepository: () => void;\n  onLoadMore: () => void;\n  onSearch: (q: string) => void;\n  onSelectOrganization: (key: string) => void;\n  onSelectRepository: (key: string) => void;\n  organizations: GithubOrganization[];\n  repositories?: GithubRepository[];\n  repositoryPaging: T.Paging;\n  searchQuery: string;\n  selectedOrganization?: GithubOrganization;\n  selectedRepository?: GithubRepository;\n}\n\nfunction orgToOption({ key, name }: GithubOrganization) {\n  return { value: key, label: name };\n}\n\nconst handleSearch = (organizations: GithubOrganization[]) => (q: string) =>\n  Promise.resolve(organizations.filter(o => !q || o.name.includes(q)).map(orgToOption));\n\nfunction renderRepositoryList(props: GitHubProjectCreateRendererProps) {\n  const {\n    importing,\n    loadingRepositories,\n    repositories,\n    repositoryPaging,\n    searchQuery,\n    selectedOrganization,\n    selectedRepository\n  } = props;\n\n  const isChecked = (repository: GithubRepository) =>\n    !!repository.sqProjectKey ||\n    (!!selectedRepository && selectedRepository.key === repository.key);\n\n  const isDisabled = (repository: GithubRepository) =>\n    !!repository.sqProjectKey || loadingRepositories || importing;\n\n  return (\n    selectedOrganization &&\n    repositories && (\n      <div className=\"boxed-group padded display-flex-wrap\">\n        <div className=\"width-100\">\n          <SearchBox\n            className=\"big-spacer-bottom\"\n            onChange={props.onSearch}\n            placeholder={translate('onboarding.create_project.search_repositories')}\n            value={searchQuery}\n          />\n        </div>\n\n        {repositories.length === 0 ? (\n          <div className=\"padded\">\n            <DeferredSpinner loading={loadingRepositories}>\n              {translate('no_results')}\n            </DeferredSpinner>\n          </div>\n        ) : (\n          repositories.map(r => (\n            <Radio\n              className=\"spacer-top spacer-bottom padded create-project-github-repository\"\n              key={r.key}\n              checked={isChecked(r)}\n              disabled={isDisabled(r)}\n              value={r.key}\n              onCheck={props.onSelectRepository}>\n              <div className=\"big overflow-hidden\" title={r.name}>\n                <div className=\"text-ellipsis\">{r.name}</div>\n                {r.sqProjectKey && (\n                  <em className=\"notice text-muted-2 small display-flex-center\">\n                    {translate('onboarding.create_project.repository_imported')}\n                    <CheckIcon className=\"little-spacer-left\" size={12} />\n                  </em>\n                )}\n              </div>\n            </Radio>\n          ))\n        )}\n\n        <div className=\"display-flex-justify-center width-100\">\n          <ListFooter\n            count={repositories.length}\n            total={repositoryPaging.total}\n            loadMore={props.onLoadMore}\n            loading={loadingRepositories}\n          />\n        </div>\n      </div>\n    )\n  );\n}\n\nexport default function GitHubProjectCreateRenderer(props: GitHubProjectCreateRendererProps) {\n  const {\n    canAdmin,\n    error,\n    importing,\n    loadingBindings,\n    loadingOrganizations,\n    organizations,\n    selectedOrganization,\n    selectedRepository\n  } = props;\n\n  if (loadingBindings) {\n    return <DeferredSpinner />;\n  }\n\n  return (\n    <div>\n      <CreateProjectPageHeader\n        additionalActions={\n          selectedOrganization && (\n            <div className=\"display-flex-center pull-right\">\n              <DeferredSpinner className=\"spacer-right\" loading={importing} />\n              <Button\n                className=\"button-large button-primary\"\n                disabled={!selectedRepository || importing}\n                onClick={props.onImportRepository}>\n                {translate('onboarding.create_project.import_selected_repo')}\n              </Button>\n            </div>\n          )\n        }\n        title={\n          <span className=\"text-middle display-flex-center\">\n            <img\n              alt=\"\" // Should be ignored by screen readers\n              className=\"spacer-right\"\n              height={24}\n              src={`${getBaseUrl()}/images/alm/github.svg`}\n            />\n            {translate('onboarding.create_project.github.title')}\n          </span>\n        }\n      />\n\n      {error ? (\n        <div className=\"display-flex-justify-center\">\n          <div className=\"boxed-group padded width-50 huge-spacer-top\">\n            <h2 className=\"big-spacer-bottom\">\n              {translate('onboarding.create_project.github.warning.title')}\n            </h2>\n            <Alert variant=\"warning\">\n              {canAdmin ? (\n                <FormattedMessage\n                  id=\"onboarding.create_project.github.warning.message_admin\"\n                  defaultMessage={translate(\n                    'onboarding.create_project.github.warning.message_admin'\n                  )}\n                  values={{\n                    link: (\n                      <Link to=\"/admin/settings?category=almintegration\">\n                        {translate('onboarding.create_project.github.warning.message_admin.link')}\n                      </Link>\n                    )\n                  }}\n                />\n              ) : (\n                translate('onboarding.create_project.github.warning.message')\n              )}\n            </Alert>\n          </div>\n        </div>\n      ) : (\n        <DeferredSpinner loading={loadingOrganizations}>\n          <div className=\"form-field\">\n            <label>{translate('onboarding.create_project.github.choose_organization')}</label>\n            {organizations.length > 0 ? (\n              <SearchSelect\n                defaultOptions={organizations.map(orgToOption)}\n                onSearch={handleSearch(organizations)}\n                minimumQueryLength={0}\n                onSelect={({ value }) => props.onSelectOrganization(value)}\n                value={selectedOrganization && orgToOption(selectedOrganization)}\n              />\n            ) : (\n              !loadingOrganizations && (\n                <Alert className=\"spacer-top\" variant=\"error\">\n                  {canAdmin ? (\n                    <FormattedMessage\n                      id=\"onboarding.create_project.github.no_orgs_admin\"\n                      defaultMessage={translate('onboarding.create_project.github.no_orgs_admin')}\n                      values={{\n                        link: (\n                          <Link to=\"/admin/settings?category=almintegration\">\n                            {translate(\n                              'onboarding.create_project.github.warning.message_admin.link'\n                            )}\n                          </Link>\n                        )\n                      }}\n                    />\n                  ) : (\n                    translate('onboarding.create_project.github.no_orgs')\n                  )}\n                </Alert>\n              )\n            )}\n          </div>\n        </DeferredSpinner>\n      )}\n\n      {renderRepositoryList(props)}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { debounce } from 'lodash';\nimport * as React from 'react';\nimport { WithRouterProps } from 'react-router';\nimport { getHostUrl } from 'sonar-ui-common/helpers/urls';\nimport {\n  getGithubClientId,\n  getGithubOrganizations,\n  getGithubRepositories,\n  importGithubRepository\n} from '../../../api/alm-integrations';\nimport { GithubOrganization, GithubRepository } from '../../../types/alm-integration';\nimport { AlmKeys, AlmSettingsInstance } from '../../../types/alm-settings';\nimport GitHubProjectCreateRenderer from './GitHubProjectCreateRenderer';\n\ninterface Props extends Pick<WithRouterProps, 'location' | 'router'> {\n  canAdmin: boolean;\n  loadingBindings: boolean;\n  onProjectCreate: (projectKeys: string[]) => void;\n  settings: AlmSettingsInstance[];\n}\n\ninterface State {\n  error: boolean;\n  importing: boolean;\n  loadingOrganizations: boolean;\n  loadingRepositories: boolean;\n  organizations: GithubOrganization[];\n  repositoryPaging: T.Paging;\n  repositories: GithubRepository[];\n  searchQuery: string;\n  selectedOrganization?: GithubOrganization;\n  selectedRepository?: GithubRepository;\n  settings?: AlmSettingsInstance;\n}\n\nconst REPOSITORY_PAGE_SIZE = 30;\n\nexport default class GitHubProjectCreate extends React.Component<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      error: false,\n      importing: false,\n      loadingOrganizations: true,\n      loadingRepositories: false,\n      organizations: [],\n      repositories: [],\n      repositoryPaging: { pageSize: REPOSITORY_PAGE_SIZE, total: 0, pageIndex: 1 },\n      searchQuery: '',\n      settings: props.settings[0]\n    };\n\n    this.triggerSearch = debounce(this.triggerSearch, 250);\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n\n    this.initialize();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.settings.length === 0 && this.props.settings.length > 0) {\n      this.setState({ settings: this.props.settings[0] }, () => this.initialize());\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  async initialize() {\n    const { location, router } = this.props;\n    const { settings } = this.state;\n\n    if (!settings || !settings.url) {\n      this.setState({ error: true });\n      return;\n    } else {\n      this.setState({ error: false });\n    }\n\n    const code = location.query?.code;\n\n    try {\n      if (!code) {\n        await this.redirectToGithub(settings);\n      } else {\n        delete location.query.code;\n        router.replace(location);\n        await this.fetchOrganizations(settings, code);\n      }\n    } catch (e) {\n      if (this.mounted) {\n        this.setState({ error: true });\n      }\n    }\n  }\n\n  async redirectToGithub(settings: AlmSettingsInstance) {\n    if (!settings.url) {\n      return;\n    }\n\n    const { clientId } = await getGithubClientId(settings.key);\n\n    if (!clientId) {\n      this.setState({ error: true });\n      return;\n    }\n\n    const queryParams = [\n      { param: 'client_id', value: clientId },\n      { param: 'redirect_uri', value: `${getHostUrl()}/projects/create?mode=${AlmKeys.GitHub}` }\n    ]\n      .map(({ param, value }) => `${param}=${value}`)\n      .join('&');\n\n    let instanceRootUrl;\n    // Strip the api section from the url, since we're not hitting the api here.\n    if (settings.url.includes('/api/v3')) {\n      // GitHub Enterprise\n      instanceRootUrl = settings.url.replace('/api/v3', '');\n    } else {\n      // github.com\n      instanceRootUrl = settings.url.replace('api.', '');\n    }\n\n    // strip the trailing /\n    instanceRootUrl = instanceRootUrl.replace(/\\/$/, '');\n    window.location.replace(`${instanceRootUrl}/login/oauth/authorize?${queryParams}`);\n  }\n\n  async fetchOrganizations(settings: AlmSettingsInstance, token: string) {\n    const { organizations } = await getGithubOrganizations(settings.key, token);\n\n    if (this.mounted) {\n      this.setState({ loadingOrganizations: false, organizations });\n    }\n  }\n\n  async fetchRepositories(params: { organizationKey: string; page?: number; query?: string }) {\n    const { organizationKey, page = 1, query } = params;\n    const { settings } = this.state;\n\n    if (!settings) {\n      this.setState({ error: true });\n      return;\n    }\n\n    this.setState({ loadingRepositories: true });\n\n    try {\n      const data = await getGithubRepositories({\n        almSetting: settings.key,\n        organization: organizationKey,\n        ps: REPOSITORY_PAGE_SIZE,\n        p: page,\n        query\n      });\n\n      if (this.mounted) {\n        this.setState(({ repositories }) => ({\n          loadingRepositories: false,\n          repositoryPaging: data.paging,\n          repositories: page === 1 ? data.repositories : [...repositories, ...data.repositories]\n        }));\n      }\n    } catch (_) {\n      if (this.mounted) {\n        this.setState({\n          loadingRepositories: false,\n          repositoryPaging: { pageIndex: 1, pageSize: REPOSITORY_PAGE_SIZE, total: 0 },\n          repositories: []\n        });\n      }\n    }\n  }\n\n  triggerSearch = (query: string) => {\n    const { selectedOrganization } = this.state;\n    if (selectedOrganization) {\n      this.setState({ selectedRepository: undefined });\n      this.fetchRepositories({ organizationKey: selectedOrganization.key, query });\n    }\n  };\n\n  handleSelectOrganization = (key: string) => {\n    this.setState(({ organizations }) => ({\n      searchQuery: '',\n      selectedRepository: undefined,\n      selectedOrganization: organizations.find(o => o.key === key)\n    }));\n    this.fetchRepositories({ organizationKey: key });\n  };\n\n  handleSelectRepository = (key: string) => {\n    this.setState(({ repositories }) => ({\n      selectedRepository: repositories?.find(r => r.key === key)\n    }));\n  };\n\n  handleSearch = (searchQuery: string) => {\n    this.setState({ searchQuery });\n    this.triggerSearch(searchQuery);\n  };\n\n  handleLoadMore = () => {\n    const { repositoryPaging, searchQuery, selectedOrganization } = this.state;\n\n    if (selectedOrganization) {\n      this.fetchRepositories({\n        organizationKey: selectedOrganization.key,\n        page: repositoryPaging.pageIndex + 1,\n        query: searchQuery\n      });\n    }\n  };\n\n  handleImportRepository = async () => {\n    const { selectedOrganization, selectedRepository, settings } = this.state;\n\n    if (settings && selectedOrganization && selectedRepository) {\n      this.setState({ importing: true });\n\n      try {\n        const { project } = await importGithubRepository(\n          settings.key,\n          selectedOrganization.key,\n          selectedRepository.key\n        );\n\n        this.props.onProjectCreate([project.key]);\n      } finally {\n        if (this.mounted) {\n          this.setState({ importing: false });\n        }\n      }\n    }\n  };\n\n  render() {\n    const { canAdmin, loadingBindings } = this.props;\n    const {\n      error,\n      importing,\n      loadingOrganizations,\n      loadingRepositories,\n      organizations,\n      repositoryPaging,\n      repositories,\n      searchQuery,\n      selectedOrganization,\n      selectedRepository\n    } = this.state;\n\n    return (\n      <GitHubProjectCreateRenderer\n        canAdmin={canAdmin}\n        error={error}\n        importing={importing}\n        loadingBindings={loadingBindings}\n        loadingOrganizations={loadingOrganizations}\n        loadingRepositories={loadingRepositories}\n        onImportRepository={this.handleImportRepository}\n        onLoadMore={this.handleLoadMore}\n        onSearch={this.handleSearch}\n        onSelectOrganization={this.handleSelectOrganization}\n        onSelectRepository={this.handleSelectRepository}\n        organizations={organizations}\n        repositoryPaging={repositoryPaging}\n        searchQuery={searchQuery}\n        repositories={repositories}\n        selectedOrganization={selectedOrganization}\n        selectedRepository={selectedRepository}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { debounce } from 'lodash';\nimport * as React from 'react';\nimport { SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport ValidationInput from 'sonar-ui-common/components/controls/ValidationInput';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { createProject, doesComponentExists } from '../../../api/components';\nimport ProjectKeyInput from '../../../components/common/ProjectKeyInput';\nimport { validateProjectKey } from '../../../helpers/projects';\nimport { ProjectKeyValidationResult } from '../../../types/component';\nimport { PROJECT_NAME_MAX_LEN } from './constants';\nimport CreateProjectPageHeader from './CreateProjectPageHeader';\nimport './ManualProjectCreate.css';\n\ninterface Props {\n  onProjectCreate: (projectKeys: string[]) => void;\n}\n\ninterface State {\n  projectName: string;\n  projectNameChanged: boolean;\n  projectNameError?: string;\n  projectKey: string;\n  projectKeyError?: string;\n  submitting: boolean;\n  touched: boolean;\n  validating: boolean;\n}\n\ntype ValidState = State & Required<Pick<State, 'projectKey' | 'projectName'>>;\n\nexport default class ManualProjectCreate extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      projectKey: '',\n      projectName: '',\n      projectNameChanged: false,\n      submitting: false,\n      touched: false,\n      validating: false\n    };\n    this.checkFreeKey = debounce(this.checkFreeKey, 250);\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  checkFreeKey = (key: string) => {\n    return doesComponentExists({ component: key })\n      .then(alreadyExist => {\n        if (this.mounted && key === this.state.projectKey) {\n          if (!alreadyExist) {\n            this.setState({ projectKeyError: undefined, validating: false });\n          } else {\n            this.setState({\n              projectKeyError: translate('onboarding.create_project.project_key.taken'),\n              touched: true,\n              validating: false\n            });\n          }\n        }\n      })\n      .catch(() => {\n        if (this.mounted && key === this.state.projectKey) {\n          this.setState({ projectKeyError: undefined, validating: false });\n        }\n      });\n  };\n\n  canSubmit(state: State): state is ValidState {\n    const { projectKey, projectKeyError, projectName, projectNameError } = state;\n    return Boolean(\n      projectKeyError === undefined &&\n        projectNameError === undefined &&\n        projectKey.length > 0 &&\n        projectName.length > 0\n    );\n  }\n\n  handleFormSubmit = (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    const { state } = this;\n    if (this.canSubmit(state)) {\n      this.setState({ submitting: true });\n      createProject({\n        project: state.projectKey,\n        name: (state.projectName || state.projectKey).trim()\n      }).then(\n        ({ project }) => this.props.onProjectCreate([project.key]),\n        () => {\n          if (this.mounted) {\n            this.setState({ submitting: false });\n          }\n        }\n      );\n    }\n  };\n\n  handleProjectKeyChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const projectKey = event.currentTarget.value || '';\n    const projectKeyError = this.validateKey(projectKey);\n\n    this.setState(prevState => {\n      const projectName = prevState.projectNameChanged ? prevState.projectName : projectKey;\n      return {\n        projectKey,\n        projectKeyError,\n        projectName,\n        projectNameError: this.validateName(projectName),\n        touched: true,\n        validating: projectKeyError === undefined\n      };\n    });\n\n    if (projectKeyError === undefined) {\n      this.checkFreeKey(projectKey);\n    }\n  };\n\n  handleProjectNameChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const projectName = event.currentTarget.value;\n    this.setState({\n      projectName,\n      projectNameChanged: true,\n      projectNameError: this.validateName(projectName)\n    });\n  };\n\n  validateKey = (projectKey: string) => {\n    const result = validateProjectKey(projectKey);\n    return result === ProjectKeyValidationResult.Valid\n      ? undefined\n      : translate('onboarding.create_project.project_key.error', result);\n  };\n\n  validateName = (projectName: string) => {\n    if (projectName.length === 0) {\n      return translate('onboarding.create_project.display_name.error.empty');\n    } else if (projectName.length > PROJECT_NAME_MAX_LEN) {\n      return translate('onboarding.create_project.display_name.error.too_long');\n    }\n    return undefined;\n  };\n\n  render() {\n    const {\n      projectKey,\n      projectKeyError,\n      projectName,\n      projectNameError,\n      submitting,\n      touched,\n      validating\n    } = this.state;\n    const projectNameIsInvalid = touched && projectNameError !== undefined;\n    const projectNameIsValid = touched && projectNameError === undefined;\n\n    return (\n      <>\n        <CreateProjectPageHeader title={translate('onboarding.create_project.setup_manually')} />\n\n        <div className=\"create-project-manual\">\n          <div className=\"flex-1 huge-spacer-right\">\n            <form className=\"manual-project-create\" onSubmit={this.handleFormSubmit}>\n              <ProjectKeyInput\n                error={projectKeyError}\n                help={translate('onboarding.create_project.project_key.help')}\n                label={translate('onboarding.create_project.project_key')}\n                onProjectKeyChange={this.handleProjectKeyChange}\n                projectKey={projectKey}\n                touched={touched}\n                validating={validating}\n              />\n\n              <ValidationInput\n                className=\"form-field\"\n                description={translate('onboarding.create_project.display_name.description')}\n                error={projectNameError}\n                help={translate('onboarding.create_project.display_name.help')}\n                id=\"project-name\"\n                isInvalid={projectNameIsInvalid}\n                isValid={projectNameIsValid}\n                label={translate('onboarding.create_project.display_name')}\n                required={true}>\n                <input\n                  className={classNames('input-super-large', {\n                    'is-invalid': projectNameIsInvalid,\n                    'is-valid': projectNameIsValid\n                  })}\n                  id=\"project-name\"\n                  maxLength={PROJECT_NAME_MAX_LEN}\n                  minLength={1}\n                  onChange={this.handleProjectNameChange}\n                  type=\"text\"\n                  value={projectName}\n                />\n              </ValidationInput>\n\n              <SubmitButton disabled={!this.canSubmit(this.state) || submitting}>\n                {translate('set_up')}\n              </SubmitButton>\n              <DeferredSpinner className=\"spacer-left\" loading={submitting} />\n            </form>\n          </div>\n        </div>\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n\nexport const PROJECT_NAME_MAX_LEN = 255;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Helmet } from 'react-helmet-async';\nimport { WithRouterProps } from 'react-router';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getAlmSettings } from '../../../api/alm-settings';\nimport A11ySkipTarget from '../../../app/components/a11y/A11ySkipTarget';\nimport { whenLoggedIn } from '../../../components/hoc/whenLoggedIn';\nimport { withAppState } from '../../../components/hoc/withAppState';\nimport { getProjectUrl } from '../../../helpers/urls';\nimport { AlmKeys, AlmSettingsInstance } from '../../../types/alm-settings';\nimport BitbucketProjectCreate from './BitbucketProjectCreate';\nimport CreateProjectModeSelection from './CreateProjectModeSelection';\nimport GitHubProjectCreate from './GitHubProjectCreate';\nimport ManualProjectCreate from './ManualProjectCreate';\nimport './style.css';\nimport { CreateProjectModes } from './types';\n\ninterface Props extends Pick<WithRouterProps, 'router' | 'location'> {\n  appState: Pick<T.AppState, 'branchesEnabled' | 'canAdmin'>;\n  currentUser: T.LoggedInUser;\n}\n\ninterface State {\n  bitbucketSettings: AlmSettingsInstance[];\n  githubSettings: AlmSettingsInstance[];\n  loading: boolean;\n}\n\nexport class CreateProjectPage extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { bitbucketSettings: [], githubSettings: [], loading: true };\n\n  componentDidMount() {\n    const {\n      appState: { branchesEnabled }\n    } = this.props;\n    this.mounted = true;\n    if (branchesEnabled) {\n      this.fetchAlmBindings();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchAlmBindings = () => {\n    this.setState({ loading: true });\n    getAlmSettings()\n      .then(almSettings => {\n        if (this.mounted) {\n          this.setState({\n            bitbucketSettings: almSettings.filter(s => s.alm === AlmKeys.Bitbucket),\n            githubSettings: almSettings.filter(s => s.alm === AlmKeys.GitHub),\n            loading: false\n          });\n        }\n      })\n      .catch(() => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      });\n  };\n\n  handleModeSelect = (mode: CreateProjectModes) => {\n    const { router, location } = this.props;\n    router.push({\n      pathname: location.pathname,\n      query: { mode }\n    });\n  };\n\n  handleProjectCreate = (projectKeys: string[]) => {\n    if (projectKeys.length === 1) {\n      this.props.router.push(getProjectUrl(projectKeys[0]));\n    }\n  };\n\n  renderForm(mode?: CreateProjectModes) {\n    const {\n      appState: { canAdmin },\n      location,\n      router\n    } = this.props;\n    const { bitbucketSettings, githubSettings, loading } = this.state;\n\n    switch (mode) {\n      case CreateProjectModes.BitbucketServer: {\n        return (\n          <BitbucketProjectCreate\n            canAdmin={!!canAdmin}\n            bitbucketSettings={bitbucketSettings}\n            loadingBindings={loading}\n            location={location}\n            onProjectCreate={this.handleProjectCreate}\n          />\n        );\n      }\n      case CreateProjectModes.GitHub: {\n        return (\n          <GitHubProjectCreate\n            canAdmin={!!canAdmin}\n            loadingBindings={loading}\n            location={location}\n            onProjectCreate={this.handleProjectCreate}\n            router={router}\n            settings={githubSettings}\n          />\n        );\n      }\n      case CreateProjectModes.Manual: {\n        return <ManualProjectCreate onProjectCreate={this.handleProjectCreate} />;\n      }\n      default: {\n        const almCounts = {\n          [AlmKeys.Azure]: 0,\n          [AlmKeys.Bitbucket]: bitbucketSettings.length,\n          [AlmKeys.GitHub]: githubSettings.length,\n          [AlmKeys.GitLab]: 0\n        };\n        return (\n          <CreateProjectModeSelection\n            almCounts={almCounts}\n            loadingBindings={loading}\n            onSelectMode={this.handleModeSelect}\n          />\n        );\n      }\n    }\n  }\n\n  render() {\n    const {\n      appState: { branchesEnabled },\n      location\n    } = this.props;\n    const mode: CreateProjectModes | undefined = location.query?.mode;\n\n    return (\n      <>\n        <Helmet title={translate('my_account.create_new.TRK')} titleTemplate=\"%s\" />\n        <A11ySkipTarget anchor=\"create_project_main\" />\n        <div className=\"page page-limited huge-spacer-bottom position-relative\" id=\"create-project\">\n          {this.renderForm(branchesEnabled ? mode : CreateProjectModes.Manual)}\n        </div>\n      </>\n    );\n  }\n}\n\nexport default whenLoggedIn(withAppState(CreateProjectPage));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar classNames = require(\"classnames\");\nvar React = require(\"react\");\nvar HelpIcon_1 = require(\"../icons/HelpIcon\");\nvar theme_1 = require(\"../theme\");\nrequire(\"./HelpTooltip.css\");\nvar Tooltip_1 = require(\"./Tooltip\");\nfunction HelpTooltip(props) {\n    var _a = props.tagName, tagName = _a === void 0 ? 'div' : _a;\n    return React.createElement(tagName, { className: classNames('help-tooltip', props.className) }, React.createElement(Tooltip_1.default, { mouseLeaveDelay: 0.25, onShow: props.onShow, overlay: props.overlay, placement: props.placement },\n        React.createElement(\"span\", { className: \"display-inline-flex-center\" }, props.children || (React.createElement(theme_1.ThemeConsumer, null, function (theme) { return React.createElement(HelpIcon_1.default, { fill: theme.colors.gray71, size: 12 }); })))));\n}\nexports.default = HelpTooltip;\n//# sourceMappingURL=HelpTooltip.js.map","var api = require(\"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../css-loader/dist/cjs.js??ref--6-1!../../../postcss-loader/src/index.js??postcss!./HelpTooltip.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".help-tooltip{display:inline-flex;align-items:center;vertical-align:middle}.help-toolip-link{display:block;width:12px;height:12px;border:none}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar classNames = require(\"classnames\");\nvar React = require(\"react\");\nvar l10n_1 = require(\"../../helpers/l10n\");\nvar measures_1 = require(\"../../helpers/measures\");\nvar DeferredSpinner_1 = require(\"../ui/DeferredSpinner\");\nvar buttons_1 = require(\"./buttons\");\nfunction ListFooter(props) {\n    var className = props.className, count = props.count, loading = props.loading, needReload = props.needReload, total = props.total, _a = props.ready, ready = _a === void 0 ? true : _a;\n    var hasMore = total && total > count;\n    var button;\n    if (needReload && props.reload) {\n        button = (React.createElement(buttons_1.Button, { className: \"spacer-left\", \"data-test\": \"reload\", disabled: loading, onClick: props.reload }, l10n_1.translate('reload')));\n    }\n    else if (hasMore && props.loadMore) {\n        button = (React.createElement(buttons_1.Button, { className: \"spacer-left\", disabled: loading, \"data-test\": \"show-more\", onClick: props.loadMore }, l10n_1.translate('show_more')));\n    }\n    return (React.createElement(\"footer\", { className: classNames('spacer-top note text-center', { 'new-loading': !ready }, className) },\n        l10n_1.translateWithParameters('x_of_y_shown', measures_1.formatMeasure(count, 'INT', null), measures_1.formatMeasure(total, 'INT', null)),\n        button,\n        loading && React.createElement(DeferredSpinner_1.default, { className: \"text-bottom spacer-left position-absolute\" })));\n}\nexports.default = ListFooter;\n//# sourceMappingURL=ListFooter.js.map","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { A11yContext } from './A11yContext';\n\ninterface Props {\n  anchor: string;\n  label?: string;\n  weight?: number;\n}\n\nexport default function A11ySkipTarget(props: Props) {\n  return (\n    <A11yContext.Consumer>\n      {({ addA11ySkipLink, removeA11ySkipLink }) => (\n        <A11ySkipTargetInner\n          addA11ySkipLink={addA11ySkipLink}\n          removeA11ySkipLink={removeA11ySkipLink}\n          {...props}\n        />\n      )}\n    </A11yContext.Consumer>\n  );\n}\n\ninterface InnerProps {\n  addA11ySkipLink: (link: T.A11ySkipLink) => void;\n  removeA11ySkipLink: (link: T.A11ySkipLink) => void;\n}\n\nexport class A11ySkipTargetInner extends React.PureComponent<Props & InnerProps> {\n  componentDidMount() {\n    this.props.addA11ySkipLink(this.getLink());\n  }\n\n  componentWillUnmount() {\n    this.props.removeA11ySkipLink(this.getLink());\n  }\n\n  getLink = (): T.A11ySkipLink => {\n    const { anchor: key, label = translate('skip_to_content'), weight } = this.props;\n    return { key, label, weight };\n  };\n\n  render() {\n    const { anchor } = this.props;\n    return <span id={`a11y_target__${anchor}`} />;\n  }\n}\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = require(\"react\");\nvar Icon_1 = require(\"./Icon\");\nfunction ChevronDownIcon(_a) {\n    var _b = _a.fill, fill = _b === void 0 ? 'currentColor' : _b, iconProps = __rest(_a, [\"fill\"]);\n    return (React.createElement(Icon_1.default, __assign({}, iconProps),\n        React.createElement(\"path\", { d: \"M7.72 11.596L3.119 6.992A.382.382 0 0 1 3 6.713c0-.108.04-.2.118-.279l1.03-1.03a.382.382 0 0 1 .278-.117c.108 0 .201.04.28.117L8 8.7l3.294-3.295a.382.382 0 0 1 .28-.117c.108 0 .2.04.279.117l1.03 1.03a.382.382 0 0 1 .117.28c0 .107-.04.2-.118.278L8.28 11.596a.382.382 0 0 1-.279.117.382.382 0 0 1-.28-.117z\", style: { fill: fill } })));\n}\nexports.default = ChevronDownIcon;\n//# sourceMappingURL=ChevronDownIcon.js.map","var api = require(\"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../css-loader/dist/cjs.js??ref--6-1!../../../postcss-loader/src/index.js??postcss!./Radio.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar classNames = require(\"classnames\");\nvar React = require(\"react\");\nrequire(\"./Radio.css\");\nvar Radio = (function (_super) {\n    __extends(Radio, _super);\n    function Radio() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.handleClick = function (event) {\n            event.preventDefault();\n            if (!_this.props.disabled) {\n                _this.props.onCheck(_this.props.value);\n            }\n        };\n        return _this;\n    }\n    Radio.prototype.render = function () {\n        var _a = this.props, className = _a.className, checked = _a.checked, children = _a.children, disabled = _a.disabled;\n        return (React.createElement(\"a\", { \"aria-checked\": checked, className: classNames('display-inline-flex-center link-radio', className, { disabled: disabled }), href: \"#\", onClick: this.handleClick, role: \"radio\" },\n            React.createElement(\"i\", { className: classNames('icon-radio', 'spacer-right', { 'is-checked': checked }) }),\n            children));\n    };\n    return Radio;\n}(React.PureComponent));\nexports.default = Radio;\n//# sourceMappingURL=Radio.js.map","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".icon-radio{position:relative;display:inline-block;vertical-align:top;width:14px;height:14px;margin:1px;border:1px solid #cdcdcd;border-radius:12px;box-sizing:border-box;transition:border-color .3s ease;flex-shrink:0}.icon-radio:after{position:absolute;top:2px;left:2px;display:block;width:8px;height:8px;border-radius:8px;background-color:#236a97;content:\\\"\\\";opacity:0;transition:opacity .3s ease}.link-radio .icon-radio.is-checked:after{opacity:1}.link-radio{border-bottom:none}.link-radio,.link-radio:not(.disabled):active,.link-radio:not(.disabled):focus,.link-radio:not(.disabled):hover{color:inherit}.link-radio:not(.disabled):hover>.icon-radio{border-color:#4b9fd5}.link-radio.disabled,.link-radio.disabled:hover,.link-radio.disabled label{color:#bbb;cursor:not-allowed}.link-radio.disabled .icon-radio:after{background-color:#ebebeb}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = require(\"react\");\nvar ChevronDownIcon_1 = require(\"./ChevronDownIcon\");\nvar ChevronRightIcon_1 = require(\"./ChevronRightIcon\");\nfunction OpenCloseIcon(_a) {\n    var open = _a.open, iconProps = __rest(_a, [\"open\"]);\n    return open ? React.createElement(ChevronDownIcon_1.default, __assign({}, iconProps)) : React.createElement(ChevronRightIcon_1.default, __assign({}, iconProps));\n}\nexports.default = OpenCloseIcon;\n//# sourceMappingURL=OpenCloseIcon.js.map","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport const enum AlmKeys {\n  Azure = 'azure',\n  Bitbucket = 'bitbucket',\n  GitHub = 'github',\n  GitLab = 'gitlab'\n}\n\nexport interface AlmBindingDefinition {\n  key: string;\n}\n\nexport interface AzureBindingDefinition extends AlmBindingDefinition {\n  personalAccessToken: string;\n}\n\nexport interface BitbucketBindingDefinition extends AlmBindingDefinition {\n  personalAccessToken: string;\n  url: string;\n}\n\nexport interface GithubBindingDefinition extends AlmBindingDefinition {\n  appId: string;\n  clientId: string;\n  clientSecret: string;\n  privateKey: string;\n  url: string;\n}\n\nexport interface GitlabBindingDefinition extends AlmBindingDefinition {\n  personalAccessToken: string;\n  url?: string;\n}\n\nexport interface ProjectAlmBindingResponse {\n  alm: AlmKeys;\n  key: string;\n  repository?: string;\n  slug?: string;\n  summaryCommentEnabled?: boolean;\n}\n\nexport interface ProjectBitbucketBindingResponse extends ProjectAlmBindingResponse {\n  alm: AlmKeys.Bitbucket;\n  repository: string;\n  slug: string;\n}\n\nexport interface ProjectAlmBindingParams {\n  almSetting: string;\n  project: string;\n}\n\nexport interface AzureProjectAlmBindingParams extends ProjectAlmBindingParams {}\n\nexport interface BitbucketProjectAlmBindingParams extends ProjectAlmBindingParams {\n  repository: string;\n  slug: string;\n}\n\nexport interface GithubProjectAlmBindingParams extends ProjectAlmBindingParams {\n  repository: string;\n  summaryCommentEnabled: boolean;\n}\n\nexport interface GitlabProjectAlmBindingParams extends ProjectAlmBindingParams {\n  repository?: string;\n}\n\nexport interface AlmSettingsInstance {\n  alm: AlmKeys;\n  key: string;\n  url?: string;\n}\n\nexport interface AlmSettingsBindingDefinitions {\n  [AlmKeys.Azure]: AzureBindingDefinition[];\n  [AlmKeys.Bitbucket]: BitbucketBindingDefinition[];\n  [AlmKeys.GitHub]: GithubBindingDefinition[];\n  [AlmKeys.GitLab]: GitlabBindingDefinition[];\n}\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = require(\"react\");\nvar Icon_1 = require(\"./Icon\");\nfunction CheckIcon(_a) {\n    var _b = _a.fill, fill = _b === void 0 ? 'currentColor' : _b, iconProps = __rest(_a, [\"fill\"]);\n    return (React.createElement(Icon_1.default, __assign({}, iconProps),\n        React.createElement(\"path\", { d: \"M14.92 4.804q0 0.357-0.25 0.607l-7.679 7.679q-0.25 0.25-0.607 0.25t-0.607-0.25l-4.446-4.446q-0.25-0.25-0.25-0.607t0.25-0.607l1.214-1.214q0.25-0.25 0.607-0.25t0.607 0.25l2.625 2.634 5.857-5.866q0.25-0.25 0.607-0.25t0.607 0.25l1.214 1.214q0.25 0.25 0.25 0.607z\", style: { fill: fill } })));\n}\nexports.default = CheckIcon;\n//# sourceMappingURL=CheckIcon.js.map","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport {\n  AlmSettingsBindingDefinitions,\n  AlmSettingsInstance,\n  AzureBindingDefinition,\n  AzureProjectAlmBindingParams,\n  BitbucketBindingDefinition,\n  BitbucketProjectAlmBindingParams,\n  GithubBindingDefinition,\n  GithubProjectAlmBindingParams,\n  GitlabBindingDefinition,\n  GitlabProjectAlmBindingParams,\n  ProjectAlmBindingResponse\n} from '../types/alm-settings';\n\nexport function getAlmDefinitions(): Promise<AlmSettingsBindingDefinitions> {\n  return getAlmDefinitionsNoCatch().catch(throwGlobalError);\n}\n\nexport function getAlmDefinitionsNoCatch(): Promise<AlmSettingsBindingDefinitions> {\n  return getJSON('/api/alm_settings/list_definitions');\n}\n\nexport function getAlmSettings(project?: string): Promise<AlmSettingsInstance[]> {\n  return getJSON('/api/alm_settings/list', { project })\n    .then(({ almSettings }) => almSettings)\n    .catch(throwGlobalError);\n}\n\nexport function createGithubConfiguration(data: GithubBindingDefinition) {\n  return post('/api/alm_settings/create_github', data).catch(throwGlobalError);\n}\n\nexport function updateGithubConfiguration(data: GithubBindingDefinition & { newKey: string }) {\n  return post('/api/alm_settings/update_github', data).catch(throwGlobalError);\n}\n\nexport function createAzureConfiguration(data: AzureBindingDefinition) {\n  return post('/api/alm_settings/create_azure', data).catch(throwGlobalError);\n}\n\nexport function updateAzureConfiguration(data: AzureBindingDefinition & { newKey: string }) {\n  return post('/api/alm_settings/update_azure', data).catch(throwGlobalError);\n}\n\nexport function createBitbucketConfiguration(data: BitbucketBindingDefinition) {\n  return post('/api/alm_settings/create_bitbucket', data).catch(throwGlobalError);\n}\n\nexport function updateBitbucketConfiguration(\n  data: BitbucketBindingDefinition & { newKey: string }\n) {\n  return post('/api/alm_settings/update_bitbucket', data).catch(throwGlobalError);\n}\n\nexport function createGitlabConfiguration(data: GitlabBindingDefinition) {\n  return post('/api/alm_settings/create_gitlab', data).catch(throwGlobalError);\n}\n\nexport function updateGitlabConfiguration(data: GitlabBindingDefinition & { newKey: string }) {\n  return post('/api/alm_settings/update_gitlab', data).catch(throwGlobalError);\n}\n\nexport function deleteConfiguration(key: string) {\n  return post('/api/alm_settings/delete', { key }).catch(throwGlobalError);\n}\n\nexport function countBindedProjects(almSetting: string) {\n  return getJSON('/api/alm_settings/count_binding', { almSetting })\n    .then(({ projects }) => projects)\n    .catch(throwGlobalError);\n}\n\nexport function getProjectAlmBinding(project: string): Promise<ProjectAlmBindingResponse> {\n  return getJSON('/api/alm_settings/get_binding', { project });\n}\n\nexport function deleteProjectAlmBinding(project: string): Promise<void> {\n  return post('/api/alm_settings/delete_binding', { project }).catch(throwGlobalError);\n}\n\nexport function setProjectAzureBinding(data: AzureProjectAlmBindingParams) {\n  return post('/api/alm_settings/set_azure_binding', data).catch(throwGlobalError);\n}\n\nexport function setProjectBitbucketBinding(data: BitbucketProjectAlmBindingParams) {\n  return post('/api/alm_settings/set_bitbucket_binding', data).catch(throwGlobalError);\n}\n\nexport function setProjectGithubBinding(data: GithubProjectAlmBindingParams) {\n  return post('/api/alm_settings/set_github_binding', data).catch(throwGlobalError);\n}\n\nexport function setProjectGitlabBinding(data: GitlabProjectAlmBindingParams) {\n  return post('/api/alm_settings/set_gitlab_binding', data).catch(throwGlobalError);\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = require(\"react\");\nvar AlertErrorIcon_1 = require(\"../icons/AlertErrorIcon\");\nvar AlertSuccessIcon_1 = require(\"../icons/AlertSuccessIcon\");\nvar HelpTooltip_1 = require(\"./HelpTooltip\");\nfunction ValidationInput(props) {\n    var hasError = props.isInvalid && props.error !== undefined;\n    return (React.createElement(\"div\", { className: props.className },\n        React.createElement(\"label\", { htmlFor: props.id },\n            React.createElement(\"span\", { className: \"text-middle\" },\n                React.createElement(\"strong\", null, props.label),\n                props.required && React.createElement(\"em\", { className: \"mandatory\" }, \"*\")),\n            props.help && React.createElement(HelpTooltip_1.default, { className: \"spacer-left\", overlay: props.help })),\n        React.createElement(\"div\", { className: \"little-spacer-top spacer-bottom\" },\n            props.children,\n            props.isInvalid && React.createElement(AlertErrorIcon_1.default, { className: \"spacer-left text-middle\" }),\n            hasError && (React.createElement(\"span\", { className: \"little-spacer-left text-danger text-middle\" }, props.error)),\n            props.isValid && React.createElement(AlertSuccessIcon_1.default, { className: \"spacer-left text-middle\" })),\n        props.description && React.createElement(\"div\", { className: \"note abs-width-400\" }, props.description)));\n}\nexports.default = ValidationInput;\n//# sourceMappingURL=ValidationInput.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar classNames = require(\"classnames\");\nvar React = require(\"react\");\nvar OpenCloseIcon_1 = require(\"../icons/OpenCloseIcon\");\nvar BoxedGroupAccordion = (function (_super) {\n    __extends(BoxedGroupAccordion, _super);\n    function BoxedGroupAccordion() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.state = { hoveringInner: false };\n        _this.handleClick = function () {\n            _this.props.onClick(_this.props.data);\n        };\n        _this.onDetailEnter = function () {\n            _this.setState({ hoveringInner: true });\n        };\n        _this.onDetailLeave = function () {\n            _this.setState({ hoveringInner: false });\n        };\n        return _this;\n    }\n    BoxedGroupAccordion.prototype.render = function () {\n        var _a = this.props, className = _a.className, open = _a.open, renderHeader = _a.renderHeader, title = _a.title;\n        return (React.createElement(\"div\", { className: classNames('boxed-group boxed-group-accordion', className, {\n                'no-hover': this.state.hoveringInner,\n            }) },\n            React.createElement(\"div\", { className: \"boxed-group-header\", onClick: this.handleClick, role: \"listitem\" },\n                React.createElement(\"span\", { className: \"boxed-group-accordion-title\" },\n                    React.createElement(OpenCloseIcon_1.default, { className: \"little-spacer-right\", open: open }),\n                    title),\n                renderHeader && renderHeader()),\n            open && (React.createElement(\"div\", { className: \"boxed-group-inner\", onMouseEnter: this.onDetailEnter, onMouseLeave: this.onDetailLeave }, this.props.children))));\n    };\n    return BoxedGroupAccordion;\n}(React.PureComponent));\nexports.default = BoxedGroupAccordion;\n//# sourceMappingURL=BoxedGroupAccordion.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar lodash_1 = require(\"lodash\");\nvar React = require(\"react\");\nvar l10n_1 = require(\"../../helpers/l10n\");\nvar Select_1 = require(\"./Select\");\nvar SearchSelect = (function (_super) {\n    __extends(SearchSelect, _super);\n    function SearchSelect(props) {\n        var _this = _super.call(this, props) || this;\n        _this.mounted = false;\n        _this.handleSearch = function (query) {\n            var currentQuery = query;\n            _this.props.onSearch(currentQuery).then(function (options) {\n                if (_this.mounted) {\n                    _this.setState(function (state) { return ({\n                        loading: false,\n                        options: state.query === currentQuery ? options : state.options,\n                    }); });\n                }\n            }, function () {\n                if (_this.mounted) {\n                    _this.setState({ loading: false });\n                }\n            });\n        };\n        _this.handleChange = function (option) {\n            if (Array.isArray(option)) {\n                if (_this.props.onMultiSelect) {\n                    _this.props.onMultiSelect(option);\n                }\n            }\n            else if (_this.props.onSelect) {\n                _this.props.onSelect(option);\n            }\n        };\n        _this.handleInputChange = function (query) {\n            if (query.length >= _this.minimumQueryLength) {\n                _this.setState({ loading: true, query: query });\n                _this.handleSearch(query);\n            }\n            else {\n                var options = (query.length === 0 && _this.props.defaultOptions) || [];\n                _this.setState({ options: options, query: query });\n            }\n        };\n        _this.handleFilterOption = function () { return true; };\n        _this.state = { loading: false, options: props.defaultOptions || [], query: '' };\n        _this.handleSearch = lodash_1.debounce(_this.handleSearch, 250);\n        return _this;\n    }\n    SearchSelect.prototype.componentDidMount = function () {\n        this.mounted = true;\n    };\n    SearchSelect.prototype.componentWillUnmount = function () {\n        this.mounted = false;\n    };\n    Object.defineProperty(SearchSelect.prototype, \"autofocus\", {\n        get: function () {\n            return this.props.autofocus !== undefined ? this.props.autofocus : true;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SearchSelect.prototype, \"minimumQueryLength\", {\n        get: function () {\n            return this.props.minimumQueryLength !== undefined ? this.props.minimumQueryLength : 2;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SearchSelect.prototype, \"resetOnBlur\", {\n        get: function () {\n            return this.props.resetOnBlur !== undefined ? this.props.resetOnBlur : true;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SearchSelect.prototype.render = function () {\n        var Component = this.props.canCreate ? Select_1.Creatable : Select_1.default;\n        return (React.createElement(Component, { autoFocus: this.autofocus, className: this.props.className, clearable: this.props.clearable, escapeClearsValue: false, filterOption: this.handleFilterOption, isLoading: this.state.loading, multi: this.props.multi, noResultsText: this.state.query.length < this.minimumQueryLength\n                ? l10n_1.translateWithParameters('select2.tooShort', this.minimumQueryLength)\n                : l10n_1.translate('select2.noMatches'), onBlurResetsInput: this.resetOnBlur, onChange: this.handleChange, onInputChange: this.handleInputChange, optionRenderer: this.props.renderOption, options: this.state.options, placeholder: l10n_1.translate('search_verb'), promptTextCreator: this.props.promptTextCreator, searchable: true, value: this.props.value, valueRenderer: this.props.renderOption }));\n    };\n    return SearchSelect;\n}(React.PureComponent));\nexports.default = SearchSelect;\n//# sourceMappingURL=SearchSelect.js.map","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport const ALM_INTEGRATION = 'almintegration';\nexport const ANALYSIS_SCOPE_CATEGORY = 'exclusions';\nexport const LANGUAGES_CATEGORY = 'languages';\nexport const NEW_CODE_PERIOD_CATEGORY = 'new_code_period';\nexport const PULL_REQUEST_DECORATION_BINDING_CATEGORY = 'pull_request_decoration_binding';\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport handleRequiredAuthentication from 'sonar-ui-common/helpers/handleRequiredAuthentication';\nimport { isLoggedIn } from '../../helpers/users';\nimport { getWrappedDisplayName } from './utils';\nimport { withCurrentUser } from './withCurrentUser';\n\nexport function whenLoggedIn<P>(WrappedComponent: React.ComponentType<P>) {\n  class Wrapper extends React.Component<P & { currentUser: T.CurrentUser }> {\n    static displayName = getWrappedDisplayName(WrappedComponent, 'whenLoggedIn');\n\n    componentDidMount() {\n      if (!isLoggedIn(this.props.currentUser)) {\n        handleRequiredAuthentication();\n      }\n    }\n\n    render() {\n      if (isLoggedIn(this.props.currentUser)) {\n        return <WrappedComponent {...this.props} />;\n      } else {\n        return null;\n      }\n    }\n  }\n\n  return withCurrentUser(Wrapper);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport ValidationInput from 'sonar-ui-common/components/controls/ValidationInput';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { PROJECT_KEY_MAX_LEN } from '../../helpers/constants';\n\nexport interface ProjectKeyInputProps {\n  error?: string;\n  help?: string;\n  label?: string;\n  onProjectKeyChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\n  placeholder?: string;\n  projectKey?: string;\n  touched: boolean;\n  validating?: boolean;\n}\n\nexport default function ProjectKeyInput(props: ProjectKeyInputProps) {\n  const { error, help, label, placeholder, projectKey, touched, validating } = props;\n\n  const isInvalid = touched && error !== undefined;\n  const isValid = touched && !validating && error === undefined;\n\n  return (\n    <ValidationInput\n      className=\"form-field\"\n      description={translate('onboarding.create_project.project_key.description')}\n      error={error}\n      help={help}\n      id=\"project-key\"\n      isInvalid={isInvalid}\n      isValid={isValid}\n      label={label}\n      required={label !== undefined}>\n      <input\n        autoFocus={true}\n        className={classNames('input-super-large', {\n          'is-invalid': isInvalid,\n          'is-valid': isValid\n        })}\n        id=\"project-key\"\n        maxLength={PROJECT_KEY_MAX_LEN}\n        minLength={1}\n        onChange={props.onProjectKeyChange}\n        placeholder={placeholder}\n        type=\"text\"\n        value={projectKey}\n      />\n    </ValidationInput>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { ProjectKeyValidationResult } from '../types/component';\nimport { PROJECT_KEY_MAX_LEN } from './constants';\n\nexport function validateProjectKey(projectKey: string): ProjectKeyValidationResult {\n  // This is the regex used on the backend:\n  //   [\\p{Alnum}\\-_.:]*[\\p{Alpha}\\-_.:]+[\\p{Alnum}\\-_.:]*\n  // See sonar-core/src/main/java/org/sonar/core/component/ComponentKeys.java\n  const regex = /^[\\w\\-.:]*[a-z\\-_.:]+[\\w\\-.:]*$/i;\n  if (projectKey.length === 0) {\n    return ProjectKeyValidationResult.Empty;\n  } else if (projectKey.length > PROJECT_KEY_MAX_LEN) {\n    return ProjectKeyValidationResult.TooLong;\n  } else if (regex.test(projectKey)) {\n    return ProjectKeyValidationResult.Valid;\n  } else {\n    return /^[0-9]+$/.test(projectKey)\n      ? ProjectKeyValidationResult.OnlyDigits\n      : ProjectKeyValidationResult.InvalidChar;\n  }\n}\n"],"sourceRoot":""}