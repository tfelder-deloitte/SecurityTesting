{"version":3,"sources":["webpack:///./node_modules/sonar-ui-common/components/icons/GroupIcon.js","webpack:///./src/main/js/apps/create/organization/utils.ts","webpack:///./src/main/js/components/common/VisibilitySelector.tsx","webpack:///./src/main/js/apps/permissions/project/components/ApplyTemplate.tsx","webpack:///./src/main/js/api/billing.ts","webpack:///./src/main/js/apps/create/components/UpgradeOrganizationAdvantages.tsx","webpack:///./src/main/js/apps/create/components/BillingFormShim.tsx","webpack:///./src/main/js/apps/create/components/UpgradeOrganizationModal.tsx","webpack:///./src/main/js/apps/create/components/UpgradeOrganizationBox.tsx","webpack:///./src/main/js/apps/permissions/project/components/AllHoldersList.tsx","webpack:///./src/main/js/apps/permissions/project/components/PageHeader.tsx","webpack:///./src/main/js/apps/permissions/project/components/PublicProjectDisclaimer.tsx","webpack:///./src/main/js/apps/permissions/project/components/App.tsx","webpack:///./src/main/js/apps/permissions/project/components/AppContainer.ts","webpack:///./node_modules/sonar-ui-common/components/controls/ConfirmModal.js","webpack:///./node_modules/sonar-ui-common/components/controls/RadioToggle.js","webpack:///./node_modules/sonar-ui-common/components/controls/RadioToggle.css?35f6","webpack:///./node_modules/sonar-ui-common/components/controls/RadioToggle.css","webpack:///./src/main/js/helpers/extensions.ts","webpack:///./src/main/js/helpers/almIntegrations.ts","webpack:///./node_modules/lodash/partition.js"],"names":["__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","defineProperty","exports","value","React","Icon_1","default","_a","fill","iconProps","size","createElement","ThemedIcon","viewBox","theme","transform","d","style","colors","gray67","Step","BIND_ORGANIZATION_KEY","BIND_ORGANIZATION_REDIRECT_TO_ORG_TIMESTAMP","formatPrice","price","noSign","priceFormatted","replace","urlQuery","almInstallId","undefined","almKey","jwt","iss","render","className","props","map","visibility","key","checked","onCheck","onChange","disabled","canTurnToPrivate","showDetails","mounted","state","done","loading","fetchPermissionTemplates","organization","then","permissionTemplates","setState","handleSubmit","permissionTemplate","projectKey","project","templateId","onApply","Promise","reject","handlePermissionTemplateChange","componentDidMount","componentWillUnmount","header","name","onClose","onSubmit","onCloseClick","onFormSubmit","submitting","id","variant","htmlFor","clearable","options","label","onClick","getSubscriptionPlans","subscriptionPlans","throwGlobalError","UpgradeOrganizationAdvantages","Advantage","children","lightGreen","BillingForm","withCurrentUser","ready","contentLabel","noBackdrop","insideModal","onRequestClose","shouldCloseOnOverlayClick","onCommit","onUpgradeDone","organizationKey","processingUpgrade","renderFormFields","renderNextCharge","renderRecap","renderSubmitButton","defaultMessage","values","org","upgradeOrganizationModal","fetchSubscriptionPlans","handleUpgradeClick","handleUpgradeOrganizationModalClose","handleOrganizationUpgrade","onOrganizationUpgrade","startingPrice","title","titleInfo","target","to","handleToggleUser","user","permission","permissions","includes","revokePermissionFromUser","login","grantPermissionToUser","handleToggleGroup","group","revokePermissionFromGroup","grantPermissionToGroup","handleSelectPermission","onPermissionSelect","filter","groups","groupsPaging","users","usersPaging","order","component","qualifier","count","total","HoldersList","onSelectPermission","onToggleGroup","onToggleUser","query","selectedPermission","SearchForm","onFilter","onFilterChange","onSearch","onQueryChange","loadMore","onLoadMore","applyTemplateModal","handleApplyTemplate","handleApplyTemplateClose","configuration","canApplyPermissionTemplate","description","visibilityDescription","ApplyTemplate","loadHolders","PublicProjectDisclaimer","onConfirm","confirmButtonText","Alert","stopLoading","loadUsersAndGroups","userPage","groupsPage","getUsers","q","resolve","paging","getGroups","all","usersResponse","groupsResponse","pageIndex","handleFilterChange","handleQueryChange","handlePermissionSelect","addPermissionToGroup","candidate","addPermissionToUser","removePermissionFromGroup","removePermissionFromUser","groupName","onComponentChange","canUpdateProjectVisibilityToPrivate","fetchOrganization","handleVisibilityChange","openDisclaimer","turnProjectToPrivate","turnProjectToPublic","disclaimer","closeDisclaimer","showUpgradeBox","actions","admin","canUpdateProjectsVisibilityToPrivate","defer","VisibilitySelector","UpgradeOrganizationBox","mapDispatchToProps","currentUser","extendStatics","__extends","b","setPrototypeOf","__proto__","Array","__","constructor","create","l10n_1","DeferredSpinner_1","buttons_1","ClickEventBoundary_1","SimpleModal_1","ConfirmModal","_super","_this","result","confirmData","renderModalContent","_b","confirmDisable","headerDescription","isDestructive","_c","cancelButtonText","translate","SubmitButton","autoFocus","ResetButtonLink","modalProps","PureComponent","classNames","Tooltip_1","RadioToggle","renderOption","option","htmlId","toString","type","overlay","tooltip","defaultProps","api","content","__esModule","module","exported","locals","___CSS_LOADER_API_IMPORT___","push","librariesExposed","installScript","url","scriptTag","document","src","onload","getElementsByTagName","appendChild","getExtensionStart","fromCache","exposeLibraries","start","getAlmMembersUrl","endsWith","isGithub","getUserAlmKey","externalProvider","sanitizeAlmId","hasAdvancedALMIntegration","isBitbucket","startsWith","isVSTS","partition","createAggregator"],"mappings":"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","file":"js/316.1593679646964.chunk.js","sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = require(\"react\");\nvar Icon_1 = require(\"./Icon\");\nfunction GroupIcon(_a) {\n    var fill = _a.fill, _b = _a.size, size = _b === void 0 ? 36 : _b, iconProps = __rest(_a, [\"fill\", \"size\"]);\n    return (React.createElement(Icon_1.ThemedIcon, __assign({ viewBox: \"0 0 36 36\" }, iconProps), function (_a) {\n        var theme = _a.theme;\n        return (React.createElement(\"g\", { transform: \"matrix(0.0625,0,0,0.0625,3,4)\" },\n            React.createElement(\"path\", { d: \"M148.25,224C121.25,224.833 99.167,235.5 82,256L48.5,256C34.833,256 23.333,252.625 14,245.875C4.667,239.125 0,229.25 0,216.25C0,157.417 10.333,128 31,128C32,128 35.625,129.75 41.875,133.25C48.125,136.75 56.25,140.292 66.25,143.875C76.25,147.458 86.167,149.25 96,149.25C107.167,149.25 118.25,147.333 129.25,143.5C128.417,149.667 128,155.167 128,160C128,183.167 134.75,204.5 148.25,224ZM416,383.25C416,403.25 409.917,419.042 397.75,430.625C385.583,442.208 369.417,448 349.25,448L130.75,448C110.583,448 94.417,442.208 82.25,430.625C70.083,419.042 64,403.25 64,383.25C64,374.417 64.292,365.792 64.875,357.375C65.458,348.958 66.625,339.875 68.375,330.125C70.125,320.375 72.333,311.333 75,303C77.667,294.667 81.25,286.542 85.75,278.625C90.25,270.708 95.417,263.958 101.25,258.375C107.083,252.792 114.208,248.333 122.625,245C131.042,241.667 140.333,240 150.5,240C152.167,240 155.75,241.792 161.25,245.375C166.75,248.958 172.833,252.958 179.5,257.375C186.167,261.792 195.083,265.792 206.25,269.375C217.417,272.958 228.667,274.75 240,274.75C251.333,274.75 262.583,272.958 273.75,269.375C284.917,265.792 293.833,261.792 300.5,257.375C307.167,252.958 313.25,248.958 318.75,245.375C324.25,241.792 327.833,240 329.5,240C339.667,240 348.958,241.667 357.375,245C365.792,248.333 372.917,252.792 378.75,258.375C384.583,263.958 389.75,270.708 394.25,278.625C398.75,286.542 402.333,294.667 405,303C407.667,311.333 409.875,320.375 411.625,330.125C413.375,339.875 414.542,348.958 415.125,357.375C415.708,365.792 416,374.417 416,383.25ZM160,64C160,81.667 153.75,96.75 141.25,109.25C128.75,121.75 113.667,128 96,128C78.333,128 63.25,121.75 50.75,109.25C38.25,96.75 32,81.667 32,64C32,46.333 38.25,31.25 50.75,18.75C63.25,6.25 78.333,0 96,0C113.667,0 128.75,6.25 141.25,18.75C153.75,31.25 160,46.333 160,64ZM336,160C336,186.5 326.625,209.125 307.875,227.875C289.125,246.625 266.5,256 240,256C213.5,256 190.875,246.625 172.125,227.875C153.375,209.125 144,186.5 144,160C144,133.5 153.375,110.875 172.125,92.125C190.875,73.375 213.5,64 240,64C266.5,64 289.125,73.375 307.875,92.125C326.625,110.875 336,133.5 336,160ZM480,216.25C480,229.25 475.333,239.125 466,245.875C456.667,252.625 445.167,256 431.5,256L398,256C380.833,235.5 358.75,224.833 331.75,224C345.25,204.5 352,183.167 352,160C352,155.167 351.583,149.667 350.75,143.5C361.75,147.333 372.833,149.25 384,149.25C393.833,149.25 403.75,147.458 413.75,143.875C423.75,140.292 431.875,136.75 438.125,133.25C444.375,129.75 448,128 449,128C469.667,128 480,157.417 480,216.25ZM448,64C448,81.667 441.75,96.75 429.25,109.25C416.75,121.75 401.667,128 384,128C366.333,128 351.25,121.75 338.75,109.25C326.25,96.75 320,81.667 320,64C320,46.333 326.25,31.25 338.75,18.75C351.25,6.25 366.333,0 384,0C401.667,0 416.75,6.25 429.25,18.75C441.75,31.25 448,46.333 448,64Z\", style: { fill: fill || theme.colors.gray67 } })));\n    }));\n}\nexports.default = GroupIcon;\n//# sourceMappingURL=GroupIcon.js.map","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { memoize } from 'lodash';\nimport { translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { cleanQuery, parseAsOptionalString, serializeString } from 'sonar-ui-common/helpers/query';\nimport { decodeJwt } from 'sonar-ui-common/helpers/strings';\nimport { isBitbucket, isGithub } from '../../../helpers/almIntegrations';\n\nexport const ORGANIZATION_IMPORT_BINDING_IN_PROGRESS_TIMESTAMP =\n  'sonarcloud.import_org.binding_in_progress';\n\nexport const ORGANIZATION_IMPORT_REDIRECT_TO_PROJECT_TIMESTAMP =\n  'sonarcloud.import_org.redirect_to_projects';\n\nexport const BIND_ORGANIZATION_KEY = 'sonarcloud.bind_org.key';\n\nexport const BIND_ORGANIZATION_REDIRECT_TO_ORG_TIMESTAMP = 'sonarcloud.bind_org.redirect_to_org';\n\nexport enum Step {\n  OrganizationDetails,\n  Plan\n}\n\nexport function formatPrice(price?: number, noSign?: boolean) {\n  const priceFormatted = formatMeasure(price, 'FLOAT')\n    .replace(/[.|,]0$/, '')\n    .replace(/([.|,]\\d)$/, '$10');\n  return noSign ? priceFormatted : translateWithParameters('billing.price_format', priceFormatted);\n}\n\nexport interface Query {\n  almInstallId?: string;\n  almKey?: string;\n}\n\nexport const parseQuery = memoize(\n  (urlQuery: T.RawQuery = {}): Query => {\n    let almInstallId = undefined;\n    let almKey = undefined;\n\n    if (urlQuery['installation_id']) {\n      almKey = 'github';\n      almInstallId = parseAsOptionalString(urlQuery['installation_id']);\n    } else if (urlQuery['clientKey']) {\n      almKey = 'bitbucket';\n      almInstallId = parseAsOptionalString(urlQuery['clientKey']);\n    } else if (urlQuery['jwt']) {\n      const jwt = decodeJwt(urlQuery['jwt']);\n      if (jwt && jwt.iss) {\n        almKey = 'bitbucket';\n        almInstallId = jwt.iss;\n      }\n    }\n    return { almInstallId, almKey };\n  }\n);\n\nexport const serializeQuery = (query: Query): T.RawQuery =>\n  cleanQuery({\n    installation_id: isGithub(query.almKey) ? serializeString(query.almInstallId) : undefined,\n    clientKey: isBitbucket(query.almKey) ? serializeString(query.almInstallId) : undefined\n  });\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport Radio from 'sonar-ui-common/components/controls/Radio';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  canTurnToPrivate?: boolean;\n  className?: string;\n  onChange: (visibility: T.Visibility) => void;\n  showDetails?: boolean;\n  visibility?: T.Visibility;\n}\n\nexport default class VisibilitySelector extends React.PureComponent<Props> {\n  render() {\n    return (\n      <div className={classNames(this.props.className)}>\n        {['public', 'private'].map(visibility => (\n          <Radio\n            className={`huge-spacer-right visibility-${visibility}`}\n            key={visibility}\n            value={visibility}\n            checked={this.props.visibility === visibility}\n            onCheck={this.props.onChange}\n            disabled={visibility === 'private' && !this.props.canTurnToPrivate}>\n            <div>\n              {translate('visibility', visibility)}\n              {this.props.showDetails && (\n                <p className=\"note\">{translate('visibility', visibility, 'description.long')}</p>\n              )}\n            </div>\n          </Radio>\n        ))}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ResetButtonLink, SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport Select from 'sonar-ui-common/components/controls/Select';\nimport SimpleModal from 'sonar-ui-common/components/controls/SimpleModal';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { applyTemplateToProject, getPermissionTemplates } from '../../../../api/permissions';\n\ninterface Props {\n  onApply?: () => void;\n  onClose: () => void;\n  organization: string | undefined;\n  project: { key: string; name: string };\n}\n\ninterface State {\n  done: boolean;\n  loading: boolean;\n  permissionTemplate?: string;\n  permissionTemplates?: T.PermissionTemplate[];\n}\n\nexport default class ApplyTemplate extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { done: false, loading: true };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchPermissionTemplates();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchPermissionTemplates = () => {\n    getPermissionTemplates(this.props.organization).then(\n      ({ permissionTemplates }) => {\n        if (this.mounted) {\n          this.setState({ loading: false, permissionTemplates });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  handleSubmit = () => {\n    if (this.state.permissionTemplate) {\n      return applyTemplateToProject({\n        organization: this.props.organization,\n        projectKey: this.props.project.key,\n        templateId: this.state.permissionTemplate\n      }).then(() => {\n        if (this.mounted) {\n          if (this.props.onApply) {\n            this.props.onApply();\n          }\n          this.setState({ done: true });\n        }\n      });\n    } else {\n      return Promise.reject(undefined);\n    }\n  };\n\n  handlePermissionTemplateChange = ({ value }: { value: string }) => {\n    this.setState({ permissionTemplate: value });\n  };\n\n  render() {\n    const header = translateWithParameters(\n      'projects_role.apply_template_to_xxx',\n      this.props.project.name\n    );\n\n    return (\n      <SimpleModal\n        header={header}\n        onClose={this.props.onClose}\n        onSubmit={this.handleSubmit}\n        size=\"small\">\n        {({ onCloseClick, onFormSubmit, submitting }) => (\n          <form id=\"project-permissions-apply-template-form\" onSubmit={onFormSubmit}>\n            <header className=\"modal-head\">\n              <h2>{header}</h2>\n            </header>\n\n            <div className=\"modal-body\">\n              {this.state.done ? (\n                <Alert variant=\"success\">{translate('projects_role.apply_template.success')}</Alert>\n              ) : (\n                <>\n                  {this.state.loading ? (\n                    <i className=\"spinner\" />\n                  ) : (\n                    <div className=\"modal-field\">\n                      <label htmlFor=\"project-permissions-template\">\n                        {translate('template')}\n                        <em className=\"mandatory\">*</em>\n                      </label>\n                      {this.state.permissionTemplates && (\n                        <Select\n                          clearable={false}\n                          id=\"project-permissions-template\"\n                          onChange={this.handlePermissionTemplateChange}\n                          options={this.state.permissionTemplates.map(permissionTemplate => ({\n                            label: permissionTemplate.name,\n                            value: permissionTemplate.id\n                          }))}\n                          value={this.state.permissionTemplate}\n                        />\n                      )}\n                    </div>\n                  )}\n                </>\n              )}\n            </div>\n\n            <footer className=\"modal-foot\">\n              <DeferredSpinner className=\"spacer-right\" loading={submitting} />\n              {!this.state.done && (\n                <SubmitButton disabled={submitting || !this.state.permissionTemplate}>\n                  {translate('apply')}\n                </SubmitButton>\n              )}\n              <ResetButtonLink onClick={onCloseClick}>\n                {translate(this.state.done ? 'close' : 'cancel')}\n              </ResetButtonLink>\n            </footer>\n          </form>\n        )}\n      </SimpleModal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\n\nexport function getSubscriptionPlans(): Promise<T.SubscriptionPlan[]> {\n  return getJSON('/api/billing/show_subscription_plans').then(\n    ({ subscriptionPlans }) => subscriptionPlans,\n    throwGlobalError\n  );\n}\n\nexport function giveDowngradeFeedback(data: {\n  organization: string;\n  feedback: string;\n  additionalFeedback?: string;\n}): Promise<void> {\n  return post('/api/billing/send_feedback', data);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport CheckIcon from 'sonar-ui-common/components/icons/CheckIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { colors } from '../../../app/theme';\n\nconst TRIAL_DURATION_DAYS = 14;\n\nexport default function UpgradeOrganizationAdvantages() {\n  return (\n    <ul className=\"note\">\n      <Advantage>{translate('billing.upgrade_box.unlimited_private_projects')}</Advantage>\n      <Advantage>{translate('billing.upgrade_box.strict_control_private_data')}</Advantage>\n      <Advantage>{translate('billing.upgrade_box.cancel_anytime')}</Advantage>\n      <Advantage>\n        <strong>\n          {translateWithParameters('billing.upgrade_box.free_trial_x', TRIAL_DURATION_DAYS)}\n        </strong>\n      </Advantage>\n    </ul>\n  );\n}\n\nexport function Advantage({ children }: { children: React.ReactNode }) {\n  return (\n    <li className=\"display-flex-center little-spacer-bottom\">\n      <CheckIcon className=\"spacer-right\" fill={colors.lightGreen} />\n      {children}\n    </li>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\n\ninterface ChildrenProps {\n  onSubmit: React.FormEventHandler;\n  processingUpgrade: boolean;\n  renderFormFields: () => React.ReactNode;\n  renderNextCharge: (className?: string) => React.ReactNode;\n  renderRecap: () => React.ReactNode;\n  renderSubmitButton: (submitText?: string) => React.ReactNode;\n  renderSubmitGroup: (submitText?: string) => React.ReactNode;\n}\n\ninterface Props {\n  children: (props: ChildrenProps) => React.ReactNode;\n  initialCountry?: string;\n  currentUser: T.CurrentUser;\n  onCommit: () => void | Promise<void>;\n  onFailToUpgrade?: () => void;\n  organizationKey: string | (() => Promise<string>);\n  subscriptionPlans: T.SubscriptionPlan[];\n}\n\nexport default class BillingFormShim extends React.Component<Props> {\n  render() {\n    const { BillingForm } = (window as any).SonarBilling;\n    return <BillingForm {...this.props} />;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { ResetButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { withCurrentUser } from '../../../components/hoc/withCurrentUser';\nimport { getExtensionStart } from '../../../helpers/extensions';\nimport BillingFormShim from './BillingFormShim';\nimport UpgradeOrganizationAdvantages from './UpgradeOrganizationAdvantages';\n\nconst BillingForm = withCurrentUser(BillingFormShim);\n\ninterface Props {\n  insideModal?: boolean;\n  onUpgradeDone: () => void;\n  onClose: () => void;\n  organization: T.Organization;\n  subscriptionPlans: T.SubscriptionPlan[];\n}\n\ninterface State {\n  ready: boolean;\n}\n\nexport default class UpgradeOrganizationModal extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { ready: false };\n\n  componentDidMount() {\n    this.mounted = true;\n    getExtensionStart('billing/billing').then(\n      () => {\n        if (this.mounted) {\n          this.setState({ ready: true });\n        }\n      },\n      () => {}\n    );\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  render() {\n    const header = translate('billing.upgrade_box.upgrade_to_paid_plan');\n\n    if (!this.state.ready) {\n      return null;\n    }\n\n    return (\n      <Modal\n        contentLabel={header}\n        noBackdrop={this.props.insideModal}\n        onRequestClose={this.props.onClose}\n        shouldCloseOnOverlayClick={false}\n        size=\"medium\">\n        <div className=\"modal-head\">\n          <h2>{header}</h2>\n        </div>\n        <BillingForm\n          onCommit={this.props.onUpgradeDone}\n          organizationKey={this.props.organization.key}\n          subscriptionPlans={this.props.subscriptionPlans}>\n          {({\n            onSubmit,\n            processingUpgrade,\n            renderFormFields,\n            renderNextCharge,\n            renderRecap,\n            renderSubmitButton\n          }) => (\n            <form id=\"organization-paid-plan-form\" onSubmit={onSubmit}>\n              <div className=\"modal-body modal-container\">\n                <div className=\"huge-spacer-bottom\">\n                  <p className=\"spacer-bottom\">\n                    <FormattedMessage\n                      defaultMessage={translate('billing.upgrade.org_x_advantages')}\n                      id=\"billing.coupon.description\"\n                      values={{\n                        org: <strong>{this.props.organization.name}</strong>\n                      }}\n                    />\n                  </p>\n                  <UpgradeOrganizationAdvantages />\n                </div>\n                {renderFormFields()}\n                <div className=\"big-spacer-top\">{renderRecap()}</div>\n              </div>\n              <footer className=\"modal-foot display-flex-center display-flex-space-between\">\n                {renderNextCharge() || <span />}\n                <div>\n                  <DeferredSpinner loading={processingUpgrade} />\n                  {renderSubmitButton()}\n                  <ResetButtonLink onClick={this.props.onClose}>\n                    {translate('cancel')}\n                  </ResetButtonLink>\n                </div>\n              </footer>\n            </form>\n          )}\n        </BillingForm>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { Link } from 'react-router';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport RadioCard from 'sonar-ui-common/components/controls/RadioCard';\nimport { hasMessage, translate } from 'sonar-ui-common/helpers/l10n';\nimport { getSubscriptionPlans } from '../../../api/billing';\nimport { formatPrice } from '../organization/utils';\nimport UpgradeOrganizationAdvantages from './UpgradeOrganizationAdvantages';\nimport UpgradeOrganizationModal from './UpgradeOrganizationModal';\n\ninterface Props {\n  className?: string;\n  insideModal?: boolean;\n  onOrganizationUpgrade: () => void;\n  organization: T.Organization;\n}\n\ninterface State {\n  subscriptionPlans: T.SubscriptionPlan[];\n  upgradeOrganizationModal: boolean;\n}\n\nexport default class UpgradeOrganizationBox extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { subscriptionPlans: [], upgradeOrganizationModal: false };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchSubscriptionPlans();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchSubscriptionPlans = () => {\n    return getSubscriptionPlans().then(subscriptionPlans => {\n      if (this.mounted) {\n        this.setState({ subscriptionPlans });\n      }\n    });\n  };\n\n  handleUpgradeClick = () => {\n    this.setState({ upgradeOrganizationModal: true });\n  };\n\n  handleUpgradeOrganizationModalClose = () => {\n    if (this.mounted) {\n      this.setState({ upgradeOrganizationModal: false });\n    }\n  };\n\n  handleOrganizationUpgrade = () => {\n    this.props.onOrganizationUpgrade();\n    this.handleUpgradeOrganizationModalClose();\n  };\n\n  render() {\n    if (!hasMessage('billing.upgrade_box.header')) {\n      return null;\n    }\n\n    const { subscriptionPlans, upgradeOrganizationModal } = this.state;\n    const startingPrice = subscriptionPlans[0] && subscriptionPlans[0].price;\n\n    return (\n      <>\n        <RadioCard\n          className={this.props.className}\n          title={translate('billing.upgrade_box.header')}\n          titleInfo={\n            startingPrice !== undefined && (\n              <FormattedMessage\n                defaultMessage={translate('billing.price_from_x')}\n                id=\"billing.price_from_x\"\n                values={{\n                  price: <span className=\"big\">{formatPrice(startingPrice)}</span>\n                }}\n              />\n            )\n          }>\n          <>\n            <UpgradeOrganizationAdvantages />\n            <div className=\"big-spacer-left\">\n              <Button className=\"js-upgrade-organization\" onClick={this.handleUpgradeClick}>\n                {translate('billing.paid_plan.upgrade')}\n              </Button>\n              <Link className=\"spacer-left\" target=\"_blank\" to=\"/about/pricing\">\n                {translate('billing.pricing.learn_more')}\n              </Link>\n            </div>\n          </>\n        </RadioCard>\n        {upgradeOrganizationModal && (\n          <UpgradeOrganizationModal\n            insideModal={this.props.insideModal}\n            onClose={this.handleUpgradeOrganizationModalClose}\n            onUpgradeDone={this.handleOrganizationUpgrade}\n            organization={this.props.organization}\n            subscriptionPlans={subscriptionPlans}\n          />\n        )}\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { without } from 'lodash';\nimport * as React from 'react';\nimport ListFooter from 'sonar-ui-common/components/controls/ListFooter';\nimport HoldersList from '../../shared/components/HoldersList';\nimport SearchForm from '../../shared/components/SearchForm';\nimport { convertToPermissionDefinitions, PERMISSIONS_ORDER_BY_QUALIFIER } from '../../utils';\n\ninterface Props {\n  component: T.Component;\n  filter: string;\n  grantPermissionToGroup: (group: string, permission: string) => Promise<void>;\n  grantPermissionToUser: (user: string, permission: string) => Promise<void>;\n  groups: T.PermissionGroup[];\n  groupsPaging?: T.Paging;\n  onLoadMore: () => void;\n  onFilterChange: (filter: string) => void;\n  onPermissionSelect: (permissions?: string) => void;\n  onQueryChange: (query: string) => void;\n  query: string;\n  revokePermissionFromGroup: (group: string, permission: string) => Promise<void>;\n  revokePermissionFromUser: (user: string, permission: string) => Promise<void>;\n  selectedPermission?: string;\n  users: T.PermissionUser[];\n  usersPaging?: T.Paging;\n  visibility?: T.Visibility;\n}\n\nexport default class AllHoldersList extends React.PureComponent<Props> {\n  handleToggleUser = (user: T.PermissionUser, permission: string) => {\n    const hasPermission = user.permissions.includes(permission);\n\n    if (hasPermission) {\n      return this.props.revokePermissionFromUser(user.login, permission);\n    } else {\n      return this.props.grantPermissionToUser(user.login, permission);\n    }\n  };\n\n  handleToggleGroup = (group: T.PermissionGroup, permission: string) => {\n    const hasPermission = group.permissions.includes(permission);\n\n    if (hasPermission) {\n      return this.props.revokePermissionFromGroup(group.name, permission);\n    } else {\n      return this.props.grantPermissionToGroup(group.name, permission);\n    }\n  };\n\n  handleSelectPermission = (permission?: string) => {\n    this.props.onPermissionSelect(permission);\n  };\n\n  render() {\n    const { filter, groups, groupsPaging, users, usersPaging } = this.props;\n    let order = PERMISSIONS_ORDER_BY_QUALIFIER[this.props.component.qualifier];\n    if (this.props.visibility === 'public') {\n      order = without(order, 'user', 'codeviewer');\n    }\n    const permissions = convertToPermissionDefinitions(order, 'projects_role');\n\n    let count = 0;\n    let total = 0;\n    if (filter !== 'users') {\n      count += groups.length;\n      total += groupsPaging ? groupsPaging.total : groups.length;\n    }\n    if (filter !== 'groups') {\n      count += users.length;\n      total += usersPaging ? usersPaging.total : users.length;\n    }\n\n    return (\n      <>\n        <HoldersList\n          filter={this.props.filter}\n          groups={this.props.groups}\n          onSelectPermission={this.handleSelectPermission}\n          onToggleGroup={this.handleToggleGroup}\n          onToggleUser={this.handleToggleUser}\n          permissions={permissions}\n          query={this.props.query}\n          selectedPermission={this.props.selectedPermission}\n          users={this.props.users}>\n          <SearchForm\n            filter={this.props.filter}\n            onFilter={this.props.onFilterChange}\n            onSearch={this.props.onQueryChange}\n            query={this.props.query}\n          />\n        </HoldersList>\n        <ListFooter count={count} loadMore={this.props.onLoadMore} total={total} />\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport ApplyTemplate from './ApplyTemplate';\n\ninterface Props {\n  component: T.Component;\n  loadHolders: () => void;\n  loading: boolean;\n}\n\ninterface State {\n  applyTemplateModal: boolean;\n}\n\nexport default class PageHeader extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { applyTemplateModal: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleApplyTemplate = () => {\n    this.setState({ applyTemplateModal: true });\n  };\n\n  handleApplyTemplateClose = () => {\n    if (this.mounted) {\n      this.setState({ applyTemplateModal: false });\n    }\n  };\n\n  render() {\n    const { component } = this.props;\n    const { configuration } = component;\n    const canApplyPermissionTemplate =\n      configuration != null && configuration.canApplyPermissionTemplate;\n\n    const description = ['VW', 'SVW', 'APP'].includes(component.qualifier)\n      ? translate('roles.page.description_portfolio')\n      : translate('roles.page.description2');\n\n    const visibilityDescription =\n      component.qualifier === 'TRK' && component.visibility\n        ? translate('visibility', component.visibility, 'description', component.qualifier)\n        : undefined;\n\n    return (\n      <header className=\"page-header\">\n        <h1 className=\"page-title\">{translate('permissions.page')}</h1>\n\n        {this.props.loading && <i className=\"spinner\" />}\n\n        {canApplyPermissionTemplate && (\n          <div className=\"page-actions\">\n            <Button className=\"js-apply-template\" onClick={this.handleApplyTemplate}>\n              {translate('projects_role.apply_template')}\n            </Button>\n\n            {this.state.applyTemplateModal && (\n              <ApplyTemplate\n                onApply={this.props.loadHolders}\n                onClose={this.handleApplyTemplateClose}\n                organization={component.organization}\n                project={component}\n              />\n            )}\n          </div>\n        )}\n\n        <div className=\"page-description\">\n          <p>{description}</p>\n          {visibilityDescription && <p>{visibilityDescription}</p>}\n        </div>\n      </header>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ConfirmModal from 'sonar-ui-common/components/controls/ConfirmModal';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  component: {\n    name: string;\n    qualifier: string;\n  };\n  onClose: () => void;\n  onConfirm: () => void;\n}\n\nexport default function PublicProjectDisclaimer({ component, onClose, onConfirm }: Props) {\n  const { qualifier } = component;\n  return (\n    <ConfirmModal\n      confirmButtonText={translate('projects_role.turn_project_to_public', qualifier)}\n      header={translateWithParameters('projects_role.turn_x_to_public', component.name)}\n      onClose={onClose}\n      onConfirm={onConfirm}>\n      <Alert variant=\"warning\">\n        {translate('projects_role.are_you_sure_to_turn_project_to_public.warning', qualifier)}\n      </Alert>\n      <p>{translate('projects_role.are_you_sure_to_turn_project_to_public', qualifier)}</p>\n    </ConfirmModal>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { without } from 'lodash';\nimport * as React from 'react';\nimport { Helmet } from 'react-helmet-async';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport * as api from '../../../../api/permissions';\nimport VisibilitySelector from '../../../../components/common/VisibilitySelector';\nimport UpgradeOrganizationBox from '../../../create/components/UpgradeOrganizationBox';\nimport '../../styles.css';\nimport AllHoldersList from './AllHoldersList';\nimport PageHeader from './PageHeader';\nimport PublicProjectDisclaimer from './PublicProjectDisclaimer';\n\ninterface Props {\n  component: T.Component;\n  fetchOrganization: (organization: string) => void;\n  onComponentChange: (changes: Partial<T.Component>) => void;\n  organization?: T.Organization;\n}\n\ninterface State {\n  disclaimer: boolean;\n  filter: string;\n  groups: T.PermissionGroup[];\n  groupsPaging?: T.Paging;\n  loading: boolean;\n  query: string;\n  selectedPermission?: string;\n  users: T.PermissionUser[];\n  usersPaging?: T.Paging;\n}\n\nexport default class App extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      disclaimer: false,\n      filter: 'all',\n      groups: [],\n      loading: true,\n      query: '',\n      users: []\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.loadHolders();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  stopLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  loadUsersAndGroups = (userPage?: number, groupsPage?: number) => {\n    const { component } = this.props;\n    const { filter, query, selectedPermission } = this.state;\n\n    const getUsers: Promise<{ paging?: T.Paging; users: T.PermissionUser[] }> =\n      filter !== 'groups'\n        ? api.getPermissionsUsersForComponent({\n            projectKey: component.key,\n            q: query || undefined,\n            permission: selectedPermission,\n            organization: component.organization,\n            p: userPage\n          })\n        : Promise.resolve({ paging: undefined, users: [] });\n\n    const getGroups: Promise<{ paging?: T.Paging; groups: T.PermissionGroup[] }> =\n      filter !== 'users'\n        ? api.getPermissionsGroupsForComponent({\n            projectKey: component.key,\n            q: query || undefined,\n            permission: selectedPermission,\n            organization: component.organization,\n            p: groupsPage\n          })\n        : Promise.resolve({ paging: undefined, groups: [] });\n\n    return Promise.all([getUsers, getGroups]);\n  };\n\n  loadHolders = () => {\n    this.setState({ loading: true });\n    return this.loadUsersAndGroups().then(([usersResponse, groupsResponse]) => {\n      if (this.mounted) {\n        this.setState({\n          groups: groupsResponse.groups,\n          groupsPaging: groupsResponse.paging,\n          loading: false,\n          users: usersResponse.users,\n          usersPaging: usersResponse.paging\n        });\n      }\n    }, this.stopLoading);\n  };\n\n  onLoadMore = () => {\n    const { usersPaging, groupsPaging } = this.state;\n    this.setState({ loading: true });\n    return this.loadUsersAndGroups(\n      usersPaging ? usersPaging.pageIndex + 1 : 1,\n      groupsPaging ? groupsPaging.pageIndex + 1 : 1\n    ).then(([usersResponse, groupsResponse]) => {\n      if (this.mounted) {\n        this.setState(({ groups, users }) => ({\n          groups: [...groups, ...groupsResponse.groups],\n          groupsPaging: groupsResponse.paging,\n          loading: false,\n          users: [...users, ...usersResponse.users],\n          usersPaging: usersResponse.paging\n        }));\n      }\n    }, this.stopLoading);\n  };\n\n  handleFilterChange = (filter: string) => {\n    if (this.mounted) {\n      this.setState({ filter }, this.loadHolders);\n    }\n  };\n\n  handleQueryChange = (query: string) => {\n    if (this.mounted) {\n      this.setState({ query }, this.loadHolders);\n    }\n  };\n\n  handlePermissionSelect = (selectedPermission?: string) => {\n    if (this.mounted) {\n      this.setState(\n        (state: State) => ({\n          selectedPermission:\n            state.selectedPermission === selectedPermission ? undefined : selectedPermission\n        }),\n        this.loadHolders\n      );\n    }\n  };\n\n  addPermissionToGroup = (group: string, permission: string) => {\n    return this.state.groups.map(candidate =>\n      candidate.name === group\n        ? { ...candidate, permissions: [...candidate.permissions, permission] }\n        : candidate\n    );\n  };\n\n  addPermissionToUser = (user: string, permission: string) => {\n    return this.state.users.map(candidate =>\n      candidate.login === user\n        ? { ...candidate, permissions: [...candidate.permissions, permission] }\n        : candidate\n    );\n  };\n\n  removePermissionFromGroup = (group: string, permission: string) => {\n    return this.state.groups.map(candidate =>\n      candidate.name === group\n        ? { ...candidate, permissions: without(candidate.permissions, permission) }\n        : candidate\n    );\n  };\n\n  removePermissionFromUser = (user: string, permission: string) => {\n    return this.state.users.map(candidate =>\n      candidate.login === user\n        ? { ...candidate, permissions: without(candidate.permissions, permission) }\n        : candidate\n    );\n  };\n\n  grantPermissionToGroup = (group: string, permission: string) => {\n    if (this.mounted) {\n      this.setState({\n        loading: true,\n        groups: this.addPermissionToGroup(group, permission)\n      });\n      return api\n        .grantPermissionToGroup({\n          projectKey: this.props.component.key,\n          groupName: group,\n          permission,\n          organization: this.props.component.organization\n        })\n        .then(this.stopLoading, () => {\n          if (this.mounted) {\n            this.setState({\n              loading: false,\n              groups: this.removePermissionFromGroup(group, permission)\n            });\n          }\n        });\n    }\n    return Promise.resolve();\n  };\n\n  grantPermissionToUser = (user: string, permission: string) => {\n    if (this.mounted) {\n      this.setState({\n        loading: true,\n        users: this.addPermissionToUser(user, permission)\n      });\n      return api\n        .grantPermissionToUser({\n          projectKey: this.props.component.key,\n          login: user,\n          permission,\n          organization: this.props.component.organization\n        })\n        .then(this.stopLoading, () => {\n          if (this.mounted) {\n            this.setState({\n              loading: false,\n              users: this.removePermissionFromUser(user, permission)\n            });\n          }\n        });\n    }\n    return Promise.resolve();\n  };\n\n  revokePermissionFromGroup = (group: string, permission: string) => {\n    if (this.mounted) {\n      this.setState({\n        loading: true,\n        groups: this.removePermissionFromGroup(group, permission)\n      });\n      return api\n        .revokePermissionFromGroup({\n          projectKey: this.props.component.key,\n          groupName: group,\n          permission,\n          organization: this.props.component.organization\n        })\n        .then(this.stopLoading, () => {\n          if (this.mounted) {\n            this.setState({\n              loading: false,\n              groups: this.addPermissionToGroup(group, permission)\n            });\n          }\n        });\n    }\n    return Promise.resolve();\n  };\n\n  revokePermissionFromUser = (user: string, permission: string) => {\n    if (this.mounted) {\n      this.setState({\n        loading: true,\n        users: this.removePermissionFromUser(user, permission)\n      });\n      return api\n        .revokePermissionFromUser({\n          projectKey: this.props.component.key,\n          login: user,\n          permission,\n          organization: this.props.component.organization\n        })\n        .then(this.stopLoading, () => {\n          if (this.mounted) {\n            this.setState({\n              loading: false,\n              users: this.addPermissionToUser(user, permission)\n            });\n          }\n        });\n    }\n    return Promise.resolve();\n  };\n\n  handleOrganizationUpgrade = () => {\n    const { component, organization } = this.props;\n    if (organization) {\n      this.props.onComponentChange({\n        configuration: { ...component.configuration, canUpdateProjectVisibilityToPrivate: true }\n      });\n      this.props.fetchOrganization(organization.key);\n    }\n  };\n\n  handleVisibilityChange = (visibility: string) => {\n    if (visibility === 'public') {\n      this.openDisclaimer();\n    } else {\n      this.turnProjectToPrivate();\n    }\n  };\n\n  turnProjectToPublic = () => {\n    this.props.onComponentChange({ visibility: 'public' });\n    api.changeProjectVisibility(this.props.component.key, 'public').then(\n      () => {\n        this.loadHolders();\n      },\n      () => {\n        this.props.onComponentChange({\n          visibility: 'private'\n        });\n      }\n    );\n  };\n\n  turnProjectToPrivate = () => {\n    this.props.onComponentChange({ visibility: 'private' });\n    api.changeProjectVisibility(this.props.component.key, 'private').then(\n      () => {\n        this.loadHolders();\n      },\n      () => {\n        this.props.onComponentChange({\n          visibility: 'public'\n        });\n      }\n    );\n  };\n\n  openDisclaimer = () => {\n    if (this.mounted) {\n      this.setState({ disclaimer: true });\n    }\n  };\n\n  closeDisclaimer = () => {\n    if (this.mounted) {\n      this.setState({ disclaimer: false });\n    }\n  };\n\n  render() {\n    const { component, organization } = this.props;\n    const canTurnToPrivate =\n      component.configuration && component.configuration.canUpdateProjectVisibilityToPrivate;\n\n    let showUpgradeBox;\n    if (organization && !canTurnToPrivate) {\n      const isOrgAdmin = organization.actions && organization.actions.admin;\n      showUpgradeBox =\n        isOrgAdmin &&\n        this.props.component.qualifier === 'TRK' &&\n        !organization.canUpdateProjectsVisibilityToPrivate;\n    }\n\n    return (\n      <div className=\"page page-limited\" id=\"project-permissions-page\">\n        <Helmet defer={false} title={translate('permissions.page')} />\n\n        <PageHeader\n          component={component}\n          loadHolders={this.loadHolders}\n          loading={this.state.loading}\n        />\n        <div>\n          <VisibilitySelector\n            canTurnToPrivate={canTurnToPrivate}\n            className=\"big-spacer-top big-spacer-bottom\"\n            onChange={this.handleVisibilityChange}\n            visibility={component.visibility}\n          />\n          {showUpgradeBox && organization && (\n            <UpgradeOrganizationBox\n              className=\"big-spacer-bottom\"\n              onOrganizationUpgrade={this.handleOrganizationUpgrade}\n              organization={organization}\n            />\n          )}\n          {this.state.disclaimer && (\n            <PublicProjectDisclaimer\n              component={component}\n              onClose={this.closeDisclaimer}\n              onConfirm={this.turnProjectToPublic}\n            />\n          )}\n        </div>\n        <AllHoldersList\n          component={component}\n          filter={this.state.filter}\n          grantPermissionToGroup={this.grantPermissionToGroup}\n          grantPermissionToUser={this.grantPermissionToUser}\n          groups={this.state.groups}\n          groupsPaging={this.state.groupsPaging}\n          onFilterChange={this.handleFilterChange}\n          onLoadMore={this.onLoadMore}\n          onPermissionSelect={this.handlePermissionSelect}\n          onQueryChange={this.handleQueryChange}\n          query={this.state.query}\n          revokePermissionFromGroup={this.revokePermissionFromGroup}\n          revokePermissionFromUser={this.revokePermissionFromUser}\n          selectedPermission={this.state.selectedPermission}\n          users={this.state.users}\n          usersPaging={this.state.usersPaging}\n          visibility={component.visibility}\n        />\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { connect } from 'react-redux';\nimport { fetchOrganization } from '../../../../store/rootActions';\nimport { getCurrentUser, getOrganizationByKey, Store } from '../../../../store/rootReducer';\nimport App from './App';\n\ninterface OwnProps {\n  component: T.Component;\n  onComponentChange: (changes: Partial<T.Component>) => void;\n}\n\nconst mapStateToProps = (state: Store, { component }: OwnProps) => ({\n  currentUser: getCurrentUser(state),\n  organization: getOrganizationByKey(state, component.organization)\n});\n\nconst mapDispatchToProps = { fetchOrganization };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = require(\"react\");\nvar l10n_1 = require(\"../../helpers/l10n\");\nvar DeferredSpinner_1 = require(\"../ui/DeferredSpinner\");\nvar buttons_1 = require(\"./buttons\");\nvar ClickEventBoundary_1 = require(\"./ClickEventBoundary\");\nvar SimpleModal_1 = require(\"./SimpleModal\");\nvar ConfirmModal = (function (_super) {\n    __extends(ConfirmModal, _super);\n    function ConfirmModal() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.mounted = false;\n        _this.handleSubmit = function () {\n            var result = _this.props.onConfirm(_this.props.confirmData);\n            if (result) {\n                return result.then(_this.props.onClose, function () { });\n            }\n            else {\n                _this.props.onClose();\n                return undefined;\n            }\n        };\n        _this.renderModalContent = function (_a) {\n            var onCloseClick = _a.onCloseClick, onFormSubmit = _a.onFormSubmit, submitting = _a.submitting;\n            var _b = _this.props, children = _b.children, confirmButtonText = _b.confirmButtonText, confirmDisable = _b.confirmDisable, header = _b.header, headerDescription = _b.headerDescription, isDestructive = _b.isDestructive, _c = _b.cancelButtonText, cancelButtonText = _c === void 0 ? l10n_1.translate('cancel') : _c;\n            return (React.createElement(ClickEventBoundary_1.default, null,\n                React.createElement(\"form\", { onSubmit: onFormSubmit },\n                    React.createElement(\"header\", { className: \"modal-head\" },\n                        React.createElement(\"h2\", null, header),\n                        headerDescription),\n                    React.createElement(\"div\", { className: \"modal-body\" }, children),\n                    React.createElement(\"footer\", { className: \"modal-foot\" },\n                        React.createElement(DeferredSpinner_1.default, { className: \"spacer-right\", loading: submitting }),\n                        React.createElement(buttons_1.SubmitButton, { autoFocus: true, className: isDestructive ? 'button-red' : undefined, disabled: submitting || confirmDisable }, confirmButtonText),\n                        React.createElement(buttons_1.ResetButtonLink, { disabled: submitting, onClick: onCloseClick }, cancelButtonText)))));\n        };\n        return _this;\n    }\n    ConfirmModal.prototype.componentDidMount = function () {\n        this.mounted = true;\n    };\n    ConfirmModal.prototype.componentWillUnmount = function () {\n        this.mounted = false;\n    };\n    ConfirmModal.prototype.render = function () {\n        var _a = this.props, header = _a.header, onClose = _a.onClose, noBackdrop = _a.noBackdrop, size = _a.size;\n        var modalProps = { header: header, onClose: onClose, noBackdrop: noBackdrop, size: size };\n        return (React.createElement(SimpleModal_1.default, __assign({ onSubmit: this.handleSubmit }, modalProps), this.renderModalContent));\n    };\n    return ConfirmModal;\n}(React.PureComponent));\nexports.default = ConfirmModal;\n//# sourceMappingURL=ConfirmModal.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar classNames = require(\"classnames\");\nvar React = require(\"react\");\nrequire(\"./RadioToggle.css\");\nvar Tooltip_1 = require(\"./Tooltip\");\nvar RadioToggle = (function (_super) {\n    __extends(RadioToggle, _super);\n    function RadioToggle() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.renderOption = function (option) {\n            var checked = option.value === _this.props.value;\n            var htmlId = _this.props.name + '__' + option.value;\n            return (React.createElement(\"li\", { key: option.value.toString() },\n                React.createElement(\"input\", { checked: checked, disabled: option.disabled, id: htmlId, name: _this.props.name, onChange: function () { return _this.props.onCheck(option.value); }, type: \"radio\" }),\n                React.createElement(Tooltip_1.default, { overlay: option.tooltip || undefined },\n                    React.createElement(\"label\", { htmlFor: htmlId }, option.label))));\n        };\n        return _this;\n    }\n    RadioToggle.prototype.render = function () {\n        return (React.createElement(\"ul\", { className: classNames('radio-toggle', this.props.className) }, this.props.options.map(this.renderOption)));\n    };\n    RadioToggle.defaultProps = {\n        disabled: false,\n        value: null,\n    };\n    return RadioToggle;\n}(React.PureComponent));\nexports.default = RadioToggle;\n//# sourceMappingURL=RadioToggle.js.map","var api = require(\"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../css-loader/dist/cjs.js??ref--6-1!../../../postcss-loader/src/index.js??postcss!./RadioToggle.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".radio-toggle{font-size:0;white-space:nowrap}.radio-toggle,.radio-toggle>li{display:inline-block;vertical-align:middle}.radio-toggle>li{font-size:12px}.radio-toggle>li:first-child>label{border-top-left-radius:2px;border-bottom-left-radius:2px}.radio-toggle>li:last-child>label{border-top-right-radius:2px;border-bottom-right-radius:2px}.radio-toggle>li+li>label{border-left:none}.radio-toggle>li>label{display:inline-block;padding:0 12px;margin:0;border:1px solid #236a97;color:#236a97;height:22px;line-height:22px;cursor:pointer;font-weight:600}.radio-toggle input[type=radio]{display:none}.radio-toggle input[type=radio]:checked+label{background-color:#236a97;color:#fff}.radio-toggle input[type=radio]:disabled+label{color:#bbb;border-color:#ddd;background:#ebebeb;cursor:not-allowed}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getBaseUrl } from 'sonar-ui-common/helpers/urls';\nimport { getExtensionFromCache } from './extensionsHandler';\n\nlet librariesExposed = false;\n\nexport function installScript(url: string, target: 'body' | 'head' = 'body'): Promise<any> {\n  return new Promise(resolve => {\n    const scriptTag = document.createElement('script');\n    scriptTag.src = `${getBaseUrl()}${url}`;\n    scriptTag.onload = resolve;\n    document.getElementsByTagName(target)[0].appendChild(scriptTag);\n  });\n}\n\nexport async function getExtensionStart(key: string) {\n  const fromCache = getExtensionFromCache(key);\n  if (fromCache) {\n    return Promise.resolve(fromCache);\n  }\n\n  if (!librariesExposed) {\n    // Async import allows to reduce initial vendor bundle size\n    const exposeLibraries = (await import('../app/components/extensions/exposeLibraries')).default;\n    exposeLibraries();\n    librariesExposed = true;\n  }\n\n  await installScript(`/static/${key}.js`);\n\n  const start = getExtensionFromCache(key);\n  if (start) {\n    return start;\n  }\n  return Promise.reject();\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { isLoggedIn } from './users';\n\nexport function getAlmMembersUrl(key: string, url: string): string {\n  if (!url.endsWith('/')) {\n    url += '/';\n  }\n  if (isGithub(key)) {\n    return url.replace('github.com/', 'github.com/orgs/') + 'people';\n  }\n  return url + 'profile/members';\n}\n\nexport function getUserAlmKey(user: T.CurrentUser) {\n  return isLoggedIn(user) && user.externalProvider\n    ? sanitizeAlmId(user.externalProvider)\n    : undefined;\n}\n\nexport function hasAdvancedALMIntegration(user: T.CurrentUser) {\n  return (\n    isLoggedIn(user) && (isBitbucket(user.externalProvider) || isGithub(user.externalProvider))\n  );\n}\n\nexport function isBitbucket(almKey?: string): boolean {\n  return almKey ? almKey.startsWith('bitbucket') : false;\n}\n\nexport function isGithub(almKey?: string): boolean {\n  return almKey === 'github';\n}\n\nexport function isVSTS(almKey?: string): boolean {\n  return almKey === 'microsoft';\n}\n\nexport function sanitizeAlmId(almKey: string) {\n  if (isBitbucket(almKey)) {\n    return 'bitbucket';\n  }\n  return almKey;\n}\n","var createAggregator = require('./_createAggregator');\n\n/**\n * Creates an array of elements split into two groups, the first of which\n * contains elements `predicate` returns truthy for, the second of which\n * contains elements `predicate` returns falsey for. The predicate is\n * invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the array of grouped elements.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'age': 36, 'active': false },\n *   { 'user': 'fred',    'age': 40, 'active': true },\n *   { 'user': 'pebbles', 'age': 1,  'active': false }\n * ];\n *\n * _.partition(users, function(o) { return o.active; });\n * // => objects for [['fred'], ['barney', 'pebbles']]\n *\n * // The `_.matches` iteratee shorthand.\n * _.partition(users, { 'age': 1, 'active': false });\n * // => objects for [['pebbles'], ['barney', 'fred']]\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.partition(users, ['active', false]);\n * // => objects for [['barney', 'pebbles'], ['fred']]\n *\n * // The `_.property` iteratee shorthand.\n * _.partition(users, 'active');\n * // => objects for [['fred'], ['barney', 'pebbles']]\n */\nvar partition = createAggregator(function(result, value, key) {\n  result[key ? 0 : 1].push(value);\n}, function() { return [[], []]; });\n\nmodule.exports = partition;\n"],"sourceRoot":""}