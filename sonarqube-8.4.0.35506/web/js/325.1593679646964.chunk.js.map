{"version":3,"sources":["webpack:///./src/main/js/apps/quality-profiles/components/BuiltInQualityProfileBadge.tsx","webpack:///./src/main/js/apps/quality-profiles/components/ProfileLink.tsx","webpack:///../sonar-docs/src/tooltips/quality-profiles/built-in-quality-profile.md","webpack:///../sonar-docs/src/tooltips/quality-profiles/activate-rules-in-built-in-profile.md","webpack:///./src/main/js/apps/quality-profiles/details/ProfileExporters.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ChangeParentForm.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfileInheritanceBox.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfileInheritance.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfilePermissionsFormSelect.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfilePermissionsForm.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfilePermissionsGroup.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfilePermissionsUser.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfilePermissions.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ChangeProjectsForm.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfileProjects.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfileRulesDeprecatedWarning.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfileRulesRowOfType.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfileRulesRowTotal.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfileRulesSonarWayComparison.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfileRules.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfileDetails.tsx","webpack:///./src/main/js/components/docs/DocTooltip.tsx","webpack:///./src/main/js/api/quality-profiles.ts","webpack:///./src/main/js/helpers/markdown.js"],"names":["BuiltInQualityProfileBadge","className","tooltip","badge","doc","ProfileLink","name","language","organization","children","activeClassName","to","other","getExportUrl","exporter","profile","render","exporters","exportersForLanguage","filter","e","languages","includes","length","map","index","undefined","key","href","rel","target","mounted","state","loading","selected","handleSelectChange","option","setState","value","handleFormSubmit","event","preventDefault","parent","props","profiles","find","p","then","onChange","catch","componentDidMount","this","componentWillUnmount","options","label","isBuiltIn","submitDisabled","parentKey","contentLabel","onRequestClose","onClose","size","id","onSubmit","htmlFor","clearable","disabled","onClick","ProfileInheritanceBox","depth","extendsBuiltIn","displayLink","type","offset","style","paddingLeft","overlay","activeRuleCount","overridingRuleCount","formOpen","handleChangeParentClick","closeForm","handleParentChange","updateProfiles","loadData","componentDidUpdate","prevProps","r","ancestors","reverse","highlightCurrent","some","actions","edit","ancestor","child","handleSearch","query","onSearch","searchResults","handleInputChange","noResultsText","getStringValue","autoFocus","filterOptions","isLoading","onInputChange","optionRenderer","placeholder","searchable","valueRenderer","isUser","login","Avatar","hash","avatar","submitting","stopSubmitting","handleUserAdd","user","qualityProfile","onUserAdd","handleGroupAdd","group","onGroupAdd","q","parameters","Promise","all","usersResponse","groupsResponse","users","groups","handleValueChange","header","deleteModal","handleDeleteClick","handleDeleteModalClose","handleDelete","onDelete","renderDeleteModal","defaultMessage","values","onSubmitClick","onCloseClick","lineHeight","addUserForm","handleAddUserButtonClick","handleAddUserFormClose","addedUser","handleUserDelete","removedUser","addedGroup","handleGroupDelete","removedGroup","fetchUsersAndGroups","fetchProjects","searchParams","page","ps","pageSize","data","prevState","more","projects","results","newSeletedProjects","project","selectedProjects","lastSearchParams","needToReload","projectsTotalCount","paging","total","handleSelect","handleUnselect","handleCloseClick","renderElement","allowBulkSelection","elements","elementsTotalCount","labelAll","labelSelected","labelUnselected","SelectList","All","onSelect","onUnselect","selectedElements","withPaging","loadingMore","stopLoading","loadMore","handleChangeClick","loadProjects","isDefault","renderDefault","renderProjects","qualifier","count","ready","associateProjects","ProfileRulesDeprecatedWarning","qprofile","activeDeprecatedRules","ProfileRulesRowOfType","activeRulesUrl","activation","types","inactiveRulesUrl","inactiveCount","ProfileRulesRowTotal","ProfileRulesSonarWayComparison","url","compareToProfile","sonarway","sonarWayMissingRules","TYPES","activatedTotal","activatedByType","t","val","allByType","compareToSonarWay","loadRules","loadProfile","resolve","loadAllRules","facets","loadActivatedRules","responses","allRules","activatedRules","showProfile","getRulesCountForType","getRulesTotalForType","activateMoreUrl","copy","DocTooltip","activeDeprecatedRuleCount","missingRuleCount","ProfileDetails","DocMarkdownBlock","default","content","childProps","overlayProps","isTooltip","searchQualityProfiles","getQualityProfile","createQualityProfile","restoreQualityProfile","getProfileProjects","getProfileInheritance","setDefaultProfile","renameProfile","copyProfile","fromKey","toName","deleteProfile","changeProfileParent","parentProfile","parentQualityProfile","getQualityProfileBackupUrl","Object","entries","encodeURIComponent","join","getQualityProfileExporterUrl","exporterKey","getImporters","getExporters","getProfileChangelog","since","compareProfiles","leftKey","rightKey","associateProject","dissociateProject","searchUsers","searchGroups","addUser","removeUser","addGroup","removeGroup","bulkActivateRules","bulkDeactivateRules","activateRule","params","deactivateRule","getFrontMatterPosition","lines","firstLine","lastLine","i","trim","parseFrontMatter","tokens","split","x","cutConditionalContent","tag","beginning","ending","newContent","start","indexOf","end","substring","console","error","Error","module","exports","getFrontMatter","position","slice","separateFrontMatter","frontmatter","filterContent","regexBase","isSonarCloud","getInstance","contentWithoutStatic","replace","RegExp"],"mappings":"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","file":"js/325.1593679646964.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport DocTooltip from '../../../components/docs/DocTooltip';\n\ninterface Props {\n  className?: string;\n  tooltip?: boolean;\n}\n\nexport default function BuiltInQualityProfileBadge({ className, tooltip = true }: Props) {\n  const badge = (\n    <div className={classNames('badge badge-info', className)}>\n      {translate('quality_profiles.built_in')}\n    </div>\n  );\n\n  if (tooltip) {\n    return (\n      <DocTooltip\n        doc={import(\n          /* webpackMode: \"eager\" */ 'Docs/tooltips/quality-profiles/built-in-quality-profile.md'\n        )}>\n        {badge}\n      </DocTooltip>\n    );\n  }\n  return badge;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { getProfilePath } from '../utils';\n\ninterface Props {\n  className?: string;\n  children?: React.ReactElement<any> | string;\n  language: string;\n  name: string;\n  organization: string | null;\n}\n\nexport default function ProfileLink({ name, language, organization, children, ...other }: Props) {\n  return (\n    <Link\n      activeClassName=\"link-no-underline\"\n      to={getProfilePath(name, language, organization)}\n      {...other}>\n      {children}\n    </Link>\n  );\n}\n","export default \"Built-in profiles are provided directly by the language analyzers and may be updated with each new analyzer version. They represent best-practice, minimum rule sets.\\n\"","export default \"This Quality Profile is built in, and cannot be updated manually. If you want to activate more rules, create a new profile that inherits from this one and add rules there.\\n\"","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getQualityProfileExporterUrl } from '../../../api/quality-profiles';\nimport { getBaseUrl } from '../../../helpers/system';\nimport { Exporter, Profile } from '../types';\n\ninterface Props {\n  exporters: Exporter[];\n  organization: string | null;\n  profile: Profile;\n}\n\nexport default class ProfileExporters extends React.PureComponent<Props> {\n  getExportUrl(exporter: Exporter) {\n    const { profile } = this.props;\n    return `${getBaseUrl()}${getQualityProfileExporterUrl(exporter, profile)}`;\n  }\n\n  render() {\n    const { exporters, profile } = this.props;\n    const exportersForLanguage = exporters.filter(e => e.languages.includes(profile.language));\n\n    if (exportersForLanguage.length === 0) {\n      return null;\n    }\n\n    return (\n      <div className=\"boxed-group quality-profile-exporters\">\n        <h2>{translate('quality_profiles.exporters')}</h2>\n        <div className=\"boxed-group-inner\">\n          <ul>\n            {exportersForLanguage.map((exporter, index) => (\n              <li\n                className={index > 0 ? 'spacer-top' : undefined}\n                data-key={exporter.key}\n                key={exporter.key}>\n                <a href={this.getExportUrl(exporter)} rel=\"noopener noreferrer\" target=\"_blank\">\n                  {exporter.name}\n                </a>\n              </li>\n            ))}\n          </ul>\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sortBy } from 'lodash';\nimport * as React from 'react';\nimport { ResetButtonLink, SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport Select from 'sonar-ui-common/components/controls/Select';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { changeProfileParent } from '../../../api/quality-profiles';\nimport { Profile } from '../types';\n\ninterface Props {\n  onChange: () => void;\n  onClose: () => void;\n  profile: Profile;\n  profiles: Profile[];\n}\n\ninterface State {\n  loading: boolean;\n  selected: string | null;\n}\n\nexport default class ChangeParentForm extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = {\n    loading: false,\n    selected: null\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleSelectChange = (option: { value: string }) => {\n    this.setState({ selected: option.value });\n  };\n\n  handleFormSubmit = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n\n    const parent = this.props.profiles.find(p => p.key === this.state.selected);\n\n    this.setState({ loading: true });\n    changeProfileParent(this.props.profile, parent)\n      .then(this.props.onChange)\n      .catch(() => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      });\n  };\n\n  render() {\n    const { profiles } = this.props;\n\n    const options = [\n      { label: translate('none'), value: '' },\n      ...sortBy(profiles, 'name').map(profile => ({\n        label: profile.isBuiltIn\n          ? `${profile.name} (${translate('quality_profiles.built_in')})`\n          : profile.name,\n        value: profile.key\n      }))\n    ];\n\n    const submitDisabled =\n      this.state.loading ||\n      this.state.selected == null ||\n      this.state.selected === this.props.profile.parentKey;\n\n    return (\n      <Modal\n        contentLabel={translate('quality_profiles.change_parent')}\n        onRequestClose={this.props.onClose}\n        size=\"small\">\n        <form id=\"change-profile-parent-form\" onSubmit={this.handleFormSubmit}>\n          <div className=\"modal-head\">\n            <h2>{translate('quality_profiles.change_parent')}</h2>\n          </div>\n          <div className=\"modal-body\">\n            <div className=\"modal-field\">\n              <label htmlFor=\"change-profile-parent\">\n                {translate('quality_profiles.parent')} <em className=\"mandatory\">*</em>\n              </label>\n              <Select\n                clearable={false}\n                id=\"change-profile-parent\"\n                name=\"parentKey\"\n                onChange={this.handleSelectChange}\n                options={options}\n                value={\n                  this.state.selected != null\n                    ? this.state.selected\n                    : this.props.profile.parentKey || ''\n                }\n              />\n            </div>\n          </div>\n          <div className=\"modal-foot\">\n            {this.state.loading && <i className=\"spinner spacer-right\" />}\n            <SubmitButton disabled={submitDisabled} id=\"change-profile-parent-submit\">\n              {translate('change_verb')}\n            </SubmitButton>\n            <ResetButtonLink id=\"change-profile-parent-cancel\" onClick={this.props.onClose}>\n              {translate('cancel')}\n            </ResetButtonLink>\n          </div>\n        </form>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport HelpTooltip from 'sonar-ui-common/components/controls/HelpTooltip';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport BuiltInQualityProfileBadge from '../components/BuiltInQualityProfileBadge';\nimport ProfileLink from '../components/ProfileLink';\n\ninterface Props {\n  className?: string;\n  depth: number;\n  displayLink?: boolean;\n  extendsBuiltIn?: boolean;\n  language: string;\n  organization: string | null;\n  profile: T.ProfileInheritanceDetails;\n  type?: string;\n}\n\nexport default function ProfileInheritanceBox(props: Props) {\n  const {\n    className,\n    depth,\n    extendsBuiltIn,\n    language,\n    organization,\n    profile,\n    displayLink = true,\n    type = 'current'\n  } = props;\n  const offset = 25 * depth;\n\n  return (\n    <tr className={className} data-test={`quality-profiles__inheritance-${type}`}>\n      <td>\n        <div style={{ paddingLeft: offset }}>\n          {displayLink ? (\n            <ProfileLink\n              className=\"text-middle\"\n              language={language}\n              name={profile.name}\n              organization={organization}>\n              {profile.name}\n            </ProfileLink>\n          ) : (\n            <span className=\"text-middle\">{profile.name}</span>\n          )}\n          {profile.isBuiltIn && <BuiltInQualityProfileBadge className=\"spacer-left\" />}\n          {extendsBuiltIn && (\n            <HelpTooltip\n              className=\"spacer-left\"\n              overlay={translate('quality_profiles.extends_built_in')}\n            />\n          )}\n        </div>\n      </td>\n\n      <td>{translateWithParameters('quality_profile.x_active_rules', profile.activeRuleCount)}</td>\n\n      <td>\n        {profile.overridingRuleCount != null && (\n          <p>\n            {translateWithParameters(\n              'quality_profiles.x_overridden_rules',\n              profile.overridingRuleCount\n            )}\n          </p>\n        )}\n      </td>\n    </tr>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getProfileInheritance } from '../../../api/quality-profiles';\nimport { Profile } from '../types';\nimport ChangeParentForm from './ChangeParentForm';\nimport ProfileInheritanceBox from './ProfileInheritanceBox';\n\ninterface Props {\n  organization: string | null;\n  profile: Profile;\n  profiles: Profile[];\n  updateProfiles: () => Promise<void>;\n}\n\ninterface State {\n  ancestors?: T.ProfileInheritanceDetails[];\n  children?: T.ProfileInheritanceDetails[];\n  formOpen: boolean;\n  loading: boolean;\n  profile?: T.ProfileInheritanceDetails;\n}\n\nexport default class ProfileInheritance extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  state: State = {\n    formOpen: false,\n    loading: true\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.loadData();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.profile.key !== this.props.profile.key) {\n      this.loadData();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadData() {\n    getProfileInheritance(this.props.profile).then(\n      r => {\n        if (this.mounted) {\n          const { ancestors, children } = r;\n          ancestors.reverse();\n\n          this.setState({\n            children,\n            ancestors,\n            profile: r.profile,\n            loading: false\n          });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  }\n\n  handleChangeParentClick = () => {\n    this.setState({ formOpen: true });\n  };\n\n  closeForm = () => {\n    this.setState({ formOpen: false });\n  };\n\n  handleParentChange = () => {\n    this.props.updateProfiles().then(\n      () => {\n        this.loadData();\n      },\n      () => {}\n    );\n    this.closeForm();\n  };\n\n  render() {\n    const { profile, profiles } = this.props;\n    const { ancestors } = this.state;\n\n    const highlightCurrent =\n      !this.state.loading &&\n      ancestors != null &&\n      this.state.children != null &&\n      (ancestors.length > 0 || this.state.children.length > 0);\n\n    const extendsBuiltIn = ancestors != null && ancestors.some(profile => profile.isBuiltIn);\n\n    return (\n      <div className=\"boxed-group quality-profile-inheritance\">\n        {profile.actions && profile.actions.edit && !profile.isBuiltIn && (\n          <div className=\"boxed-group-actions\">\n            <Button className=\"pull-right js-change-parent\" onClick={this.handleChangeParentClick}>\n              {translate('quality_profiles.change_parent')}\n            </Button>\n          </div>\n        )}\n\n        <header className=\"boxed-group-header\">\n          <h2>{translate('quality_profiles.profile_inheritance')}</h2>\n        </header>\n\n        <div className=\"boxed-group-inner\">\n          {this.state.loading ? (\n            <i className=\"spinner\" />\n          ) : (\n            <table className=\"data zebra\">\n              <tbody>\n                {ancestors != null &&\n                  ancestors.map((ancestor, index) => (\n                    <ProfileInheritanceBox\n                      depth={index}\n                      key={ancestor.key}\n                      language={profile.language}\n                      organization={this.props.organization}\n                      profile={ancestor}\n                      type=\"ancestor\"\n                    />\n                  ))}\n\n                {this.state.profile != null && (\n                  <ProfileInheritanceBox\n                    className={classNames({\n                      selected: highlightCurrent\n                    })}\n                    depth={ancestors ? ancestors.length : 0}\n                    displayLink={false}\n                    extendsBuiltIn={extendsBuiltIn}\n                    language={profile.language}\n                    organization={this.props.organization}\n                    profile={this.state.profile}\n                  />\n                )}\n\n                {this.state.children != null &&\n                  this.state.children.map(child => (\n                    <ProfileInheritanceBox\n                      depth={ancestors ? ancestors.length + 1 : 0}\n                      key={child.key}\n                      language={profile.language}\n                      organization={this.props.organization}\n                      profile={child}\n                      type=\"child\"\n                    />\n                  ))}\n              </tbody>\n            </table>\n          )}\n        </div>\n\n        {this.state.formOpen && (\n          <ChangeParentForm\n            onChange={this.handleParentChange}\n            onClose={this.closeForm}\n            profile={profile}\n            profiles={profiles.filter(p => p !== profile && p.language === profile.language)}\n          />\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { debounce, identity } from 'lodash';\nimport * as React from 'react';\nimport Select from 'sonar-ui-common/components/controls/Select';\nimport GroupIcon from 'sonar-ui-common/components/icons/GroupIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport Avatar from '../../../components/ui/Avatar';\nimport { Group } from './ProfilePermissions';\n\ntype Option = T.UserSelected | Group;\ntype OptionWithValue = Option & { value: string };\n\ninterface Props {\n  onChange: (option: OptionWithValue) => void;\n  onSearch: (query: string) => Promise<Option[]>;\n  selected?: Option;\n}\n\ninterface State {\n  loading: boolean;\n  query: string;\n  searchResults: Option[];\n}\n\nexport default class ProfilePermissionsFormSelect extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    this.handleSearch = debounce(this.handleSearch, 250);\n    this.state = { loading: false, query: '', searchResults: [] };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.handleSearch(this.state.query);\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleSearch = (query: string) => {\n    this.setState({ loading: true });\n    this.props.onSearch(query).then(\n      searchResults => {\n        if (this.mounted) {\n          this.setState({ loading: false, searchResults });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  handleInputChange = (query: string) => {\n    this.setState({ query });\n    if (query.length > 1) {\n      this.handleSearch(query);\n    }\n  };\n\n  render() {\n    const noResultsText =\n      this.state.query.length === 1\n        ? translateWithParameters('select2.tooShort', 2)\n        : translate('no_results');\n\n    // create a uniq string both for users and groups\n    const options = this.state.searchResults.map(r => ({ ...r, value: getStringValue(r) }));\n\n    return (\n      <Select\n        autoFocus={true}\n        className=\"Select-big\"\n        clearable={false}\n        // disable default react-select filtering\n        filterOptions={identity}\n        isLoading={this.state.loading}\n        noResultsText={noResultsText}\n        onChange={this.props.onChange}\n        onInputChange={this.handleInputChange}\n        optionRenderer={optionRenderer}\n        options={options}\n        placeholder=\"\"\n        searchable={true}\n        value={this.props.selected && getStringValue(this.props.selected)}\n        valueRenderer={optionRenderer}\n      />\n    );\n  }\n}\n\nfunction isUser(option: Option): option is T.UserSelected {\n  return (option as T.UserSelected).login !== undefined;\n}\n\nfunction getStringValue(option: Option) {\n  return isUser(option) ? `user:${option.login}` : `group:${option.name}`;\n}\n\nfunction optionRenderer(option: OptionWithValue) {\n  return isUser(option) ? (\n    <>\n      <Avatar hash={option.avatar} name={option.name} size={16} />\n      <strong className=\"spacer-left\">{option.name}</strong>\n      <span className=\"note little-spacer-left\">{option.login}</span>\n    </>\n  ) : (\n    <>\n      <GroupIcon size={16} />\n      <strong className=\"spacer-left\">{option.name}</strong>\n    </>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ResetButtonLink, SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport {\n  addGroup,\n  addUser,\n  searchGroups,\n  searchUsers,\n  SearchUsersGroupsParameters\n} from '../../../api/quality-profiles';\nimport { Group } from './ProfilePermissions';\nimport ProfilePermissionsFormSelect from './ProfilePermissionsFormSelect';\n\ninterface Props {\n  onClose: () => void;\n  onGroupAdd: (group: Group) => void;\n  onUserAdd: (user: T.UserSelected) => void;\n  organization?: string;\n  profile: { language: string; name: string };\n}\n\ninterface State {\n  selected?: T.UserSelected | Group;\n  submitting: boolean;\n}\n\nexport default class ProfilePermissionsForm extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { submitting: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  stopSubmitting = () => {\n    if (this.mounted) {\n      this.setState({ submitting: false });\n    }\n  };\n\n  handleUserAdd = (user: T.UserSelected) => {\n    const {\n      profile: { language, name },\n      organization\n    } = this.props;\n    addUser({\n      language,\n      login: user.login,\n      organization,\n      qualityProfile: name\n    }).then(() => this.props.onUserAdd(user), this.stopSubmitting);\n  };\n\n  handleGroupAdd = (group: Group) => {\n    const {\n      profile: { language, name },\n      organization\n    } = this.props;\n    addGroup({\n      group: group.name,\n      language,\n      organization,\n      qualityProfile: name\n    }).then(() => this.props.onGroupAdd(group), this.stopSubmitting);\n  };\n\n  handleFormSubmit = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    const { selected } = this.state;\n    if (selected) {\n      this.setState({ submitting: true });\n      if ((selected as T.UserSelected).login !== undefined) {\n        this.handleUserAdd(selected as T.UserSelected);\n      } else {\n        this.handleGroupAdd(selected as Group);\n      }\n    }\n  };\n\n  handleSearch = (q: string) => {\n    const { organization, profile } = this.props;\n    const parameters: SearchUsersGroupsParameters = {\n      language: profile.language,\n      organization,\n      q,\n      qualityProfile: profile.name,\n      selected: 'deselected'\n    };\n    return Promise.all([\n      searchUsers(parameters),\n      searchGroups(parameters)\n    ]).then(([usersResponse, groupsResponse]) => [\n      ...usersResponse.users,\n      ...groupsResponse.groups\n    ]);\n  };\n\n  handleValueChange = (selected: T.UserSelected | Group) => {\n    this.setState({ selected });\n  };\n\n  render() {\n    const header = translate('quality_profiles.grant_permissions_to_user_or_group');\n    const submitDisabled = !this.state.selected || this.state.submitting;\n    return (\n      <Modal contentLabel={header} onRequestClose={this.props.onClose}>\n        <header className=\"modal-head\">\n          <h2>{header}</h2>\n        </header>\n        <form onSubmit={this.handleFormSubmit}>\n          <div className=\"modal-body\">\n            <div className=\"modal-field\">\n              <label>{translate('quality_profiles.search_description')}</label>\n              <ProfilePermissionsFormSelect\n                onChange={this.handleValueChange}\n                onSearch={this.handleSearch}\n                selected={this.state.selected}\n              />\n            </div>\n          </div>\n          <footer className=\"modal-foot\">\n            {this.state.submitting && <i className=\"spinner spacer-right\" />}\n            <SubmitButton disabled={submitDisabled}>{translate('add_verb')}</SubmitButton>\n            <ResetButtonLink onClick={this.props.onClose}>{translate('cancel')}</ResetButtonLink>\n          </footer>\n        </form>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { Button, DeleteButton, ResetButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport SimpleModal, { ChildrenProps } from 'sonar-ui-common/components/controls/SimpleModal';\nimport GroupIcon from 'sonar-ui-common/components/icons/GroupIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { removeGroup } from '../../../api/quality-profiles';\nimport { Group } from './ProfilePermissions';\n\ninterface Props {\n  group: Group;\n  onDelete: (group: Group) => void;\n  organization?: string;\n  profile: { language: string; name: string };\n}\n\ninterface State {\n  deleteModal: boolean;\n}\n\nexport default class ProfilePermissionsGroup extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { deleteModal: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleDeleteClick = () => {\n    this.setState({ deleteModal: true });\n  };\n\n  handleDeleteModalClose = () => {\n    if (this.mounted) {\n      this.setState({ deleteModal: false });\n    }\n  };\n\n  handleDelete = () => {\n    const { group, organization, profile } = this.props;\n\n    return removeGroup({\n      group: group.name,\n      language: profile.language,\n      organization,\n      qualityProfile: profile.name\n    }).then(() => {\n      this.handleDeleteModalClose();\n      this.props.onDelete(group);\n    });\n  };\n\n  renderDeleteModal = (props: ChildrenProps) => (\n    <div>\n      <header className=\"modal-head\">\n        <h2>{translate('groups.remove')}</h2>\n      </header>\n\n      <div className=\"modal-body\">\n        <FormattedMessage\n          defaultMessage={translate('groups.remove.confirmation')}\n          id=\"groups.remove.confirmation\"\n          values={{\n            user: <strong>{this.props.group.name}</strong>\n          }}\n        />\n      </div>\n\n      <footer className=\"modal-foot\">\n        {props.submitting && <i className=\"spinner spacer-right\" />}\n        <Button className=\"button-red\" disabled={props.submitting} onClick={props.onSubmitClick}>\n          {translate('remove')}\n        </Button>\n        <ResetButtonLink onClick={props.onCloseClick}>{translate('cancel')}</ResetButtonLink>\n      </footer>\n    </div>\n  );\n\n  render() {\n    const { group } = this.props;\n\n    return (\n      <div className=\"clearfix big-spacer-bottom\">\n        <DeleteButton\n          className=\"pull-right spacer-top spacer-left spacer-right button-small\"\n          onClick={this.handleDeleteClick}\n        />\n        <GroupIcon className=\"pull-left spacer-right\" size={32} />\n        <div className=\"overflow-hidden\" style={{ lineHeight: '32px' }}>\n          <strong>{group.name}</strong>\n        </div>\n\n        {this.state.deleteModal && (\n          <SimpleModal\n            header={translate('group.remove')}\n            onClose={this.handleDeleteModalClose}\n            onSubmit={this.handleDelete}>\n            {this.renderDeleteModal}\n          </SimpleModal>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport {\n  DeleteButton,\n  ResetButtonLink,\n  SubmitButton\n} from 'sonar-ui-common/components/controls/buttons';\nimport SimpleModal, { ChildrenProps } from 'sonar-ui-common/components/controls/SimpleModal';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { removeUser } from '../../../api/quality-profiles';\nimport Avatar from '../../../components/ui/Avatar';\n\ninterface Props {\n  onDelete: (user: T.UserSelected) => void;\n  organization?: string;\n  profile: { language: string; name: string };\n  user: T.UserSelected;\n}\n\ninterface State {\n  deleteModal: boolean;\n}\n\nexport default class ProfilePermissionsUser extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { deleteModal: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleDeleteClick = () => {\n    this.setState({ deleteModal: true });\n  };\n\n  handleDeleteModalClose = () => {\n    if (this.mounted) {\n      this.setState({ deleteModal: false });\n    }\n  };\n\n  handleDelete = () => {\n    const { organization, profile, user } = this.props;\n\n    return removeUser({\n      language: profile.language,\n      login: user.login,\n      organization,\n      qualityProfile: profile.name\n    }).then(() => {\n      this.handleDeleteModalClose();\n      this.props.onDelete(user);\n    });\n  };\n\n  renderDeleteModal = (props: ChildrenProps) => (\n    <div>\n      <header className=\"modal-head\">\n        <h2>{translate('users.remove')}</h2>\n      </header>\n\n      <div className=\"modal-body\">\n        <FormattedMessage\n          defaultMessage={translate('users.remove.confirmation')}\n          id=\"users.remove.confirmation\"\n          values={{\n            user: <strong>{this.props.user.name}</strong>\n          }}\n        />\n      </div>\n\n      <footer className=\"modal-foot\">\n        {props.submitting && <i className=\"spinner spacer-right\" />}\n        <SubmitButton\n          className=\"button-red\"\n          disabled={props.submitting}\n          onClick={props.onSubmitClick}>\n          {translate('remove')}\n        </SubmitButton>\n        <ResetButtonLink onClick={props.onCloseClick}>{translate('cancel')}</ResetButtonLink>\n      </footer>\n    </div>\n  );\n\n  render() {\n    const { user } = this.props;\n\n    return (\n      <div className=\"clearfix big-spacer-bottom\">\n        <DeleteButton\n          className=\"pull-right spacer-top spacer-left spacer-right button-small\"\n          onClick={this.handleDeleteClick}\n        />\n        <Avatar className=\"pull-left spacer-right\" hash={user.avatar} name={user.name} size={32} />\n        <div className=\"overflow-hidden\">\n          <strong>{user.name}</strong>\n          <div className=\"note\">{user.login}</div>\n        </div>\n\n        {this.state.deleteModal && (\n          <SimpleModal\n            header={translate('users.remove')}\n            onClose={this.handleDeleteModalClose}\n            onSubmit={this.handleDelete}>\n            {this.renderDeleteModal}\n          </SimpleModal>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sortBy, uniqBy } from 'lodash';\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport {\n  searchGroups,\n  searchUsers,\n  SearchUsersGroupsParameters\n} from '../../../api/quality-profiles';\nimport { Profile } from '../types';\nimport ProfilePermissionsForm from './ProfilePermissionsForm';\nimport ProfilePermissionsGroup from './ProfilePermissionsGroup';\nimport ProfilePermissionsUser from './ProfilePermissionsUser';\n\nexport interface Group {\n  name: string;\n}\n\ninterface Props {\n  organization?: string;\n  profile: Pick<Profile, 'key' | 'language' | 'name'>;\n}\n\ninterface State {\n  addUserForm: boolean;\n  groups?: Group[];\n  loading: boolean;\n  users?: T.UserSelected[];\n}\n\nexport default class ProfilePermissions extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { addUserForm: false, loading: true };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchUsersAndGroups();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (\n      prevProps.organization !== this.props.organization ||\n      prevProps.profile.key !== this.props.profile.key\n    ) {\n      this.fetchUsersAndGroups();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchUsersAndGroups() {\n    this.setState({ loading: true });\n    const { organization, profile } = this.props;\n    const parameters: SearchUsersGroupsParameters = {\n      language: profile.language,\n      organization,\n      qualityProfile: profile.name,\n      selected: 'selected'\n    };\n    Promise.all([searchUsers(parameters), searchGroups(parameters)]).then(\n      ([usersResponse, groupsResponse]) => {\n        if (this.mounted) {\n          this.setState({\n            groups: groupsResponse.groups,\n            loading: false,\n            users: usersResponse.users\n          });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  }\n\n  handleAddUserButtonClick = () => {\n    this.setState({ addUserForm: true });\n  };\n\n  handleAddUserFormClose = () => {\n    if (this.mounted) {\n      this.setState({ addUserForm: false });\n    }\n  };\n\n  handleUserAdd = (addedUser: T.UserSelected) => {\n    if (this.mounted) {\n      this.setState((state: State) => ({\n        addUserForm: false,\n        users: state.users && uniqBy([...state.users, addedUser], user => user.login)\n      }));\n    }\n  };\n\n  handleUserDelete = (removedUser: T.UserSelected) => {\n    if (this.mounted) {\n      this.setState((state: State) => ({\n        users: state.users && state.users.filter(user => user !== removedUser)\n      }));\n    }\n  };\n\n  handleGroupAdd = (addedGroup: T.Group) => {\n    if (this.mounted) {\n      this.setState((state: State) => ({\n        addUserForm: false,\n        groups: state.groups && uniqBy([...state.groups, addedGroup], group => group.name)\n      }));\n    }\n  };\n\n  handleGroupDelete = (removedGroup: T.Group) => {\n    if (this.mounted) {\n      this.setState((state: State) => ({\n        groups: state.groups && state.groups.filter(group => group !== removedGroup)\n      }));\n    }\n  };\n\n  render() {\n    return (\n      <div className=\"boxed-group\">\n        <h2>{translate('permissions.page')}</h2>\n        <div className=\"boxed-group-inner\">\n          <p className=\"note\">{translate('quality_profiles.default_permissions')}</p>\n\n          {this.state.loading ? (\n            <div className=\"big-spacer-top\">\n              <i className=\"spinner\" />\n            </div>\n          ) : (\n            <div className=\"big-spacer-top\">\n              {this.state.users &&\n                sortBy(this.state.users, 'name').map(user => (\n                  <ProfilePermissionsUser\n                    key={user.login}\n                    onDelete={this.handleUserDelete}\n                    organization={this.props.organization}\n                    profile={this.props.profile}\n                    user={user}\n                  />\n                ))}\n              {this.state.groups &&\n                sortBy(this.state.groups, 'name').map(group => (\n                  <ProfilePermissionsGroup\n                    group={group}\n                    key={group.name}\n                    onDelete={this.handleGroupDelete}\n                    organization={this.props.organization}\n                    profile={this.props.profile}\n                  />\n                ))}\n              <div className=\"text-right\">\n                <Button onClick={this.handleAddUserButtonClick}>\n                  {translate('quality_profiles.grant_permissions_to_more_users')}\n                </Button>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {this.state.addUserForm && (\n          <ProfilePermissionsForm\n            onClose={this.handleAddUserFormClose}\n            onGroupAdd={this.handleGroupAdd}\n            onUserAdd={this.handleUserAdd}\n            organization={this.props.organization}\n            profile={this.props.profile}\n          />\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { find, without } from 'lodash';\nimport * as React from 'react';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport SelectList, {\n  SelectListFilter,\n  SelectListSearchParams\n} from 'sonar-ui-common/components/controls/SelectList';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport {\n  associateProject,\n  dissociateProject,\n  getProfileProjects,\n  ProfileProject\n} from '../../../api/quality-profiles';\nimport { Profile } from '../types';\n\ninterface Props {\n  onClose: () => void;\n  organization: string | null;\n  profile: Profile;\n}\n\ninterface State {\n  needToReload: boolean;\n  lastSearchParams?: SelectListSearchParams;\n  projects: ProfileProject[];\n  projectsTotalCount?: number;\n  selectedProjects: string[];\n}\n\nexport default class ChangeProjectsForm extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      needToReload: false,\n      projects: [],\n      selectedProjects: []\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchProjects = (searchParams: SelectListSearchParams) =>\n    getProfileProjects({\n      key: this.props.profile.key,\n      organization: this.props.organization,\n      p: searchParams.page,\n      ps: searchParams.pageSize,\n      q: searchParams.query !== '' ? searchParams.query : undefined,\n      selected: searchParams.filter\n    }).then(data => {\n      if (this.mounted) {\n        this.setState(prevState => {\n          const more = searchParams.page != null && searchParams.page > 1;\n\n          const projects = more ? [...prevState.projects, ...data.results] : data.results;\n          const newSeletedProjects = data.results\n            .filter(project => project.selected)\n            .map(project => project.key);\n          const selectedProjects = more\n            ? [...prevState.selectedProjects, ...newSeletedProjects]\n            : newSeletedProjects;\n\n          return {\n            lastSearchParams: searchParams,\n            needToReload: false,\n            projects,\n            projectsTotalCount: data.paging.total,\n            selectedProjects\n          };\n        });\n      }\n    });\n\n  handleSelect = (key: string) =>\n    associateProject(this.props.profile, key).then(() => {\n      if (this.mounted) {\n        this.setState((state: State) => ({\n          needToReload: true,\n          selectedProjects: [...state.selectedProjects, key]\n        }));\n      }\n    });\n\n  handleUnselect = (key: string) =>\n    dissociateProject(this.props.profile, key).then(() => {\n      if (this.mounted) {\n        this.setState((state: State) => ({\n          needToReload: true,\n          selectedProjects: without(state.selectedProjects, key)\n        }));\n      }\n    });\n\n  handleCloseClick = (event: React.SyntheticEvent<HTMLElement>) => {\n    event.preventDefault();\n    this.props.onClose();\n  };\n\n  renderElement = (key: string): React.ReactNode => {\n    const project = find(this.state.projects, { key });\n    return (\n      <div className=\"select-list-list-item\">\n        {project === undefined ? (\n          key\n        ) : (\n          <>\n            {project.name}\n            <br />\n            <span className=\"note\">{project.key}</span>\n          </>\n        )}\n      </div>\n    );\n  };\n\n  render() {\n    const header = translate('projects');\n\n    return (\n      <Modal contentLabel={header} onRequestClose={this.props.onClose}>\n        <div className=\"modal-head\">\n          <h2>{header}</h2>\n        </div>\n\n        <div className=\"modal-body modal-container\" id=\"profile-projects\">\n          <SelectList\n            allowBulkSelection={true}\n            elements={this.state.projects.map(project => project.key)}\n            elementsTotalCount={this.state.projectsTotalCount}\n            labelAll={translate('quality_gates.projects.all')}\n            labelSelected={translate('quality_gates.projects.with')}\n            labelUnselected={translate('quality_gates.projects.without')}\n            needToReload={\n              this.state.needToReload &&\n              this.state.lastSearchParams &&\n              this.state.lastSearchParams.filter !== SelectListFilter.All\n            }\n            onSearch={this.fetchProjects}\n            onSelect={this.handleSelect}\n            onUnselect={this.handleUnselect}\n            renderElement={this.renderElement}\n            selectedElements={this.state.selectedProjects}\n            withPaging={true}\n          />\n        </div>\n\n        <div className=\"modal-foot\">\n          <a href=\"#\" onClick={this.handleCloseClick}>\n            {translate('close')}\n          </a>\n        </div>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport ListFooter from 'sonar-ui-common/components/controls/ListFooter';\nimport QualifierIcon from 'sonar-ui-common/components/icons/QualifierIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getProfileProjects } from '../../../api/quality-profiles';\nimport { getProjectUrl } from '../../../helpers/urls';\nimport { Profile } from '../types';\nimport ChangeProjectsForm from './ChangeProjectsForm';\n\ninterface Props {\n  organization: string | null;\n  profile: Profile;\n}\n\ninterface State {\n  formOpen: boolean;\n  loading: boolean;\n  loadingMore: boolean;\n  page: number;\n  projects: Array<{ key: string; name: string }>;\n  total: number;\n}\n\nexport default class ProfileProjects extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  state: State = {\n    formOpen: false,\n    loading: true,\n    loadingMore: false,\n    page: 1,\n    projects: [],\n    total: 0\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.loadProjects();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.profile.key !== this.props.profile.key) {\n      this.loadProjects();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  stopLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  loadProjects() {\n    if (this.props.profile.isDefault) {\n      this.setState({ loading: false, projects: [] });\n      return;\n    }\n\n    this.setState({ loading: true });\n    const data = { key: this.props.profile.key, page: this.state.page };\n    getProfileProjects(data).then(({ paging, results }) => {\n      if (this.mounted) {\n        this.setState({\n          projects: results,\n          total: paging.total,\n          loading: false\n        });\n      }\n    }, this.stopLoading);\n  }\n\n  loadMore = () => {\n    this.setState({ loadingMore: true });\n    const data = { key: this.props.profile.key, page: this.state.page + 1 };\n    getProfileProjects(data).then(({ paging, results }) => {\n      if (this.mounted) {\n        this.setState(state => ({\n          projects: [...state.projects, ...results],\n          total: paging.total,\n          loadingMore: false\n        }));\n      }\n    }, this.stopLoading);\n  };\n\n  handleChangeClick = () => {\n    this.setState({ formOpen: true });\n  };\n\n  closeForm = () => {\n    this.setState({ formOpen: false });\n    this.loadProjects();\n  };\n\n  renderDefault() {\n    return (\n      <div>\n        <span className=\"badge spacer-right\">{translate('default')}</span>\n        {translate('quality_profiles.projects_for_default')}\n      </div>\n    );\n  }\n\n  renderProjects() {\n    if (this.state.loading) {\n      return <i className=\"spinner\" />;\n    }\n\n    const { projects } = this.state;\n\n    if (projects.length === 0) {\n      return <div>{translate('quality_profiles.no_projects_associated_to_profile')}</div>;\n    }\n\n    return (\n      <>\n        <ul>\n          {projects.map(project => (\n            <li className=\"spacer-top js-profile-project\" data-key={project.key} key={project.key}>\n              <Link className=\"link-with-icon\" to={getProjectUrl(project.key)}>\n                <QualifierIcon qualifier=\"TRK\" /> <span>{project.name}</span>\n              </Link>\n            </li>\n          ))}\n        </ul>\n        <ListFooter\n          count={projects.length}\n          loadMore={this.loadMore}\n          ready={!this.state.loadingMore}\n          total={this.state.total}\n        />\n      </>\n    );\n  }\n\n  render() {\n    const { profile } = this.props;\n    return (\n      <div className=\"boxed-group quality-profile-projects\">\n        {profile.actions && profile.actions.associateProjects && (\n          <div className=\"boxed-group-actions\">\n            <Button className=\"js-change-projects\" onClick={this.handleChangeClick}>\n              {translate('quality_profiles.change_projects')}\n            </Button>\n          </div>\n        )}\n\n        <header className=\"boxed-group-header\">\n          <h2>{translate('projects')}</h2>\n        </header>\n\n        <div className=\"boxed-group-inner\">\n          {profile.isDefault ? this.renderDefault() : this.renderProjects()}\n        </div>\n\n        {this.state.formOpen && (\n          <ChangeProjectsForm\n            onClose={this.closeForm}\n            organization={this.props.organization}\n            profile={profile}\n          />\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport HelpTooltip from 'sonar-ui-common/components/controls/HelpTooltip';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getDeprecatedActiveRulesUrl } from '../../../helpers/urls';\n\ninterface Props {\n  activeDeprecatedRules: number;\n  organization: string | null;\n  profile: string;\n}\n\nexport default function ProfileRulesDeprecatedWarning(props: Props) {\n  return (\n    <div className=\"quality-profile-rules-deprecated clearfix\">\n      <span className=\"pull-left\">\n        <span className=\"text-middle\">{translate('quality_profiles.deprecated_rules')}</span>\n        <HelpTooltip\n          className=\"spacer-left\"\n          overlay={translate('quality_profiles.deprecated_rules_description')}\n        />\n      </span>\n      <Link\n        className=\"pull-right\"\n        to={getDeprecatedActiveRulesUrl({ qprofile: props.profile }, props.organization)}>\n        {props.activeDeprecatedRules}\n      </Link>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { getRulesUrl } from '../../../helpers/urls';\n\ninterface Props {\n  count: number | null;\n  organization: string | null;\n  qprofile: string;\n  total: number | null;\n  type: string;\n}\n\nexport default function ProfileRulesRowOfType(props: Props) {\n  const activeRulesUrl = getRulesUrl(\n    { qprofile: props.qprofile, activation: 'true', types: props.type },\n    props.organization\n  );\n  const inactiveRulesUrl = getRulesUrl(\n    { qprofile: props.qprofile, activation: 'false', types: props.type },\n    props.organization\n  );\n  let inactiveCount = null;\n  if (props.count != null && props.total != null) {\n    inactiveCount = props.total - props.count;\n  }\n\n  return (\n    <tr>\n      <td>\n        <span>\n          <IssueTypeIcon className=\"little-spacer-right\" query={props.type} />\n          {translate('issue.type', props.type, 'plural')}\n        </span>\n      </td>\n      <td className=\"thin nowrap text-right\">\n        {props.count != null && (\n          <Link to={activeRulesUrl}>{formatMeasure(props.count, 'SHORT_INT', null)}</Link>\n        )}\n      </td>\n      <td className=\"thin nowrap text-right\">\n        {inactiveCount != null &&\n          (inactiveCount > 0 ? (\n            <Link className=\"small text-muted\" to={inactiveRulesUrl}>\n              {formatMeasure(inactiveCount, 'SHORT_INT', null)}\n            </Link>\n          ) : (\n            <span className=\"note text-muted\">0</span>\n          ))}\n      </td>\n    </tr>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { getRulesUrl } from '../../../helpers/urls';\n\ninterface Props {\n  count: number | null;\n  organization: string | null;\n  qprofile: string;\n  total: number | null;\n}\n\nexport default function ProfileRulesRowTotal(props: Props) {\n  const activeRulesUrl = getRulesUrl(\n    { qprofile: props.qprofile, activation: 'true' },\n    props.organization\n  );\n  const inactiveRulesUrl = getRulesUrl(\n    { qprofile: props.qprofile, activation: 'false' },\n    props.organization\n  );\n  let inactiveCount = null;\n  if (props.count != null && props.total != null) {\n    inactiveCount = props.total - props.count;\n  }\n\n  return (\n    <tr>\n      <td>\n        <strong>{translate('total')}</strong>\n      </td>\n      <td className=\"thin nowrap text-right\">\n        {props.count != null && (\n          <Link to={activeRulesUrl}>\n            <strong>{formatMeasure(props.count, 'SHORT_INT', null)}</strong>\n          </Link>\n        )}\n      </td>\n      <td className=\"thin nowrap text-right\">\n        {inactiveCount != null &&\n          (inactiveCount > 0 ? (\n            <Link className=\"small text-muted\" to={inactiveRulesUrl}>\n              <strong>{formatMeasure(inactiveCount, 'SHORT_INT', null)}</strong>\n            </Link>\n          ) : (\n            <span className=\"note text-muted\">0</span>\n          ))}\n      </td>\n    </tr>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport HelpTooltip from 'sonar-ui-common/components/controls/HelpTooltip';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getRulesUrl } from '../../../helpers/urls';\n\ninterface Props {\n  language: string;\n  organization: string | null;\n  profile: string;\n  sonarway: string;\n  sonarWayMissingRules: number;\n}\n\nexport default function ProfileRulesSonarWayComparison(props: Props) {\n  const url = getRulesUrl(\n    {\n      qprofile: props.profile,\n      activation: 'false',\n      compareToProfile: props.sonarway,\n      languages: props.language\n    },\n    props.organization\n  );\n\n  return (\n    <div className=\"quality-profile-rules-sonarway-missing clearfix\">\n      <span className=\"pull-left\">\n        <span className=\"text-middle\">{translate('quality_profiles.sonarway_missing_rules')}</span>\n        <HelpTooltip\n          className=\"spacer-left\"\n          overlay={translate('quality_profiles.sonarway_missing_rules_description')}\n        />\n      </span>\n      <Link className=\"pull-right\" data-test=\"rules\" to={url}>\n        {props.sonarWayMissingRules}\n      </Link>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { keyBy } from 'lodash';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getQualityProfile } from '../../../api/quality-profiles';\nimport { searchRules, takeFacet } from '../../../api/rules';\nimport DocTooltip from '../../../components/docs/DocTooltip';\nimport { getRulesUrl } from '../../../helpers/urls';\nimport { Profile } from '../types';\nimport ProfileRulesDeprecatedWarning from './ProfileRulesDeprecatedWarning';\nimport ProfileRulesRowOfType from './ProfileRulesRowOfType';\nimport ProfileRulesRowTotal from './ProfileRulesRowTotal';\nimport ProfileRulesSonarWayComparison from './ProfileRulesSonarWayComparison';\n\nconst TYPES = ['BUG', 'VULNERABILITY', 'CODE_SMELL', 'SECURITY_HOTSPOT'];\n\ninterface Props {\n  organization: string | null;\n  profile: Profile;\n}\n\ninterface ByType {\n  val: string;\n  count: number | null;\n}\n\ninterface State {\n  activatedTotal: number | null;\n  activatedByType: T.Dict<ByType>;\n  allByType: T.Dict<ByType>;\n  compareToSonarWay: { profile: string; profileName: string; missingRuleCount: number } | null;\n  total: number | null;\n}\n\nexport default class ProfileRules extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  state: State = {\n    activatedTotal: null,\n    activatedByType: keyBy(\n      TYPES.map(t => ({ val: t, count: null })),\n      'val'\n    ),\n    allByType: keyBy(\n      TYPES.map(t => ({ val: t, count: null })),\n      'val'\n    ),\n    compareToSonarWay: null,\n    total: null\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.loadRules();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.profile.key !== this.props.profile.key) {\n      this.loadRules();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadProfile() {\n    if (this.props.profile.isBuiltIn) {\n      return Promise.resolve(null);\n    }\n    return getQualityProfile({\n      compareToSonarWay: true,\n      profile: this.props.profile\n    });\n  }\n\n  loadAllRules() {\n    return searchRules({\n      languages: this.props.profile.language,\n      facets: 'types',\n      organization: this.props.organization || undefined,\n      ps: 1\n    });\n  }\n\n  loadActivatedRules() {\n    return searchRules({\n      activation: 'true',\n      facets: 'types',\n      organization: this.props.organization || undefined,\n      ps: 1,\n      qprofile: this.props.profile.key\n    });\n  }\n\n  loadRules() {\n    Promise.all([this.loadAllRules(), this.loadActivatedRules(), this.loadProfile()]).then(\n      responses => {\n        if (this.mounted) {\n          const [allRules, activatedRules, showProfile] = responses;\n          this.setState({\n            activatedTotal: activatedRules.total,\n            allByType: keyBy<ByType>(takeFacet(allRules, 'types'), 'val'),\n            activatedByType: keyBy<ByType>(takeFacet(activatedRules, 'types'), 'val'),\n            compareToSonarWay: showProfile && showProfile.compareToSonarWay,\n            total: allRules.total\n          });\n        }\n      }\n    );\n  }\n\n  getRulesCountForType(type: string) {\n    return this.state.activatedByType && this.state.activatedByType[type]\n      ? this.state.activatedByType[type].count\n      : null;\n  }\n\n  getRulesTotalForType(type: string) {\n    return this.state.allByType && this.state.allByType[type]\n      ? this.state.allByType[type].count\n      : null;\n  }\n\n  render() {\n    const { organization, profile } = this.props;\n    const { compareToSonarWay } = this.state;\n    const activateMoreUrl = getRulesUrl(\n      { qprofile: profile.key, activation: 'false' },\n      organization\n    );\n    const { actions = {} } = profile;\n\n    return (\n      <div className=\"boxed-group quality-profile-rules\">\n        <div className=\"quality-profile-rules-distribution\">\n          <table className=\"data condensed\">\n            <thead>\n              <tr>\n                <th>\n                  <h2>{translate('rules')}</h2>\n                </th>\n                <th>{translate('active')}</th>\n                <th>{translate('inactive')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              <ProfileRulesRowTotal\n                count={this.state.activatedTotal}\n                organization={organization}\n                qprofile={profile.key}\n                total={this.state.total}\n              />\n              {TYPES.map(type => (\n                <ProfileRulesRowOfType\n                  count={this.getRulesCountForType(type)}\n                  key={type}\n                  organization={organization}\n                  qprofile={profile.key}\n                  total={this.getRulesTotalForType(type)}\n                  type={type}\n                />\n              ))}\n            </tbody>\n          </table>\n\n          {actions.edit && !profile.isBuiltIn && (\n            <div className=\"text-right big-spacer-top\">\n              <Link className=\"button js-activate-rules\" to={activateMoreUrl}>\n                {translate('quality_profiles.activate_more')}\n              </Link>\n            </div>\n          )}\n\n          {/* if a user is allowed to `copy` a profile if they are a global or organization admin */}\n          {/* this user could potentially active more rules if the profile was not built-in */}\n          {/* in such cases it's better to show the button but disable it with a tooltip */}\n          {actions.copy && profile.isBuiltIn && (\n            <div className=\"text-right big-spacer-top\">\n              <DocTooltip\n                doc={import(\n                  /* webpackMode: \"eager\" */ 'Docs/tooltips/quality-profiles/activate-rules-in-built-in-profile.md'\n                )}>\n                <Button className=\"disabled js-activate-rules\">\n                  {translate('quality_profiles.activate_more')}\n                </Button>\n              </DocTooltip>\n            </div>\n          )}\n        </div>\n        {profile.activeDeprecatedRuleCount > 0 && (\n          <ProfileRulesDeprecatedWarning\n            activeDeprecatedRules={profile.activeDeprecatedRuleCount}\n            organization={organization}\n            profile={profile.key}\n          />\n        )}\n        {compareToSonarWay != null && compareToSonarWay.missingRuleCount > 0 && (\n          <ProfileRulesSonarWayComparison\n            language={profile.language}\n            organization={organization}\n            profile={profile.key}\n            sonarWayMissingRules={compareToSonarWay.missingRuleCount}\n            sonarway={compareToSonarWay.profile}\n          />\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Exporter, Profile } from '../types';\nimport ProfileExporters from './ProfileExporters';\nimport ProfileInheritance from './ProfileInheritance';\nimport ProfilePermissions from './ProfilePermissions';\nimport ProfileProjects from './ProfileProjects';\nimport ProfileRules from './ProfileRules';\n\ninterface Props {\n  exporters: Exporter[];\n  organization: string | null;\n  profile: Profile;\n  profiles: Profile[];\n  updateProfiles: () => Promise<void>;\n}\n\nexport default function ProfileDetails(props: Props) {\n  const { organization, profile } = props;\n  return (\n    <div>\n      <div className=\"quality-profile-grid\">\n        <div className=\"quality-profile-grid-left\">\n          <ProfileRules organization={organization} profile={profile} />\n          <ProfileExporters\n            exporters={props.exporters}\n            organization={organization}\n            profile={profile}\n          />\n          {profile.actions && profile.actions.edit && !profile.isBuiltIn && (\n            <ProfilePermissions organization={organization || undefined} profile={profile} />\n          )}\n        </div>\n        <div className=\"quality-profile-grid-right\">\n          <ProfileInheritance\n            organization={organization}\n            profile={profile}\n            profiles={props.profiles}\n            updateProfiles={props.updateProfiles}\n          />\n          <ProfileProjects organization={organization} profile={profile} />\n        </div>\n      </div>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport HelpTooltip from 'sonar-ui-common/components/controls/HelpTooltip';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport { filterContent } from '../../helpers/markdown';\n\nconst DocMarkdownBlock = lazyLoadComponent(() => import('./DocMarkdownBlock'), 'DocMarkdownBlock');\n\ninterface Props {\n  className?: string;\n  children?: React.ReactNode;\n  // Use as `import(/* webpackMode: \"eager\" */ 'Docs/tooltips/foo/bar.md')`\n  doc: Promise<{ default: string }>;\n  overlayProps?: T.Dict<string>;\n}\n\ninterface State {\n  content?: string;\n}\n\nexport default class DocTooltip extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = {};\n\n  componentDidMount() {\n    this.mounted = true;\n    this.props.doc.then(\n      ({ default: content }) => {\n        if (this.mounted) {\n          this.setState({ content });\n        }\n      },\n      () => {}\n    );\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  render() {\n    return this.state.content ? (\n      <HelpTooltip\n        className={this.props.className}\n        overlay={\n          <div className=\"abs-width-300\">\n            <DocMarkdownBlock\n              childProps={this.props.overlayProps}\n              className=\"cut-margins\"\n              content={filterContent(this.state.content)}\n              isTooltip={true}\n            />\n          </div>\n        }>\n        {this.props.children}\n      </HelpTooltip>\n    ) : (\n      this.props.children || null\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { map } from 'lodash';\nimport { csvEscape } from 'sonar-ui-common/helpers/csv';\nimport { getJSON, post, postJSON, RequestData } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { Exporter, ProfileChangelogEvent } from '../apps/quality-profiles/types';\n\nexport interface ProfileActions {\n  associateProjects?: boolean;\n  copy?: boolean;\n  delete?: boolean;\n  edit?: boolean;\n  setAsDefault?: boolean;\n}\n\nexport interface Actions {\n  create?: boolean;\n}\n\nexport interface Profile {\n  actions?: ProfileActions;\n  key: string;\n  name: string;\n  language: string;\n  languageName: string;\n  isInherited?: boolean;\n  parentKey?: string;\n  parentName?: string;\n  isDefault?: boolean;\n  activeRuleCount: number;\n  activeDeprecatedRuleCount: number;\n  rulesUpdatedAt?: string;\n  lastUsed?: string;\n  userUpdatedAt?: string;\n  organization: string;\n  isBuiltIn?: boolean;\n  projectCount?: number;\n}\n\nexport interface SearchQualityProfilesParameters {\n  defaults?: boolean;\n  language?: string;\n  organization?: string;\n  project?: string;\n  qualityProfile?: string;\n}\n\nexport interface SearchQualityProfilesResponse {\n  actions?: Actions;\n  profiles: Profile[];\n}\n\nexport function searchQualityProfiles(\n  parameters: SearchQualityProfilesParameters\n): Promise<SearchQualityProfilesResponse> {\n  return getJSON('/api/qualityprofiles/search', parameters).catch(throwGlobalError);\n}\n\nexport function getQualityProfile({\n  compareToSonarWay,\n  profile: { key }\n}: {\n  compareToSonarWay?: boolean;\n  profile: Profile;\n}): Promise<any> {\n  return getJSON('/api/qualityprofiles/show', { compareToSonarWay, key });\n}\n\nexport function createQualityProfile(data: RequestData): Promise<any> {\n  return postJSON('/api/qualityprofiles/create', data).catch(throwGlobalError);\n}\n\nexport function restoreQualityProfile(data: RequestData): Promise<any> {\n  return postJSON('/api/qualityprofiles/restore', data).catch(throwGlobalError);\n}\n\nexport interface ProfileProject {\n  id: number;\n  key: string;\n  name: string;\n  selected: boolean;\n}\n\nexport function getProfileProjects(\n  data: RequestData\n): Promise<{ more: boolean; paging: T.Paging; results: ProfileProject[] }> {\n  return getJSON('/api/qualityprofiles/projects', data).catch(throwGlobalError);\n}\n\nexport function getProfileInheritance({\n  language,\n  name: qualityProfile,\n  organization\n}: Profile): Promise<{\n  ancestors: T.ProfileInheritanceDetails[];\n  children: T.ProfileInheritanceDetails[];\n  profile: T.ProfileInheritanceDetails;\n}> {\n  return getJSON('/api/qualityprofiles/inheritance', {\n    language,\n    qualityProfile,\n    organization\n  }).catch(throwGlobalError);\n}\n\nexport function setDefaultProfile({ language, name: qualityProfile, organization }: Profile) {\n  return post('/api/qualityprofiles/set_default', {\n    language,\n    qualityProfile,\n    organization\n  });\n}\n\nexport function renameProfile(key: string, name: string) {\n  return post('/api/qualityprofiles/rename', { key, name }).catch(throwGlobalError);\n}\n\nexport function copyProfile(fromKey: string, toName: string): Promise<any> {\n  return postJSON('/api/qualityprofiles/copy', { fromKey, toName }).catch(throwGlobalError);\n}\n\nexport function deleteProfile({ language, name: qualityProfile, organization }: Profile) {\n  return post('/api/qualityprofiles/delete', { language, qualityProfile, organization }).catch(\n    throwGlobalError\n  );\n}\n\nexport function changeProfileParent(\n  { language, name: qualityProfile, organization }: Profile,\n  parentProfile?: Profile\n) {\n  return post('/api/qualityprofiles/change_parent', {\n    language,\n    qualityProfile,\n    organization,\n    parentQualityProfile: parentProfile ? parentProfile.name : undefined\n  }).catch(throwGlobalError);\n}\n\nexport function getQualityProfileBackupUrl({\n  language,\n  name: qualityProfile,\n  organization\n}: Profile) {\n  const queryParams = Object.entries({ language, qualityProfile, organization })\n    .map(([key, value]) => `${key}=${encodeURIComponent(value)}`)\n    .join('&');\n  return `/api/qualityprofiles/backup?${queryParams}`;\n}\n\nexport function getQualityProfileExporterUrl(\n  { key: exporterKey }: Exporter,\n  { language, name: qualityProfile, organization }: Profile\n) {\n  const queryParams = Object.entries({ exporterKey, language, qualityProfile, organization })\n    .map(([key, value]) => `${key}=${encodeURIComponent(value)}`)\n    .join('&');\n  return `/api/qualityprofiles/export?${queryParams}`;\n}\n\nexport function getImporters(): Promise<\n  Array<{ key: string; languages: Array<string>; name: string }>\n> {\n  return getJSON('/api/qualityprofiles/importers').then(r => r.importers, throwGlobalError);\n}\n\nexport function getExporters(): Promise<any> {\n  return getJSON('/api/qualityprofiles/exporters').then(r => r.exporters);\n}\n\nexport function getProfileChangelog(\n  since: any,\n  to: any,\n  { language, name: qualityProfile, organization }: Profile,\n  page?: number\n): Promise<{\n  events: ProfileChangelogEvent[];\n  p: number;\n  ps: number;\n  total: number;\n}> {\n  return getJSON('/api/qualityprofiles/changelog', {\n    since,\n    to,\n    language,\n    qualityProfile,\n    organization,\n    p: page\n  });\n}\n\nexport interface CompareResponse {\n  left: { name: string };\n  right: { name: string };\n  inLeft: Array<{ key: string; name: string; severity: string }>;\n  inRight: Array<{ key: string; name: string; severity: string }>;\n  modified: Array<{\n    key: string;\n    name: string;\n    left: { params: T.Dict<string>; severity: string };\n    right: { params: T.Dict<string>; severity: string };\n  }>;\n}\n\nexport function compareProfiles(leftKey: string, rightKey: string): Promise<CompareResponse> {\n  return getJSON('/api/qualityprofiles/compare', { leftKey, rightKey });\n}\n\nexport function associateProject(\n  { language, name: qualityProfile, organization }: Profile,\n  project: string\n) {\n  return post('/api/qualityprofiles/add_project', {\n    language,\n    qualityProfile,\n    organization,\n    project\n  }).catch(throwGlobalError);\n}\n\nexport function dissociateProject(\n  { language, name: qualityProfile, organization }: Profile,\n  project: string\n) {\n  return post('/api/qualityprofiles/remove_project', {\n    language,\n    qualityProfile,\n    organization,\n    project\n  }).catch(throwGlobalError);\n}\n\nexport interface SearchUsersGroupsParameters {\n  language: string;\n  organization?: string;\n  qualityProfile: string;\n  q?: string;\n  selected?: 'all' | 'selected' | 'deselected';\n}\n\ninterface SearchUsersResponse {\n  users: T.UserSelected[];\n  paging: T.Paging;\n}\n\nexport function searchUsers(parameters: SearchUsersGroupsParameters): Promise<SearchUsersResponse> {\n  return getJSON('/api/qualityprofiles/search_users', parameters).catch(throwGlobalError);\n}\n\nexport interface SearchGroupsResponse {\n  groups: Array<{ name: string }>;\n  paging: T.Paging;\n}\n\nexport function searchGroups(\n  parameters: SearchUsersGroupsParameters\n): Promise<SearchGroupsResponse> {\n  return getJSON('/api/qualityprofiles/search_groups', parameters).catch(throwGlobalError);\n}\n\nexport interface AddRemoveUserParameters {\n  language: string;\n  login: string;\n  organization?: string;\n  qualityProfile: string;\n}\n\nexport function addUser(parameters: AddRemoveUserParameters): Promise<void | Response> {\n  return post('/api/qualityprofiles/add_user', parameters).catch(throwGlobalError);\n}\n\nexport function removeUser(parameters: AddRemoveUserParameters): Promise<void | Response> {\n  return post('/api/qualityprofiles/remove_user', parameters).catch(throwGlobalError);\n}\n\nexport interface AddRemoveGroupParameters {\n  group: string;\n  language: string;\n  organization?: string;\n  qualityProfile: string;\n}\n\nexport function addGroup(parameters: AddRemoveGroupParameters): Promise<void | Response> {\n  return post('/api/qualityprofiles/add_group', parameters).catch(throwGlobalError);\n}\n\nexport function removeGroup(parameters: AddRemoveGroupParameters): Promise<void | Response> {\n  return post('/api/qualityprofiles/remove_group', parameters).catch(throwGlobalError);\n}\n\nexport interface BulkActivateParameters {\n  activation?: boolean;\n  active_severities?: string;\n  asc?: boolean;\n  available_since?: string;\n  compareToProfile?: string;\n  inheritance?: string;\n  is_template?: string;\n  languages?: string;\n  organization: string | undefined;\n  q?: string;\n  qprofile?: string;\n  repositories?: string;\n  rule_key?: string;\n  s?: string;\n  severities?: string;\n  statuses?: string;\n  tags?: string;\n  targetKey: string;\n  targetSeverity?: string;\n  template_key?: string;\n  types?: string;\n}\n\nexport function bulkActivateRules(data: BulkActivateParameters) {\n  return postJSON('/api/qualityprofiles/activate_rules', data);\n}\n\nexport function bulkDeactivateRules(data: BulkActivateParameters) {\n  return postJSON('/api/qualityprofiles/deactivate_rules', data);\n}\n\nexport function activateRule(data: {\n  key: string;\n  organization: string | undefined;\n  params?: T.Dict<string>;\n  reset?: boolean;\n  rule: string;\n  severity?: string;\n}) {\n  const params =\n    data.params && map(data.params, (value, key) => `${key}=${csvEscape(value)}`).join(';');\n  return post('/api/qualityprofiles/activate_rule', { ...data, params }).catch(throwGlobalError);\n}\n\nexport function deactivateRule(data: {\n  key: string;\n  organization: string | undefined;\n  rule: string;\n}) {\n  return post('/api/qualityprofiles/deactivate_rule', data).catch(throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// keep this file in JavaScript, because it is used by a webpack loader\nmodule.exports = { getFrontMatter, separateFrontMatter, filterContent };\n\nfunction getFrontMatter(content) {\n  const lines = content.split('\\n');\n  const position = getFrontMatterPosition(lines);\n  return position ? parseFrontMatter(lines.slice(position.firstLine + 1, position.lastLine)) : {};\n}\n\nfunction separateFrontMatter(content) {\n  const lines = content.split('\\n');\n  const position = getFrontMatterPosition(lines);\n  if (position) {\n    const frontmatter = parseFrontMatter(lines.slice(position.firstLine + 1, position.lastLine));\n    const content = lines.slice(position.lastLine + 1).join('\\n');\n    return { frontmatter, content };\n  } else {\n    return { frontmatter: {}, content };\n  }\n}\n\nfunction getFrontMatterPosition(lines) {\n  let firstLine;\n  let lastLine;\n  for (let i = 0; i < lines.length; i++) {\n    const line = lines[i];\n    if (line.trim() === '---') {\n      if (firstLine === undefined) {\n        firstLine = i;\n      } else {\n        lastLine = i;\n        break;\n      }\n    }\n  }\n  return lastLine !== undefined ? { firstLine, lastLine } : undefined;\n}\n\nfunction parseFrontMatter(lines) {\n  const data = {};\n  for (let i = 0; i < lines.length; i++) {\n    const tokens = lines[i].split(':').map(x => x.trim());\n    if (tokens.length === 2) {\n      data[tokens[0]] = tokens[1];\n    }\n  }\n  return data;\n}\n\n/**\n * @param {string} content\n * @returns {string}\n */\nfunction filterContent(content) {\n  const regexBase = '<!-- \\\\/?(sonarqube|sonarcloud|static) -->';\n  const { isSonarCloud, getInstance } = require('./system');\n  const contentWithInstance = content.replace(/{instance}/gi, getInstance());\n  const contentWithoutStatic = cutConditionalContent(contentWithInstance, 'static');\n  const filteredContent = isSonarCloud()\n    ? cutConditionalContent(contentWithoutStatic, 'sonarqube')\n    : cutConditionalContent(contentWithoutStatic, 'sonarcloud');\n  return filteredContent\n    .replace(new RegExp(`^${regexBase}(\\n|\\r|\\r\\n|$)`, 'gm'), '') // First, remove single-line ones, including ending carriage-returns.\n    .replace(new RegExp(`${regexBase}`, 'g'), ''); // Now remove all remaining ones.\n}\n\n/**\n * @param {string} content\n * @param {string} tag\n * @returns {string}\n */\nfunction cutConditionalContent(content, tag) {\n  const beginning = `<!-- ${tag} -->`;\n  const ending = `<!-- /${tag} -->`;\n\n  let newContent = content;\n  let start = newContent.indexOf(beginning);\n  let end = newContent.indexOf(ending);\n  while (start !== -1 && end !== -1) {\n    if (start < end) {\n      newContent = newContent.substring(0, start) + newContent.substring(end + ending.length);\n    } else {\n      // When conditional tags are incorrectly used we log an error, strip them out and pass to the next pair of tags\n      // eslint-disable-next-line no-console\n      console.error(\n        new Error(\n          `Documentation - incorrect usage of conditional formatting tags here: \"${newContent.substring(\n            end,\n            start + beginning.length\n          )}\"`\n        )\n      );\n      newContent =\n        newContent.substring(0, end) +\n        newContent.substring(end + ending.length, start) +\n        newContent.substring(start + beginning.length);\n    }\n    start = newContent.indexOf(beginning);\n    end = newContent.indexOf(ending);\n  }\n\n  return newContent;\n}\n"],"sourceRoot":""}