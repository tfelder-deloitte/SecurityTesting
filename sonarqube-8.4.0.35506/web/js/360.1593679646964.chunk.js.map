{"version":3,"sources":["webpack:///./node_modules/sonar-ui-common/components/icons/WarningIcon.js","webpack:///./src/main/js/components/common/AnalysisWarningsModal.tsx"],"names":["__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","defineProperty","exports","value","React","Icon_1","default","_a","fill","iconProps","createElement","ThemedIcon","theme","d","style","colors","warningIconColor","props","mounted","keepLineBreaks","warning","includes","split","map","line","index","key","state","loading","warnings","componentDidMount","taskId","loadWarnings","componentDidUpdate","prevProps","setState","componentWillUnmount","then","render","header","contentLabel","onRequestClose","onClose","className","onClick"],"mappings":"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","file":"js/360.1593679646964.chunk.js","sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = require(\"react\");\nvar Icon_1 = require(\"./Icon\");\nfunction WarningIcon(_a) {\n    var fill = _a.fill, iconProps = __rest(_a, [\"fill\"]);\n    return (React.createElement(Icon_1.ThemedIcon, __assign({}, iconProps), function (_a) {\n        var theme = _a.theme;\n        return (React.createElement(\"path\", { d: \"M9 12.242v-1.484c0-.14-.11-.258-.25-.258h-1.5c-.14 0-.25.117-.25.258v1.484c0 .14.11.258.25.258h1.5c.14 0 .25-.117.25-.258zM8.984 9.32l.141-3.586a.189.189 0 0 0-.078-.148C9 5.546 8.93 5.5 8.859 5.5H7.141c-.07 0-.141.047-.188.086-.055.039-.078.117-.078.164l.133 3.57c0 .102.117.18.265.18H8.72c.14 0 .258-.078.265-.18zm-.109-7.297l6 11A1 1 0 0 1 14 14.5H2a1 1 0 0 1-.875-1.477l6-11a.994.994 0 0 1 1.75 0z\", style: { fill: fill || theme.colors.warningIconColor } }));\n    }));\n}\nexports.default = WarningIcon;\n//# sourceMappingURL=WarningIcon.js.map","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ResetButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport WarningIcon from 'sonar-ui-common/components/icons/WarningIcon';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getTask } from '../../api/ce';\n\ninterface Props {\n  onClose: () => void;\n  taskId?: string;\n  warnings?: string[];\n}\n\ninterface State {\n  loading: boolean;\n  warnings: string[];\n}\n\nexport default class AnalysisWarningsModal extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = { loading: !props.warnings, warnings: props.warnings || [] };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    if (!this.props.warnings && this.props.taskId) {\n      this.loadWarnings(this.props.taskId);\n    }\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    const { taskId, warnings } = this.props;\n    if (!warnings && taskId && prevProps.taskId !== taskId) {\n      this.loadWarnings(taskId);\n    } else if (warnings && prevProps.warnings !== warnings) {\n      this.setState({ warnings });\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadWarnings(taskId: string) {\n    this.setState({ loading: true });\n    getTask(taskId, ['warnings']).then(\n      ({ warnings = [] }) => {\n        if (this.mounted) {\n          this.setState({ loading: false, warnings });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  }\n\n  keepLineBreaks = (warning: string) => {\n    if (warning.includes('\\n')) {\n      const lines = warning.split('\\n');\n      return (\n        <>\n          {lines.map((line, index) => (\n            <React.Fragment key={index}>\n              {line}\n              {index < lines.length - 1 && <br />}\n            </React.Fragment>\n          ))}\n        </>\n      );\n    } else {\n      return warning;\n    }\n  };\n\n  render() {\n    const header = translate('warnings');\n    return (\n      <Modal contentLabel={header} onRequestClose={this.props.onClose}>\n        <header className=\"modal-head\">\n          <h2>{header}</h2>\n        </header>\n\n        <div className=\"modal-body modal-container js-analysis-warnings\">\n          <DeferredSpinner loading={this.state.loading}>\n            {this.state.warnings.map((warning, index) => (\n              <div className=\"panel panel-vertical\" key={index}>\n                <WarningIcon className=\"pull-left spacer-right\" />\n                <div className=\"overflow-hidden markdown\">{this.keepLineBreaks(warning)}</div>\n              </div>\n            ))}\n          </DeferredSpinner>\n        </div>\n\n        <footer className=\"modal-foot\">\n          <ResetButtonLink className=\"js-modal-close\" onClick={this.props.onClose}>\n            {translate('close')}\n          </ResetButtonLink>\n        </footer>\n      </Modal>\n    );\n  }\n}\n"],"sourceRoot":""}