{"version":3,"sources":["webpack:///./src/main/js/components/issue/components/IssueChangelogDiff.tsx","webpack:///./src/main/js/components/common/LocationIndex.css?e012","webpack:///./src/main/js/components/common/LocationIndex.css","webpack:///./src/main/js/components/common/LocationMessage.tsx","webpack:///./src/main/js/components/common/LocationMessage.css?8760","webpack:///./src/main/js/components/common/LocationMessage.css","webpack:///./src/main/js/components/issue/Issue.css?a142","webpack:///./src/main/js/components/issue/Issue.css","webpack:///./node_modules/sonar-ui-common/components/icons/StatusIcon.js","webpack:///./src/main/js/components/issue/actions.ts","webpack:///./src/main/js/components/common/SelectListItem.tsx","webpack:///./src/main/js/components/common/SelectList.tsx","webpack:///./src/main/js/components/issue/popups/SetAssigneePopup.tsx","webpack:///./src/main/js/components/issue/components/IssueAssign.tsx","webpack:///./src/main/js/components/issue/popups/CommentPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueCommentAction.tsx","webpack:///./src/main/js/components/issue/popups/SetSeverityPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueSeverity.tsx","webpack:///./src/main/js/components/issue/popups/SetIssueTagsPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueTags.tsx","webpack:///./src/main/js/components/issue/popups/SetTransitionPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueTransition.tsx","webpack:///./src/main/js/components/issue/popups/SetTypePopup.tsx","webpack:///./src/main/js/components/issue/components/IssueType.tsx","webpack:///./src/main/js/components/issue/components/IssueActionsBar.tsx","webpack:///./src/main/js/components/issue/popups/CommentDeletePopup.tsx","webpack:///./src/main/js/components/issue/components/IssueCommentLine.tsx","webpack:///./src/main/js/components/issue/popups/ChangelogPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueChangelog.tsx","webpack:///./src/main/js/components/issue/components/IssueMessage.tsx","webpack:///./src/main/js/components/issue/popups/SimilarIssuesPopup.tsx","webpack:///./src/main/js/components/issue/components/SimilarIssuesFilter.tsx","webpack:///./src/main/js/components/issue/components/IssueTitleBar.tsx","webpack:///./src/main/js/components/issue/IssueView.tsx","webpack:///./src/main/js/components/issue/Issue.tsx","webpack:///./node_modules/sonar-ui-common/components/icons/ListIcon.js","webpack:///./src/main/js/components/SourceViewer/helpers/loadIssues.ts","webpack:///./src/main/js/components/SourceViewer/SourceViewerCode.tsx","webpack:///./src/main/js/components/SourceViewer/components/MeasuresOverlayMeasure.tsx","webpack:///./src/main/js/components/SourceViewer/components/MeasuresOverlay.tsx","webpack:///./src/main/js/components/SourceViewer/SourceViewerHeader.tsx","webpack:///./src/main/js/components/SourceViewer/SourceViewerBase.tsx","webpack:///./src/main/js/components/SourceViewer/styles.css?8096","webpack:///./src/main/js/components/SourceViewer/styles.css","webpack:///./node_modules/lodash/map.js","webpack:///./node_modules/sonar-ui-common/components/intl/DateTimeFormatter.js","webpack:///./node_modules/sonar-ui-common/components/intl/DateFromNow.js","webpack:///./node_modules/sonar-ui-common/components/ui/Level.js","webpack:///./src/main/js/components/shared/SeverityHelper.tsx","webpack:///./node_modules/sonar-ui-common/components/ui/Rating.js","webpack:///./src/main/js/components/measure/utils.ts","webpack:///./src/main/js/components/measure/Measure.tsx","webpack:///./node_modules/sonar-ui-common/components/ui/Level.css?4f58","webpack:///./node_modules/sonar-ui-common/components/ui/Level.css","webpack:///./src/main/js/components/tags/TagsList.css?d861","webpack:///./src/main/js/helpers/periods.ts","webpack:///./src/main/js/components/common/MultiSelectOption.tsx","webpack:///./src/main/js/components/common/MultiSelect.tsx","webpack:///./src/main/js/components/tags/TagsList.tsx","webpack:///./src/main/js/components/common/MarkdownTips.tsx","webpack:///./src/main/js/components/tags/TagsList.css","webpack:///./node_modules/sonar-ui-common/components/ui/Rating.css?a2dd","webpack:///./node_modules/sonar-ui-common/components/ui/Rating.css","webpack:///./src/main/js/components/tags/TagsSelector.tsx","webpack:///./src/main/js/components/ui/CoverageRating.tsx","webpack:///./src/main/js/components/common/LocationIndex.tsx","webpack:///./src/main/js/components/shared/StatusHelper.tsx","webpack:///./node_modules/sonar-ui-common/components/ui/DuplicationsRating.js","webpack:///./node_modules/sonar-ui-common/components/ui/DuplicationsRating.css?8cf1","webpack:///./node_modules/sonar-ui-common/components/ui/DuplicationsRating.css"],"names":["IssueChangelogDiff","message","diff","key","oldValue","newValue","includes","api","content","__esModule","default","module","i","options","exported","locals","exports","___CSS_LOADER_API_IMPORT___","push","LocationMessage","props","className","selected","children","__assign","this","Object","assign","t","s","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","defineProperty","value","React","Icon_1","statusIcons","open","OpenStatusIcon","confirmed","ConfirmedStatusIcon","reopened","iconProps","createElement","ThemedIcon","_a","theme","d","style","fill","colors","blue","resolved","ResolvedStatusIcon","closed","baseFontColor","to_review","in_review","reviewed","status","Icon","toLowerCase","onChange","resultPromise","oldIssue","newIssue","optimisticUpdate","undefined","then","response","issue","components","users","rules","handleSelect","event","preventDefault","onSelect","item","handleHover","onHover","renderLink","active","href","onClick","onFocus","onMouseOver","render","overlay","title","placement","attachShortcuts","previousKeyScope","previousFilter","currentKeyScope","tagName","isInput","keyCode","setState","selectNextElement","selectPreviousElement","state","detachShortcuts","idx","items","renderChild","child","type","currentItem","componentDidMount","componentDidUpdate","prevProps","componentWillUnmount","hasChildren","count","map","searchMembers","query","organization","projectOrganization","q","ps","handleSearchResult","searchUsers","activeUsers","filter","currentUser","login","handleSearchChange","defaultUsersArray","name","Dropdown","noPadding","autoFocus","minLength","placeholder","user","Avatar","hash","avatar","size","marginLeft","withCurrentUser","toggleAssign","togglePopup","handleClose","renderAssignee","assigneeName","assignee","assigneeAvatar","assigneeActive","canAssign","closeOnEscape","onRequestClose","isOpen","onAssign","handleCommentChange","textComment","target","handleCommentClick","trim","onComment","handleCancelClick","toggleComment","handleKeyboard","metaKey","ctrlKey","stopPropagation","comment","markdown","autoTriggered","onKeyDown","rows","disabled","MarkdownTips","addComment","text","issueKey","closeOnClickOutside","currentPopup","commentAutoTriggered","commentPlaceholder","SEVERITY","SetSeverityPopup","severity","toggleSetSeverity","setSeverity","setIssueProperty","canSetSeverity","SeverityHelper","mounted","searchResult","onSearch","Math","min","selectedTags","tags","tag","setTags","onUnselect","availableTags","BottomRight","TagsSelector","listSize","toggleSetTags","join","canSetTags","TagsList","allowUpdate","SetTransitionPopup","fromHotspot","transitions","isManualVulnerability","transition","description","setTransition","toggleSetTransition","hasTransitions","StatusHelper","resolution","TYPES","SetTypePopup","toggleSetType","setType","canSetType","property","popup","apiCall","handleTransition","actions","canComment","isSecurityHotspot","effort","CommentDeletePopup","onDelete","openPopup","handleEdit","onEdit","toggleEditPopup","handleDelete","toggleDeletePopup","popupName","force","prevState","closePopups","author","authorName","displayName","authorActive","authorAvatar","dangerouslySetInnerHTML","__html","htmlText","date","createdAt","updatable","changelog","loadChangelog","creationDate","userName","isUserActive","diffs","toggleChangelog","handleClick","mouseEnterDelay","IssueMessage","engine","engineName","manualVulnerability","ruleKey","ruleEngine","onOpenRule","onFilter","subProject","ruleName","qualifier","projectName","subProjectName","componentQualifier","componentLongName","handleFilter","IssueTitleBar","hasSimilarIssuesFilter","locationsCount","secondaryLocations","flows","reduce","sum","locations","locationsBadge","LocationIndex","displayLocations","displayLocationsCount","issueUrl","project","branchLike","issues","types","Consumer","externalRulesRepoNames","openRule","externalRuleEngine","rule","textRange","endLine","displayLocationsLink","to","handleCheck","onCheck","isClickable","editComment","deleteComment","hasCheckbox","issueClass","hotspot","role","tabIndex","comments","checked","node","toUpperCase","parentElement","onPopupToggle","handleAssignement","bindShortcuts","componentWillUpdate","nextProps","unbindShortcuts","defaultProps","_b","loadPageAndNext","toLine","page","pageSize","r","loadPage","lastIssue","nextIssues","component","_fromLine","additionalFields","componentKeys","buildQuery","Promise","resolve","EMPTY_ARRAY","ZERO_LINE","code","duplicated","isNew","line","getDuplicationsForLine","duplicationsByLine","getIssuesForLine","issuesByLine","getIssueLocationsForLine","issueLocationsByLine","renderLine","index","displayCoverage","displayDuplications","displayIssues","highlightedLocationMessage","highlightedLocations","selectedIssue","sources","secondaryIssueLocations","duplicationsCount","duplications","issuesForLine","Line","displayAllIssues","displayIssueLocationsCount","displayIssueLocationsLink","displayLocationMarkers","highlighted","highlightedLine","highlightedSymbols","symbolsByLine","issueLocations","issuePopup","last","hasSourcesAfter","loadDuplications","onIssueChange","onIssuePopupToggle","onIssueSelect","onIssueUnselect","onIssuesClose","onIssuesOpen","onLocationSelect","onSymbolClick","openIssues","openIssuesByLine","previousLine","renderDuplicationPopup","scroll","some","coverageStatus","hasFileIssues","hasSourcesBefore","loadingSourcesBefore","loadSourcesBefore","loadingSourcesAfter","loadSourcesAfter","MeasuresOverlayMeasure","measure","metric","bugs","vulnerabilities","code_smells","Measure","metricKey","metricType","small","loading","measures","showAllMeasures","fetchData","all","fetchMeasures","fetchIssues","facets","metrics","metricKeys","sourceViewerFile","withMetrics","severitiesFacet","find","f","tagsFacet","typesFacet","values","handleAllMeasuresClick","currentTarget","blur","renderMeasure","renderLines","lines","ncloc","comment_lines","comment_lines_density","cognitive_complexity","complexity","function_complexity","renderBigMeasure","renderIssues","violations","sqale_index","val","renderCoverage","coverage","CoverageRating","uncovered_lines","lines_to_cover","uncovered_conditions","conditions_to_cover","renderDuplications","duplicated_lines_density","muted","Number","duplicated_blocks","duplicated_lines","renderTests","tests","test_success_density","test_failures","test_errors","skipped_tests","test_execution_time","renderDomain","domain","renderAllMeasures","domains","domainKeys","keys","odd","_","even","header","contentLabel","onClose","path","METRIC_KEY_FOR_ISSUE_TYPE","BUG","VULNERABILITY","CODE_SMELL","SECURITY_HOTSPOT","measuresOverlay","handleShowMeasuresClick","handleMeasuresOverlayClose","openInWorkspace","openComponent","renderIssueMeasures","componentMeasures","params","fileUuids","uuid","m","showMeasures","unitTestsOrLines","TestFile","rawSourcesLink","copyValue","duplicationDensity","rel","overlayPlacement","loadSources","reject","from","aroundLine","max","LINES","propsLoadSources","firstSourceLine","loadIssues","computeCoverageStatus","lastSourceLine","fromLine","slice","duplicatedFiles","files","handleIssuePopupToggle","samePopup","handleSymbolClick","symbols","handleIssueSelect","handleIssueUnselect","handleOpenIssues","handleCloseIssues","handleIssueChange","newIssues","candidate","blocks","DuplicationPopup","inRemovedComponent","notAccessible","notExist","sourceRemoved","fetchComponent","componentWillReceiveProps","isLineOutsideOfRange","fetchSources","reloadIssues","loadComponent","defaultLoadComponent","defaultLoadSources","getCoverageStatus","lineNumber","firstLine","lastList","onLoaded","onFailLoadSources","renderCode","componentKey","renderHeader","slimHeader","SourceViewerHeaderSlim","Alert","variant","SourceViewerContext","Provider","file","ref","sourceViewerComponent","leakPeriodDate","arrayMap","baseIteratee","baseMap","isArray","collection","iteratee","react_intl_1","dates_1","formatterOption","year","month","day","hour","minute","FormattedDate","parseDate","FormattedRelative","classNames","measures_1","formatted","formatMeasure","level","l10n_1","_c","ariaAttrs","translate","translateWithParameters","KNOWN_RATINGS","enhanceMeasure","leak","getLeakValue","periods","period","getRatingTooltip","finalMetricKey","substr","decimals","formattedValue","omitExtraDecimalZeros","tooltip","rating","getLeakPeriod","Array","getPeriod","getPeriodLabel","dateFormatter","parameter","modeParam","mode","getPeriodDate","isApplicationPeriod","MultiSelectOption","custom","element","label","renderLabel","Boolean","id","onSelectChange","handleSelectChange","onSelectItem","onUnselectItem","onSearchQuery","validateSearchInput","handleElementHover","activeIdx","getAllElements","evt","toggleSelect","stopLoading","isNewElement","elem","selectedElements","elements","updateSelectedElements","filterSelected","updateUnselectedElements","unselectedElements","setElementActive","allElements","container","addEventListener","totalElements","searchInput","focus","removeEventListener","allowSelection","allowNewElements","footerNode","activeElement","showNewElement","infiniteList","listClasses","div","window","validateTag","replace","DonutChart","SIZE_TO_WIDTH_MAPPING","normal","big","huge","SIZE_TO_THICKNESS_MAPPING","data","padAngle","numberValue","gray71","green","barBackgroundColor","lineCoverageRed","width","thickness","height","leading","clickAttributes","other","lodash_1","isNaN","inRange"],"mappings":"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","file":"js/287.1593679646964.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\n\ninterface Props {\n  diff: T.IssueChangelogDiff;\n}\n\nexport default function IssueChangelogDiff({ diff }: Props) {\n  if (diff.key === 'file') {\n    return (\n      <p>\n        {translateWithParameters(\n          'issue.change.file_move',\n          diff.oldValue || '',\n          diff.newValue || ''\n        )}\n      </p>\n    );\n  } else if (['from_long_branch', 'from_branch'].includes(diff.key)) {\n    return (\n      <p>\n        {translateWithParameters(\n          'issue.change.from_branch',\n          diff.oldValue || '',\n          diff.newValue || ''\n        )}\n      </p>\n    );\n  } else if (diff.key === 'from_short_branch') {\n    // Applies to both legacy short lived branch and pull request\n    return (\n      <p>\n        {translateWithParameters(\n          'issue.change.from_non_branch',\n          diff.oldValue || '',\n          diff.newValue || ''\n        )}\n      </p>\n    );\n  } else if (diff.key === 'line') {\n    return <p>{translateWithParameters('issue.changelog.line_removed_X', diff.oldValue || '')}</p>;\n  }\n\n  let message;\n  if (diff.newValue != null) {\n    let { newValue } = diff;\n    if (diff.key === 'effort') {\n      newValue = formatMeasure(diff.newValue, 'WORK_DUR');\n    }\n    message = translateWithParameters(\n      'issue.changelog.changed_to',\n      translate('issue.changelog.field', diff.key),\n      newValue\n    );\n  } else {\n    message = translateWithParameters(\n      'issue.changelog.removed',\n      translate('issue.changelog.field', diff.key)\n    );\n  }\n\n  if (diff.oldValue != null) {\n    let { oldValue } = diff;\n    if (diff.key === 'effort') {\n      oldValue = formatMeasure(diff.oldValue, 'WORK_DUR');\n    }\n    message += ` (${translateWithParameters('issue.changelog.was', oldValue)})`;\n  }\n  return <p>{message}</p>;\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationIndex.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".location-index{position:relative;display:inline-block;vertical-align:top;line-height:16px;padding-left:6px;padding-right:6px;border-radius:2px;background-color:#d18582;color:#fff;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;transition:background-color .3s ease;-webkit-user-select:none;-ms-user-select:none;user-select:none}.location-index.selected{background-color:#a4030f}.location-index.muted{background-color:#cdcdcd}.location-index.is-leading:first-child{margin-left:0}.location-index.is-leading:not(:first-child){margin-left:-22px}.location-index[tabindex]{cursor:pointer}.location-index[tabindex]:hover,a:hover>.location-index{background-color:#a4030f}.location-index[tabindex]:focus{outline:none}.source-line-code-inner .location-index{line-height:16px;margin:1px 4px}.source-line-code-inner .location-index+.location-index{margin-left:0}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport './LocationMessage.css';\n\ninterface Props {\n  children?: React.ReactNode;\n  selected: boolean;\n}\n\nexport default function LocationMessage(props: Props) {\n  return (\n    <div className={classNames('location-message', { selected: props.selected })}>\n      {props.children}\n    </div>\n  );\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationMessage.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".location-message{display:inline-block;vertical-align:top;line-height:16px;padding:0 6px;border-radius:2px;background-color:#9e9e9e;color:#fff;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;text-overflow:ellipsis;overflow:hidden;transition:background-color .3s ease}.location-message.selected{background-color:#475760}.location-index+.location-message{margin-left:4px}.location-index>.location-message{display:none;position:absolute;bottom:calc(100% + 4px);left:0}.location-index:hover>.location-message{display:block}.location-index>.location-message:after{position:absolute;bottom:-5px;left:4px;width:0;height:0;border-top:5px solid #475760;border-left:5px solid transparent;border-right:5px solid transparent;content:\\\"\\\"}.source-line-code .location-message{padding-top:2px;padding-bottom:2px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Issue.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".issue{position:relative;padding-top:8px;padding-bottom:8px;background-color:#f2dede;transition:all .3s ease,border 0s ease}.issue.hotspot{background-color:#eeeff4}.issue.selected{box-shadow:none;outline:none;border:2px solid #4b9fd5!important}.issue+.issue,.issue-container+.issue-container{margin-top:5px}.issue.selected+.issue{border-top-color:transparent}.issue-row{display:flex;margin-bottom:5px}.issue-row-meta{flex-grow:0;padding-right:5px;white-space:nowrap}.issue-message{flex-grow:1;padding-left:8px;padding-right:8px;line-height:18px;font-size:13px;font-weight:600;text-overflow:ellipsis}.issue-actions{justify-content:space-between;flex-wrap:wrap;padding-left:8px}.issue-actions,.issue-meta-list{display:flex;align-items:center}.issue-meta{line-height:16px;font-size:12px}.issue-meta+.issue-meta{margin-left:8px}.issue-meta-label{display:inline-block;vertical-align:top;max-width:180px;line-height:16px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.issue-see-rule{border-bottom:none;font-size:12px}.issue-changelog{width:450px;max-height:320px;overflow:auto;white-space:normal}.issue-comments{margin-top:5px;padding-left:8px;font-size:12px}.issue-comment{display:flex}.issue-comment+.issue-comment{margin-top:4px}.issue-comment-author{max-width:130px;font-weight:600;overflow:hidden;text-overflow:ellipsis}.issue-comment-age,.issue-comment-author{flex-shrink:0;line-height:18px;color:#777;white-space:nowrap}.issue-comment-text{flex:1;min-width:0;margin-left:5px;margin-right:5px;line-height:18px;line-height:1.5;overflow:hidden;outline:none;word-break:break-all}.issue-comment-text.markdown pre{float:none;height:auto;margin:0;padding:8px;background-color:#e6e6e6;border:none;border-radius:3px}.issue-comment-text.markdown br~pre{margin-top:8px}.issue-comment-actions{flex-shrink:0;padding-left:5px;line-height:18px;white-space:nowrap}.issue-comment-bubble-popup{width:440px;font-size:12px}.issue-comment-form-text textarea{width:100%;max-width:100%}.issue-comment-form-footer{margin-top:5px;line-height:22px}.issue-comment-form-footer:after,.issue-comment-form-footer:before{display:table;content:\\\"\\\";line-height:0}.issue-comment-form-footer:after{clear:both}.issue-comment-form-actions{float:right}.issue-comment-form-tips{float:left}.issue-with-checkbox{padding-left:24px}.issue-with-checkbox .issue-checkbox-container{display:flex;justify-content:center;align-items:center}.issue-checkbox-container{display:none;position:absolute;width:28px;top:0;bottom:0;left:0;border:none}.issue-checkbox-container:hover{background-color:rgba(0,0,0,.05)}.issue:not(.selected) .location-index{background-color:#999}.issue .menu:not(.issues-similar-issues-menu):not(.issue-changelog){max-height:120px;overflow:auto}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = require(\"react\");\nvar Icon_1 = require(\"./Icon\");\nvar statusIcons = {\n    open: OpenStatusIcon,\n    confirmed: ConfirmedStatusIcon,\n    reopened: ReopenedStatusIcon,\n    resolved: ResolvedStatusIcon,\n    closed: ClosedStatusIcon,\n    to_review: OpenStatusIcon,\n    in_review: ConfirmedStatusIcon,\n    reviewed: ResolvedStatusIcon,\n};\nfunction StatusIcon(_a) {\n    var status = _a.status, iconProps = __rest(_a, [\"status\"]);\n    var Icon = statusIcons[status.toLowerCase()];\n    return Icon ? React.createElement(Icon, __assign({}, iconProps)) : null;\n}\nexports.default = StatusIcon;\nfunction OpenStatusIcon(iconProps) {\n    return (React.createElement(Icon_1.ThemedIcon, __assign({}, iconProps), function (_a) {\n        var theme = _a.theme;\n        return (React.createElement(\"path\", { d: \"M8 3.75c-.77 0-1.482.19-2.133.57A4.25 4.25 0 0 0 4.32 5.867c-.38.65-.57 1.362-.57 2.133 0 .77.19 1.482.57 2.133.38.65.896 1.167 1.547 1.547.65.38 1.362.57 2.133.57.77 0 1.482-.19 2.133-.57a4.242 4.242 0 0 0 1.547-1.547c.38-.65.57-1.362.57-2.133 0-.77-.19-1.482-.57-2.133a4.25 4.25 0 0 0-1.547-1.547A4.153 4.153 0 0 0 8 3.75zM14 8c0 1.09-.268 2.092-.805 3.012a5.96 5.96 0 0 1-2.183 2.183A5.863 5.863 0 0 1 8 14a5.863 5.863 0 0 1-3.012-.805 5.96 5.96 0 0 1-2.183-2.183A5.863 5.863 0 0 1 2 8c0-1.09.268-2.092.805-3.012a5.96 5.96 0 0 1 2.183-2.183A5.863 5.863 0 0 1 8 2c1.09 0 2.092.268 3.012.805a5.96 5.96 0 0 1 2.183 2.183C13.732 5.908 14 6.91 14 8z\", style: { fill: theme.colors.blue } }));\n    }));\n}\nfunction ConfirmedStatusIcon(iconProps) {\n    return (React.createElement(Icon_1.ThemedIcon, __assign({}, iconProps), function (_a) {\n        var theme = _a.theme;\n        return (React.createElement(\"path\", { d: \"M10 8c0 .552-.195 1.023-.586 1.414-.39.39-.862.586-1.414.586a1.926 1.926 0 0 1-1.414-.586A1.928 1.928 0 0 1 6 8c0-.552.195-1.023.586-1.414C6.976 6.196 7.448 6 8 6c.552 0 1.023.195 1.414.586.39.39.586.862.586 1.414zM8 3.75c-.77 0-1.482.19-2.133.57A4.25 4.25 0 0 0 4.32 5.867c-.38.65-.57 1.362-.57 2.133 0 .77.19 1.482.57 2.133.38.65.896 1.167 1.547 1.547.65.38 1.362.57 2.133.57.77 0 1.482-.19 2.133-.57a4.242 4.242 0 0 0 1.547-1.547c.38-.65.57-1.362.57-2.133 0-.77-.19-1.482-.57-2.133a4.25 4.25 0 0 0-1.547-1.547A4.153 4.153 0 0 0 8 3.75zM14 8c0 1.09-.268 2.092-.805 3.012a5.96 5.96 0 0 1-2.183 2.183A5.863 5.863 0 0 1 8 14a5.863 5.863 0 0 1-3.012-.805 5.96 5.96 0 0 1-2.183-2.183A5.863 5.863 0 0 1 2 8c0-1.09.268-2.092.805-3.012a5.96 5.96 0 0 1 2.183-2.183A5.863 5.863 0 0 1 8 2c1.09 0 2.092.268 3.012.805a5.96 5.96 0 0 1 2.183 2.183C13.732 5.908 14 6.91 14 8z\", style: { fill: theme.colors.blue } }));\n    }));\n}\nfunction ReopenedStatusIcon(iconProps) {\n    return (React.createElement(Icon_1.ThemedIcon, __assign({}, iconProps), function (_a) {\n        var theme = _a.theme;\n        return (React.createElement(\"path\", { d: \"M8 12.25v-8.5c-.77 0-1.482.19-2.133.57A4.25 4.25 0 0 0 4.32 5.867c-.38.65-.57 1.362-.57 2.133 0 .77.19 1.482.57 2.133.38.65.896 1.167 1.547 1.547.65.38 1.362.57 2.133.57zM14 8c0 1.09-.268 2.092-.805 3.012a5.96 5.96 0 0 1-2.183 2.183A5.863 5.863 0 0 1 8 14a5.863 5.863 0 0 1-3.012-.805 5.96 5.96 0 0 1-2.183-2.183A5.863 5.863 0 0 1 2 8c0-1.09.268-2.092.805-3.012a5.96 5.96 0 0 1 2.183-2.183A5.863 5.863 0 0 1 8 2c1.09 0 2.092.268 3.012.805a5.96 5.96 0 0 1 2.183 2.183C13.732 5.908 14 6.91 14 8z\", style: { fill: theme.colors.blue } }));\n    }));\n}\nfunction ResolvedStatusIcon(iconProps) {\n    return (React.createElement(Icon_1.ThemedIcon, __assign({}, iconProps), function (_a) {\n        var theme = _a.theme;\n        return (React.createElement(\"path\", { d: \"M12.03 6.734a.49.49 0 0 0-.14-.36l-.71-.702a.48.48 0 0 0-.352-.15.474.474 0 0 0-.35.15l-3.19 3.18-1.765-1.766a.479.479 0 0 0-.35-.15.479.479 0 0 0-.353.15l-.71.703a.482.482 0 0 0-.14.358c0 .14.046.258.14.352l2.828 2.828c.098.1.216.15.35.15.142 0 .26-.05.36-.15l4.243-4.242a.475.475 0 0 0 .14-.352l-.001.001zM14 8c0 1.09-.268 2.092-.805 3.012a5.96 5.96 0 0 1-2.183 2.183A5.863 5.863 0 0 1 8 14a5.863 5.863 0 0 1-3.012-.805 5.96 5.96 0 0 1-2.183-2.183A5.863 5.863 0 0 1 2 8c0-1.09.268-2.092.805-3.012a5.96 5.96 0 0 1 2.183-2.183A5.863 5.863 0 0 1 8 2c1.09 0 2.092.268 3.012.805a5.96 5.96 0 0 1 2.183 2.183C13.732 5.908 14 6.91 14 8z\", style: { fill: theme.colors.baseFontColor } }));\n    }));\n}\nfunction ClosedStatusIcon(iconProps) {\n    return (React.createElement(Icon_1.ThemedIcon, __assign({}, iconProps), function (_a) {\n        var theme = _a.theme;\n        return (React.createElement(\"path\", { d: \"M14 8c0 1.09-.268 2.092-.805 3.012a5.96 5.96 0 0 1-2.183 2.183A5.863 5.863 0 0 1 8 14a5.863 5.863 0 0 1-3.012-.805 5.96 5.96 0 0 1-2.183-2.183A5.863 5.863 0 0 1 2 8c0-1.09.268-2.092.805-3.012a5.96 5.96 0 0 1 2.183-2.183A5.863 5.863 0 0 1 8 2c1.09 0 2.092.268 3.012.805a5.96 5.96 0 0 1 2.183 2.183C13.732 5.908 14 6.91 14 8z\", style: { fill: theme.colors.baseFontColor } }));\n    }));\n}\n//# sourceMappingURL=StatusIcon.js.map","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { IssueResponse } from '../../api/issues';\nimport { parseIssueFromResponse } from '../../helpers/issues';\n\nexport const updateIssue = (\n  onChange: (issue: T.Issue) => void,\n  resultPromise: Promise<IssueResponse>,\n  oldIssue?: T.Issue,\n  newIssue?: T.Issue\n) => {\n  const optimisticUpdate = oldIssue !== undefined && newIssue !== undefined;\n  if (optimisticUpdate) {\n    onChange(newIssue!);\n  }\n\n  resultPromise.then(\n    response => {\n      if (!optimisticUpdate) {\n        const issue = parseIssueFromResponse(\n          response.issue,\n          response.components,\n          response.users,\n          response.rules\n        );\n        onChange(issue);\n      }\n    },\n    () => {\n      if (optimisticUpdate) {\n        onChange(oldIssue!);\n      }\n    }\n  );\n};\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\n\ninterface Props {\n  active?: string;\n  className?: string;\n  item: string;\n  onHover?: (item: string) => void;\n  onSelect?: (item: string) => void;\n  title?: string;\n}\n\nexport default class SelectListItem extends React.PureComponent<Props> {\n  handleSelect = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    if (this.props.onSelect) {\n      this.props.onSelect(this.props.item);\n    }\n  };\n\n  handleHover = () => {\n    if (this.props.onHover) {\n      this.props.onHover(this.props.item);\n    }\n  };\n\n  renderLink() {\n    const children = this.props.children || this.props.item;\n    return (\n      <li>\n        <a\n          className={classNames(\n            { active: this.props.active === this.props.item },\n            this.props.className\n          )}\n          href=\"#\"\n          onClick={this.handleSelect}\n          onFocus={this.handleHover}\n          onMouseOver={this.handleHover}>\n          {children}\n        </a>\n      </li>\n    );\n  }\n\n  render() {\n    return (\n      <Tooltip overlay={this.props.title || undefined} placement=\"right\">\n        {this.renderLink()}\n      </Tooltip>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport classNames from 'classnames';\nimport * as key from 'keymaster';\nimport { uniqueId } from 'lodash';\nimport * as React from 'react';\nimport SelectListItem from './SelectListItem';\n\ninterface Props {\n  className?: string;\n  items: string[];\n  currentItem: string;\n  onSelect: (item: string) => void;\n}\n\ninterface State {\n  active: string;\n}\n\nexport default class SelectList extends React.PureComponent<Props, State> {\n  currentKeyScope?: string;\n  previousFilter?: (event: any) => void;\n  previousKeyScope?: string;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      active: props.currentItem\n    };\n  }\n\n  componentDidMount() {\n    this.attachShortcuts();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (\n      prevProps.currentItem !== this.props.currentItem &&\n      !this.props.items.includes(this.state.active)\n    ) {\n      this.setState({ active: this.props.currentItem });\n    }\n  }\n\n  componentWillUnmount() {\n    this.detachShortcuts();\n  }\n\n  attachShortcuts = () => {\n    this.previousKeyScope = key.getScope();\n    this.previousFilter = key.filter;\n    this.currentKeyScope = uniqueId('key-scope');\n    key.setScope(this.currentKeyScope);\n\n    // sometimes there is a *focused* search field next to the SelectList component\n    // we need to allow shortcuts in this case, but only for the used keys\n    (key as any).filter = (event: KeyboardEvent & { target: HTMLElement }) => {\n      const { tagName } = event.target || event.srcElement;\n      const isInput = tagName === 'INPUT' || tagName === 'SELECT' || tagName === 'TEXTAREA';\n      return [13, 38, 40].includes(event.keyCode) || !isInput;\n    };\n\n    key('down', this.currentKeyScope, () => {\n      this.setState(this.selectNextElement);\n      return false;\n    });\n\n    key('up', this.currentKeyScope, () => {\n      this.setState(this.selectPreviousElement);\n      return false;\n    });\n\n    key('return', this.currentKeyScope, () => {\n      if (this.state.active != null) {\n        this.handleSelect(this.state.active);\n      }\n      return false;\n    });\n  };\n\n  detachShortcuts = () => {\n    if (this.previousKeyScope) {\n      key.setScope(this.previousKeyScope);\n    }\n    if (this.currentKeyScope) {\n      key.deleteScope(this.currentKeyScope);\n    }\n    (key as any).filter = this.previousFilter;\n  };\n\n  handleSelect = (item: string) => {\n    this.props.onSelect(item);\n  };\n\n  handleHover = (item: string) => {\n    this.setState({ active: item });\n  };\n\n  selectNextElement = (state: State, props: Props) => {\n    const idx = props.items.indexOf(state.active);\n    if (idx < 0) {\n      return { active: props.items[0] };\n    }\n    return { active: props.items[(idx + 1) % props.items.length] };\n  };\n\n  selectPreviousElement = (state: State, props: Props) => {\n    const idx = props.items.indexOf(state.active);\n    if (idx <= 0) {\n      return { active: props.items[props.items.length - 1] };\n    }\n    return { active: props.items[idx - 1] };\n  };\n\n  renderChild = (child: any) => {\n    if (child == null) {\n      return null;\n    }\n    // do not pass extra props to children like `<li className=\"divider\" />`\n    if (child.type !== SelectListItem) {\n      return child;\n    }\n    return React.cloneElement(child, {\n      active: this.state.active,\n      onHover: this.handleHover,\n      onSelect: this.handleSelect\n    });\n  };\n\n  render() {\n    const { children } = this.props;\n    const hasChildren = React.Children.count(children) > 0;\n    return (\n      <ul className={classNames('menu', this.props.className)}>\n        {hasChildren && React.Children.map(children, this.renderChild)}\n        {!hasChildren &&\n          this.props.items.map(item => (\n            <SelectListItem\n              active={this.state.active}\n              item={item}\n              key={item}\n              onHover={this.handleHover}\n              onSelect={this.handleSelect}\n            />\n          ))}\n      </ul>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { map } from 'lodash';\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport SearchBox from 'sonar-ui-common/components/controls/SearchBox';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { searchMembers } from '../../../api/organizations';\nimport { searchUsers } from '../../../api/users';\nimport { isSonarCloud } from '../../../helpers/system';\nimport { isLoggedIn, isUserActive } from '../../../helpers/users';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\nimport { withCurrentUser } from '../../hoc/withCurrentUser';\nimport Avatar from '../../ui/Avatar';\n\ninterface Props {\n  currentUser: T.CurrentUser;\n  issue: Pick<T.Issue, 'projectOrganization'>;\n  onSelect: (login: string) => void;\n}\n\ninterface State {\n  currentUser: string;\n  query: string;\n  users: T.UserActive[];\n}\n\nconst LIST_SIZE = 10;\n\nexport class SetAssigneePopup extends React.PureComponent<Props, State> {\n  defaultUsersArray: T.UserActive[];\n\n  constructor(props: Props) {\n    super(props);\n    this.defaultUsersArray = [{ login: '', name: translate('unassigned') }];\n\n    if (isLoggedIn(props.currentUser)) {\n      this.defaultUsersArray = [props.currentUser, ...this.defaultUsersArray];\n    }\n\n    this.state = {\n      query: '',\n      users: this.defaultUsersArray,\n      currentUser: this.defaultUsersArray.length > 0 ? this.defaultUsersArray[0].login : ''\n    };\n  }\n\n  searchMembers = (query: string) => {\n    searchMembers({\n      organization: this.props.issue.projectOrganization,\n      q: query,\n      ps: LIST_SIZE\n    }).then(this.handleSearchResult, () => {});\n  };\n\n  searchUsers = (query: string) => {\n    searchUsers({ q: query, ps: LIST_SIZE }).then(this.handleSearchResult, () => {});\n  };\n\n  handleSearchResult = ({ users }: { users: T.UserBase[] }) => {\n    const activeUsers = users.filter(isUserActive);\n    this.setState({\n      users: activeUsers,\n      currentUser: activeUsers.length > 0 ? activeUsers[0].login : ''\n    });\n  };\n\n  handleSearchChange = (query: string) => {\n    if (query.length === 0) {\n      this.setState({\n        query,\n        users: this.defaultUsersArray,\n        currentUser: this.defaultUsersArray[0].login\n      });\n    } else {\n      this.setState({ query });\n      if (isSonarCloud()) {\n        this.searchMembers(query);\n      } else {\n        this.searchUsers(query);\n      }\n    }\n  };\n\n  render() {\n    return (\n      <DropdownOverlay noPadding={true}>\n        <div className=\"multi-select\">\n          <div className=\"menu-search\">\n            <SearchBox\n              autoFocus={true}\n              className=\"little-spacer-top\"\n              minLength={2}\n              onChange={this.handleSearchChange}\n              placeholder={translate('search.search_for_users')}\n              value={this.state.query}\n            />\n          </div>\n          <SelectList\n            currentItem={this.state.currentUser}\n            items={map(this.state.users, 'login')}\n            onSelect={this.props.onSelect}>\n            {this.state.users.map(user => (\n              <SelectListItem item={user.login} key={user.login}>\n                {!!user.login && (\n                  <Avatar className=\"spacer-right\" hash={user.avatar} name={user.name} size={16} />\n                )}\n                <span className=\"text-middle\" style={{ marginLeft: user.login ? 24 : undefined }}>\n                  {user.name}\n                </span>\n              </SelectListItem>\n            ))}\n          </SelectList>\n        </div>\n      </DropdownOverlay>\n    );\n  }\n}\n\nexport default withCurrentUser(SetAssigneePopup);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport Avatar from '../../ui/Avatar';\nimport SetAssigneePopup from '../popups/SetAssigneePopup';\n\ninterface Props {\n  isOpen: boolean;\n  issue: Pick<\n    T.Issue,\n    'assignee' | 'assigneeActive' | 'assigneeAvatar' | 'assigneeName' | 'projectOrganization'\n  >;\n  canAssign: boolean;\n  onAssign: (login: string) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueAssign extends React.PureComponent<Props> {\n  toggleAssign = (open?: boolean) => {\n    this.props.togglePopup('assign', open);\n  };\n\n  handleClose = () => {\n    this.toggleAssign(false);\n  };\n\n  renderAssignee() {\n    const { issue } = this.props;\n    const assigneeName = issue.assigneeName || issue.assignee;\n\n    if (assigneeName) {\n      return (\n        <>\n          <span className=\"text-top\">\n            <Avatar\n              className=\"little-spacer-right\"\n              hash={issue.assigneeAvatar}\n              name={issue.assigneeName || issue.assignee}\n              size={16}\n            />\n          </span>\n          <span className=\"issue-meta-label\">\n            {issue.assigneeActive === false\n              ? translateWithParameters('user.x_deleted', assigneeName)\n              : assigneeName}\n          </span>\n        </>\n      );\n    }\n\n    return <span className=\"issue-meta-label\">{translate('unassigned')}</span>;\n  }\n\n  render() {\n    if (this.props.canAssign) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            closeOnEscape={true}\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.canAssign}\n            overlay={<SetAssigneePopup issue={this.props.issue} onSelect={this.props.onAssign} />}>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-assign\"\n              onClick={this.toggleAssign}>\n              {this.renderAssignee()}\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return this.renderAssignee();\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button, ResetButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport MarkdownTips from '../../common/MarkdownTips';\n\ninterface Props {\n  comment?: Pick<T.IssueComment, 'markdown'>;\n  onComment: (text: string) => void;\n  toggleComment: (visible: boolean) => void;\n  placeholder: string;\n  placement?: PopupPlacement;\n  autoTriggered?: boolean;\n}\n\ninterface State {\n  textComment: string;\n}\n\nexport default class CommentPopup extends React.PureComponent<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      textComment: props.comment ? props.comment.markdown : ''\n    };\n  }\n\n  handleCommentChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    this.setState({ textComment: event.target.value });\n  };\n\n  handleCommentClick = () => {\n    if (this.state.textComment.trim().length > 0) {\n      this.props.onComment(this.state.textComment);\n    }\n  };\n\n  handleCancelClick = () => {\n    this.props.toggleComment(false);\n  };\n\n  handleKeyboard = (event: React.KeyboardEvent) => {\n    if (event.keyCode === 13 && (event.metaKey || event.ctrlKey)) {\n      // Ctrl + Enter\n      this.handleCommentClick();\n    } else if ([37, 38, 39, 40].includes(event.keyCode)) {\n      // Arrow keys\n      event.stopPropagation();\n    }\n  };\n\n  render() {\n    const { comment, autoTriggered } = this.props;\n    return (\n      <DropdownOverlay placement={this.props.placement}>\n        <div className=\"issue-comment-bubble-popup\">\n          <div className=\"issue-comment-form-text\">\n            <textarea\n              autoFocus={true}\n              onChange={this.handleCommentChange}\n              onKeyDown={this.handleKeyboard}\n              placeholder={this.props.placeholder}\n              rows={2}\n              value={this.state.textComment}\n            />\n          </div>\n          <div className=\"issue-comment-form-footer\">\n            <div className=\"issue-comment-form-actions\">\n              <Button\n                className=\"js-issue-comment-submit little-spacer-right\"\n                disabled={this.state.textComment.trim().length < 1}\n                onClick={this.handleCommentClick}>\n                {comment && translate('save')}\n                {!comment && translate('issue.comment.submit')}\n              </Button>\n              <ResetButtonLink className=\"js-issue-comment-cancel\" onClick={this.handleCancelClick}>\n                {autoTriggered ? translate('skip') : translate('cancel')}\n              </ResetButtonLink>\n            </div>\n            <div className=\"issue-comment-form-tips\">\n              <MarkdownTips />\n            </div>\n          </div>\n        </div>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { addIssueComment } from '../../../api/issues';\nimport { updateIssue } from '../actions';\nimport CommentPopup from '../popups/CommentPopup';\n\ninterface Props {\n  commentAutoTriggered?: boolean;\n  commentPlaceholder: string;\n  currentPopup?: string;\n  issueKey: string;\n  onChange: (issue: T.Issue) => void;\n  toggleComment: (open?: boolean, placeholder?: string, autoTriggered?: boolean) => void;\n}\n\nexport default class IssueCommentAction extends React.PureComponent<Props> {\n  addComment = (text: string) => {\n    updateIssue(this.props.onChange, addIssueComment({ issue: this.props.issueKey, text }));\n    this.props.toggleComment(false);\n  };\n\n  handleCommentClick = () => {\n    this.props.toggleComment();\n  };\n\n  handleClose = () => {\n    this.props.toggleComment(false);\n  };\n\n  render() {\n    return (\n      <li className=\"issue-meta dropdown\">\n        <Toggler\n          closeOnClickOutside={false}\n          onRequestClose={this.handleClose}\n          open={this.props.currentPopup === 'comment'}\n          overlay={\n            <CommentPopup\n              autoTriggered={this.props.commentAutoTriggered}\n              onComment={this.addComment}\n              placeholder={this.props.commentPlaceholder}\n              toggleComment={this.props.toggleComment}\n            />\n          }>\n          <ButtonLink className=\"issue-action js-issue-comment\" onClick={this.handleCommentClick}>\n            <span className=\"issue-meta-label\">{translate('issue.comment.formlink')}</span>\n          </ButtonLink>\n        </Toggler>\n      </li>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport SeverityIcon from 'sonar-ui-common/components/icons/SeverityIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\n\ntype Props = {\n  issue: Pick<T.Issue, 'severity'>;\n  onSelect: (severity: string) => void;\n};\n\nconst SEVERITY = ['BLOCKER', 'CRITICAL', 'MAJOR', 'MINOR', 'INFO'];\n\nexport default function SetSeverityPopup({ issue, onSelect }: Props) {\n  return (\n    <DropdownOverlay>\n      <SelectList currentItem={issue.severity} items={SEVERITY} onSelect={onSelect}>\n        {SEVERITY.map(severity => (\n          <SelectListItem className=\"display-flex-center\" item={severity} key={severity}>\n            <SeverityIcon className=\"little-spacer-right\" severity={severity} />\n            {translate('severity', severity)}\n          </SelectListItem>\n        ))}\n      </SelectList>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport { IssueResponse, setIssueSeverity } from '../../../api/issues';\nimport SeverityHelper from '../../shared/SeverityHelper';\nimport SetSeverityPopup from '../popups/SetSeverityPopup';\n\ninterface Props {\n  canSetSeverity: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'severity'>;\n  setIssueProperty: (\n    property: keyof T.Issue,\n    popup: string,\n    apiCall: (query: T.RawQuery) => Promise<IssueResponse>,\n    value: string\n  ) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueSeverity extends React.PureComponent<Props> {\n  toggleSetSeverity = (open?: boolean) => {\n    this.props.togglePopup('set-severity', open);\n  };\n\n  setSeverity = (severity: string) => {\n    this.props.setIssueProperty('severity', 'set-severity', setIssueSeverity, severity);\n  };\n\n  handleClose = () => {\n    this.toggleSetSeverity(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n    if (this.props.canSetSeverity) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.canSetSeverity}\n            overlay={<SetSeverityPopup issue={issue} onSelect={this.setSeverity} />}>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-set-severity\"\n              onClick={this.toggleSetSeverity}>\n              <SeverityHelper className=\"issue-meta-label\" severity={issue.severity} />\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return <SeverityHelper className=\"issue-meta-label\" severity={issue.severity} />;\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { difference, without } from 'lodash';\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { searchIssueTags } from '../../../api/issues';\nimport TagsSelector from '../../tags/TagsSelector';\n\ninterface Props {\n  organization: string;\n  selectedTags: string[];\n  setTags: (tags: string[]) => void;\n}\n\ninterface State {\n  searchResult: string[];\n}\n\nconst LIST_SIZE = 10;\n\nexport default class SetIssueTagsPopup extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { searchResult: [] };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  onSearch = (query: string) => {\n    return searchIssueTags({\n      q: query,\n      ps: Math.min(this.props.selectedTags.length - 1 + LIST_SIZE, 100),\n      organization: this.props.organization\n    }).then(\n      (tags: string[]) => {\n        if (this.mounted) {\n          this.setState({ searchResult: tags });\n        }\n      },\n      () => {}\n    );\n  };\n\n  onSelect = (tag: string) => {\n    this.props.setTags([...this.props.selectedTags, tag]);\n  };\n\n  onUnselect = (tag: string) => {\n    this.props.setTags(without(this.props.selectedTags, tag));\n  };\n\n  render() {\n    const availableTags = difference(this.state.searchResult, this.props.selectedTags);\n    return (\n      <DropdownOverlay placement={PopupPlacement.BottomRight}>\n        <TagsSelector\n          listSize={LIST_SIZE}\n          onSearch={this.onSearch}\n          onSelect={this.onSelect}\n          onUnselect={this.onUnselect}\n          selectedTags={this.props.selectedTags}\n          tags={availableTags}\n        />\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { setIssueTags } from '../../../api/issues';\nimport TagsList from '../../tags/TagsList';\nimport { updateIssue } from '../actions';\nimport SetIssueTagsPopup from '../popups/SetIssueTagsPopup';\n\ninterface Props {\n  canSetTags: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'key' | 'projectOrganization' | 'tags'>;\n  onChange: (issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueTags extends React.PureComponent<Props> {\n  toggleSetTags = (open?: boolean) => {\n    this.props.togglePopup('edit-tags', open);\n  };\n\n  setTags = (tags: string[]) => {\n    const { issue } = this.props;\n    const newIssue = { ...issue, tags };\n    updateIssue(\n      this.props.onChange,\n      setIssueTags({ issue: issue.key, tags: tags.join(',') }),\n      issue as T.Issue,\n      newIssue as T.Issue\n    );\n  };\n\n  handleClose = () => {\n    this.toggleSetTags(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n    const { tags = [] } = issue;\n\n    if (this.props.canSetTags) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen}\n            overlay={\n              <SetIssueTagsPopup\n                organization={issue.projectOrganization}\n                selectedTags={tags}\n                setTags={this.setTags}\n              />\n            }>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-edit-tags\"\n              onClick={this.toggleSetTags}>\n              <TagsList\n                allowUpdate={this.props.canSetTags}\n                tags={\n                  issue.tags && issue.tags.length > 0 ? issue.tags : [translate('issue.no_tag')]\n                }\n              />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return (\n        <TagsList\n          allowUpdate={this.props.canSetTags}\n          className=\"note\"\n          tags={issue.tags && issue.tags.length > 0 ? issue.tags : [translate('issue.no_tag')]}\n        />\n      );\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { hasMessage, translate } from 'sonar-ui-common/helpers/l10n';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\n\nexport interface Props {\n  fromHotspot: boolean;\n  onSelect: (transition: string) => void;\n  transitions: string[];\n  type: T.IssueType;\n}\n\nexport default function SetTransitionPopup({ fromHotspot, onSelect, transitions, type }: Props) {\n  const isManualVulnerability = fromHotspot && type === 'VULNERABILITY';\n  return (\n    <DropdownOverlay>\n      <SelectList currentItem={transitions[0]} items={transitions} onSelect={onSelect}>\n        {transitions.map(transition => {\n          const [name, description] = translateTransition(transition, isManualVulnerability);\n          return (\n            <SelectListItem item={transition} key={transition} title={description}>\n              {name}\n            </SelectListItem>\n          );\n        })}\n      </SelectList>\n    </DropdownOverlay>\n  );\n}\n\nfunction translateTransition(transition: string, isManualVulnerability: boolean) {\n  return isManualVulnerability && hasMessage('vulnerability.transition', transition)\n    ? [\n        translate('vulnerability.transition', transition),\n        translate('vulnerability.transition', transition, 'description')\n      ]\n    : [\n        translate('issue.transition', transition),\n        translate('issue.transition', transition, 'description')\n      ];\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport { setIssueTransition } from '../../../api/issues';\nimport StatusHelper from '../../shared/StatusHelper';\nimport { updateIssue } from '../actions';\nimport SetTransitionPopup from '../popups/SetTransitionPopup';\n\ninterface Props {\n  hasTransitions: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'fromHotspot' | 'key' | 'resolution' | 'status' | 'transitions' | 'type'>;\n  onChange: (issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueTransition extends React.PureComponent<Props> {\n  setTransition = (transition: string) => {\n    updateIssue(\n      this.props.onChange,\n      setIssueTransition({ issue: this.props.issue.key, transition })\n    );\n    this.toggleSetTransition();\n  };\n\n  toggleSetTransition = (open?: boolean) => {\n    this.props.togglePopup('transition', open);\n  };\n\n  handleClose = () => {\n    this.toggleSetTransition(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n\n    if (this.props.hasTransitions) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.hasTransitions}\n            overlay={\n              <SetTransitionPopup\n                fromHotspot={issue.fromHotspot}\n                onSelect={this.setTransition}\n                transitions={issue.transitions}\n                type={issue.type}\n              />\n            }>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-transition\"\n              onClick={this.toggleSetTransition}>\n              <StatusHelper\n                className=\"issue-meta-label\"\n                resolution={issue.resolution}\n                status={issue.status}\n              />\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return (\n        <StatusHelper\n          className=\"issue-meta-label\"\n          resolution={issue.resolution}\n          status={issue.status}\n        />\n      );\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\n\ninterface Props {\n  issue: Pick<T.Issue, 'type'>;\n  onSelect: (type: T.IssueType) => void;\n}\n\nconst TYPES = ['BUG', 'VULNERABILITY', 'CODE_SMELL'];\n\nexport default function SetTypePopup({ issue, onSelect }: Props) {\n  return (\n    <DropdownOverlay>\n      <SelectList currentItem={issue.type} items={TYPES} onSelect={onSelect}>\n        {TYPES.map(type => (\n          <SelectListItem className=\"display-flex-center\" item={type} key={type}>\n            <IssueTypeIcon className=\"little-spacer-right\" query={type} />\n            {translate('issue.type', type)}\n          </SelectListItem>\n        ))}\n      </SelectList>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { IssueResponse, setIssueType } from '../../../api/issues';\nimport { colors } from '../../../app/theme';\nimport SetTypePopup from '../popups/SetTypePopup';\n\ninterface Props {\n  canSetType: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'type'>;\n  setIssueProperty: (\n    property: keyof T.Issue,\n    popup: string,\n    apiCall: (query: T.RawQuery) => Promise<IssueResponse>,\n    value: string\n  ) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueType extends React.PureComponent<Props> {\n  toggleSetType = (open?: boolean) => {\n    this.props.togglePopup('set-type', open);\n  };\n\n  setType = (type: string) => {\n    this.props.setIssueProperty('type', 'set-type', setIssueType, type);\n  };\n\n  handleClose = () => {\n    this.toggleSetType(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n    if (this.props.canSetType) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.canSetType}\n            overlay={<SetTypePopup issue={issue} onSelect={this.setType} />}>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-set-type\"\n              onClick={this.toggleSetType}>\n              <IssueTypeIcon\n                className=\"little-spacer-right\"\n                fill={colors.baseFontColor}\n                query={issue.type}\n              />\n              {translate('issue.type', issue.type)}\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return (\n        <span>\n          <IssueTypeIcon className=\"little-spacer-right\" query={issue.type} />\n          {translate('issue.type', issue.type)}\n        </span>\n      );\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { IssueResponse } from '../../../api/issues';\nimport { updateIssue } from '../actions';\nimport IssueAssign from './IssueAssign';\nimport IssueCommentAction from './IssueCommentAction';\nimport IssueSeverity from './IssueSeverity';\nimport IssueTags from './IssueTags';\nimport IssueTransition from './IssueTransition';\nimport IssueType from './IssueType';\n\ninterface Props {\n  issue: T.Issue;\n  currentPopup?: string;\n  onAssign: (login: string) => void;\n  onChange: (issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\ninterface State {\n  commentAutoTriggered: boolean;\n  commentPlaceholder: string;\n}\n\nexport default class IssueActionsBar extends React.PureComponent<Props, State> {\n  state: State = {\n    commentAutoTriggered: false,\n    commentPlaceholder: ''\n  };\n\n  setIssueProperty = (\n    property: keyof T.Issue,\n    popup: string,\n    apiCall: (query: T.RawQuery) => Promise<IssueResponse>,\n    value: string\n  ) => {\n    const { issue } = this.props;\n    if (issue[property] !== value) {\n      const newIssue = { ...issue, [property]: value };\n      updateIssue(\n        this.props.onChange,\n        apiCall({ issue: issue.key, [property]: value }),\n        issue,\n        newIssue\n      );\n    }\n    this.props.togglePopup(popup, false);\n  };\n\n  toggleComment = (open: boolean | undefined, placeholder = '', autoTriggered = false) => {\n    this.setState({\n      commentPlaceholder: placeholder,\n      commentAutoTriggered: autoTriggered\n    });\n    this.props.togglePopup('comment', open);\n  };\n\n  handleTransition = (issue: T.Issue) => {\n    this.props.onChange(issue);\n    if (\n      issue.resolution === 'FALSE-POSITIVE' ||\n      (issue.resolution === 'WONTFIX' && issue.type !== 'SECURITY_HOTSPOT')\n    ) {\n      this.toggleComment(true, translate('issue.comment.explain_why'), true);\n    }\n  };\n\n  render() {\n    const { issue } = this.props;\n    const canAssign = issue.actions.includes('assign');\n    const canComment = issue.actions.includes('comment');\n    const canSetSeverity = issue.actions.includes('set_severity');\n    const canSetType = issue.actions.includes('set_type');\n    const canSetTags = issue.actions.includes('set_tags');\n    const hasTransitions = issue.transitions && issue.transitions.length > 0;\n    const isSecurityHotspot = issue.type === 'SECURITY_HOTSPOT';\n\n    return (\n      <div className=\"issue-actions\">\n        <ul className=\"issue-meta-list\">\n          <li className=\"issue-meta\">\n            <IssueType\n              canSetType={canSetType}\n              isOpen={this.props.currentPopup === 'set-type' && canSetType}\n              issue={issue}\n              setIssueProperty={this.setIssueProperty}\n              togglePopup={this.props.togglePopup}\n            />\n          </li>\n          {!isSecurityHotspot && (\n            <li className=\"issue-meta\">\n              <IssueSeverity\n                canSetSeverity={canSetSeverity}\n                isOpen={this.props.currentPopup === 'set-severity' && canSetSeverity}\n                issue={issue}\n                setIssueProperty={this.setIssueProperty}\n                togglePopup={this.props.togglePopup}\n              />\n            </li>\n          )}\n          <li className=\"issue-meta\">\n            <IssueTransition\n              hasTransitions={hasTransitions}\n              isOpen={this.props.currentPopup === 'transition' && hasTransitions}\n              issue={issue}\n              onChange={this.handleTransition}\n              togglePopup={this.props.togglePopup}\n            />\n          </li>\n          <li className=\"issue-meta\">\n            <IssueAssign\n              canAssign={canAssign}\n              isOpen={this.props.currentPopup === 'assign' && canAssign}\n              issue={issue}\n              onAssign={this.props.onAssign}\n              togglePopup={this.props.togglePopup}\n            />\n          </li>\n          {!isSecurityHotspot && issue.effort && (\n            <li className=\"issue-meta\">\n              <span className=\"issue-meta-label\">\n                {translateWithParameters('issue.x_effort', issue.effort)}\n              </span>\n            </li>\n          )}\n          {canComment && (\n            <IssueCommentAction\n              commentAutoTriggered={this.state.commentAutoTriggered}\n              commentPlaceholder={this.state.commentPlaceholder}\n              currentPopup={this.props.currentPopup}\n              issueKey={issue.key}\n              onChange={this.props.onChange}\n              toggleComment={this.toggleComment}\n            />\n          )}\n        </ul>\n        <ul className=\"list-inline\">\n          <li className=\"issue-meta js-issue-tags\">\n            <IssueTags\n              canSetTags={canSetTags}\n              isOpen={this.props.currentPopup === 'edit-tags' && canSetTags}\n              issue={issue}\n              onChange={this.props.onChange}\n              togglePopup={this.props.togglePopup}\n            />\n          </li>\n        </ul>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  onDelete: () => void;\n}\n\nexport default function CommentDeletePopup({ onDelete }: Props) {\n  return (\n    <DropdownOverlay placement={PopupPlacement.BottomRight}>\n      <div className=\"menu is-container\">\n        <div className=\"spacer-bottom\">{translate('issue.comment.delete_confirm_message')}</div>\n        <Button className=\"button-red\" onClick={onDelete}>\n          {translate('delete')}\n        </Button>\n      </div>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sanitize } from 'dompurify';\nimport * as React from 'react';\nimport { DeleteButton, EditButton } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DateFromNow from 'sonar-ui-common/components/intl/DateFromNow';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport Avatar from '../../ui/Avatar';\nimport CommentDeletePopup from '../popups/CommentDeletePopup';\nimport CommentPopup from '../popups/CommentPopup';\n\ninterface Props {\n  comment: T.IssueComment;\n  onDelete: (comment: string) => void;\n  onEdit: (comment: string, text: string) => void;\n}\n\ninterface State {\n  openPopup: string;\n}\n\nexport default class IssueCommentLine extends React.PureComponent<Props, State> {\n  state: State = {\n    openPopup: ''\n  };\n\n  handleEdit = (text: string) => {\n    this.props.onEdit(this.props.comment.key, text);\n    this.toggleEditPopup(false);\n  };\n\n  handleDelete = () => {\n    this.props.onDelete(this.props.comment.key);\n    this.toggleDeletePopup(false);\n  };\n\n  togglePopup = (popupName: string, force?: boolean) => {\n    this.setState(prevState => {\n      if (prevState.openPopup !== popupName && force !== false) {\n        return { openPopup: popupName };\n      } else if (prevState.openPopup === popupName && force !== true) {\n        return { openPopup: '' };\n      }\n      return prevState;\n    });\n  };\n\n  toggleDeletePopup = (force?: boolean) => {\n    this.togglePopup('delete', force);\n  };\n\n  toggleEditPopup = (force?: boolean) => {\n    this.togglePopup('edit', force);\n  };\n\n  closePopups = () => {\n    this.setState({ openPopup: '' });\n  };\n\n  render() {\n    const { comment } = this.props;\n    const author = comment.authorName || comment.author;\n    const displayName =\n      comment.authorActive === false && author\n        ? translateWithParameters('user.x_deleted', author)\n        : author;\n    return (\n      <div className=\"issue-comment\">\n        <div className=\"issue-comment-author\" title={displayName}>\n          <Avatar\n            className=\"little-spacer-right\"\n            hash={comment.authorAvatar}\n            name={author}\n            size={16}\n          />\n          {displayName}\n        </div>\n        <div\n          className=\"issue-comment-text markdown\"\n          dangerouslySetInnerHTML={{ __html: sanitize(comment.htmlText) }}\n        />\n        <div className=\"issue-comment-age\">\n          <DateFromNow date={comment.createdAt} />\n        </div>\n        <div className=\"issue-comment-actions\">\n          {comment.updatable && (\n            <div className=\"dropdown\">\n              <Toggler\n                closeOnClickOutside={false}\n                onRequestClose={this.closePopups}\n                open={this.state.openPopup === 'edit'}\n                overlay={\n                  <CommentPopup\n                    comment={comment}\n                    onComment={this.handleEdit}\n                    placeholder=\"\"\n                    placement={PopupPlacement.BottomRight}\n                    toggleComment={this.toggleEditPopup}\n                  />\n                }>\n                <EditButton\n                  className=\"js-issue-comment-edit button-small\"\n                  onClick={this.toggleEditPopup}\n                />\n              </Toggler>\n            </div>\n          )}\n          {comment.updatable && (\n            <div className=\"dropdown\">\n              <Toggler\n                onRequestClose={this.closePopups}\n                open={this.state.openPopup === 'delete'}\n                overlay={<CommentDeletePopup onDelete={this.handleDelete} />}>\n                <DeleteButton\n                  className=\"js-issue-comment-delete button-small\"\n                  onClick={this.toggleDeletePopup}\n                />\n              </Toggler>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport DateTimeFormatter from 'sonar-ui-common/components/intl/DateTimeFormatter';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { getIssueChangelog } from '../../../api/issues';\nimport Avatar from '../../ui/Avatar';\nimport IssueChangelogDiff from '../components/IssueChangelogDiff';\n\ninterface Props {\n  issue: Pick<T.Issue, 'author' | 'creationDate' | 'key'>;\n}\n\ninterface State {\n  changelog: T.IssueChangelog[];\n}\n\nexport default class ChangelogPopup extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { changelog: [] };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.loadChangelog();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadChangelog() {\n    getIssueChangelog(this.props.issue.key).then(\n      ({ changelog }) => {\n        if (this.mounted) {\n          this.setState({ changelog });\n        }\n      },\n      () => {}\n    );\n  }\n\n  render() {\n    const { issue } = this.props;\n    const { author } = issue;\n    return (\n      <DropdownOverlay placement={PopupPlacement.BottomRight}>\n        <div className=\"menu is-container issue-changelog\">\n          <table className=\"spaced\">\n            <tbody>\n              <tr>\n                <td className=\"thin text-left text-top nowrap\">\n                  <DateTimeFormatter date={issue.creationDate} />\n                </td>\n                <td className=\"text-left text-top\">\n                  {author ? `${translate('created_by')} ${author}` : translate('created')}\n                </td>\n              </tr>\n\n              {this.state.changelog.map((item, idx) => {\n                const userName = item.userName || item.user;\n\n                return (\n                  <tr key={idx}>\n                    <td className=\"thin text-left text-top nowrap\">\n                      <DateTimeFormatter date={item.creationDate} />\n                    </td>\n                    <td className=\"text-left text-top\">\n                      {userName && (\n                        <p>\n                          <Avatar\n                            className=\"little-spacer-right\"\n                            hash={item.avatar}\n                            name={userName}\n                            size={16}\n                          />\n                          {item.isUserActive\n                            ? userName\n                            : translateWithParameters('user.x_deleted', userName)}\n                        </p>\n                      )}\n                      {item.diffs.map(diff => (\n                        <IssueChangelogDiff diff={diff} key={diff.key} />\n                      ))}\n                    </td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport DateFromNow from 'sonar-ui-common/components/intl/DateFromNow';\nimport DateTimeFormatter from 'sonar-ui-common/components/intl/DateTimeFormatter';\nimport ChangelogPopup from '../popups/ChangelogPopup';\n\ninterface Props {\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'author' | 'creationDate' | 'key'>;\n  creationDate: string;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueChangelog extends React.PureComponent<Props> {\n  toggleChangelog = (open?: boolean) => {\n    this.props.togglePopup('changelog', open);\n  };\n\n  handleClick = () => {\n    this.toggleChangelog();\n  };\n\n  handleClose = () => {\n    this.toggleChangelog(false);\n  };\n\n  render() {\n    return (\n      <div className=\"dropdown\">\n        <Toggler\n          onRequestClose={this.handleClose}\n          open={this.props.isOpen}\n          overlay={<ChangelogPopup issue={this.props.issue} />}>\n          <Tooltip\n            mouseEnterDelay={0.5}\n            overlay={<DateTimeFormatter date={this.props.creationDate} />}>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-show-changelog\"\n              onClick={this.handleClick}>\n              <span className=\"issue-meta-label\">\n                <DateFromNow date={this.props.creationDate} />\n              </span>\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Tooltip>\n        </Toggler>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { WorkspaceContextShape } from '../../workspace/context';\n\nexport interface IssueMessageProps {\n  engine?: string;\n  engineName?: string;\n  manualVulnerability: boolean;\n  message: string;\n  onOpenRule: WorkspaceContextShape['openRule'];\n  organization: string;\n  ruleKey: string;\n}\n\nexport default function IssueMessage(props: IssueMessageProps) {\n  const { engine, engineName, manualVulnerability, message, organization, ruleKey } = props;\n  const ruleEngine = engineName ? engineName : engine;\n\n  return (\n    <div className=\"issue-message\">\n      <span className=\"spacer-right\">{message}</span>\n      <ButtonLink\n        aria-label={translate('issue.why_this_issue.long')}\n        className=\"issue-see-rule spacer-right\"\n        onClick={() => props.onOpenRule({ key: ruleKey, organization })}>\n        {translate('issue.why_this_issue')}\n      </ButtonLink>\n\n      {ruleEngine && (\n        <Tooltip overlay={translateWithParameters('issue.from_external_rule_engine', ruleEngine)}>\n          <div className=\"badge spacer-right text-top\">{ruleEngine}</div>\n        </Tooltip>\n      )}\n      {manualVulnerability && (\n        <Tooltip overlay={translate('issue.manual_vulnerability.description')}>\n          <div className=\"badge spacer-right text-top\">\n            {translate('issue.manual_vulnerability')}\n          </div>\n        </Tooltip>\n      )}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport QualifierIcon from 'sonar-ui-common/components/icons/QualifierIcon';\nimport TagsIcon from 'sonar-ui-common/components/icons/TagsIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { fileFromPath, limitComponentName } from 'sonar-ui-common/helpers/path';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\nimport SeverityHelper from '../../shared/SeverityHelper';\nimport StatusHelper from '../../shared/StatusHelper';\nimport Avatar from '../../ui/Avatar';\n\ninterface Props {\n  issue: T.Issue;\n  onFilter: (property: string, issue: T.Issue) => void;\n}\n\nexport default class SimilarIssuesPopup extends React.PureComponent<Props> {\n  handleSelect = (property: string) => {\n    this.props.onFilter(property, this.props.issue);\n  };\n\n  render() {\n    const { issue } = this.props;\n\n    const items = [\n      'type',\n      'severity',\n      'status',\n      'resolution',\n      'assignee',\n      'rule',\n      ...(issue.tags || []).map(tag => `tag###${tag}`),\n      'project',\n      issue.subProject ? 'module' : undefined,\n      'file'\n    ].filter(item => item) as string[];\n\n    const assignee = issue.assigneeName || issue.assignee;\n\n    return (\n      <DropdownOverlay noPadding={true}>\n        <header className=\"menu-search\">\n          <h6>{translate('issue.filter_similar_issues')}</h6>\n        </header>\n\n        <SelectList\n          className=\"issues-similar-issues-menu\"\n          currentItem={items[0]}\n          items={items}\n          onSelect={this.handleSelect}>\n          <SelectListItem className=\"display-flex-center\" item=\"type\">\n            <IssueTypeIcon className=\"little-spacer-right\" query={issue.type} />\n            {translate('issue.type', issue.type)}\n          </SelectListItem>\n\n          <SelectListItem item=\"severity\">\n            <SeverityHelper className=\"display-flex-center\" severity={issue.severity} />\n          </SelectListItem>\n\n          <SelectListItem item=\"status\">\n            <StatusHelper\n              className=\"display-flex-center\"\n              resolution={undefined}\n              status={issue.status}\n            />\n          </SelectListItem>\n\n          <SelectListItem item=\"resolution\">\n            {issue.resolution != null\n              ? translate('issue.resolution', issue.resolution)\n              : translate('unresolved')}\n          </SelectListItem>\n\n          <SelectListItem item=\"assignee\">\n            {assignee ? (\n              <span>\n                {translate('assigned_to')}\n                <Avatar\n                  className=\"little-spacer-left little-spacer-right\"\n                  hash={issue.assigneeAvatar}\n                  name={assignee}\n                  size={16}\n                />\n                {issue.assigneeActive === false\n                  ? translateWithParameters('user.x_deleted', assignee)\n                  : assignee}\n              </span>\n            ) : (\n              translate('unassigned')\n            )}\n          </SelectListItem>\n\n          <li className=\"divider\" />\n\n          <SelectListItem item=\"rule\">{limitComponentName(issue.ruleName)}</SelectListItem>\n\n          {issue.tags != null &&\n            issue.tags.map(tag => (\n              <SelectListItem item={`tag###${tag}`} key={`tag###${tag}`}>\n                <TagsIcon className=\"icon-half-transparent little-spacer-right text-middle\" />\n                <span className=\"text-middle\">{tag}</span>\n              </SelectListItem>\n            ))}\n\n          <li className=\"divider\" />\n\n          <SelectListItem item=\"project\">\n            <QualifierIcon className=\"little-spacer-right\" qualifier=\"TRK\" />\n            {issue.projectName}\n          </SelectListItem>\n\n          {issue.subProject != null && (\n            <SelectListItem item=\"module\">\n              <QualifierIcon className=\"little-spacer-right\" qualifier=\"BRC\" />\n              {issue.subProjectName}\n            </SelectListItem>\n          )}\n\n          <SelectListItem item=\"file\">\n            <QualifierIcon className=\"little-spacer-right\" qualifier={issue.componentQualifier} />\n            {fileFromPath(issue.componentLongName)}\n          </SelectListItem>\n        </SelectList>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport FilterIcon from 'sonar-ui-common/components/icons/FilterIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport SimilarIssuesPopup from '../popups/SimilarIssuesPopup';\n\ninterface Props {\n  isOpen: boolean;\n  issue: T.Issue;\n  togglePopup: (popup: string, show?: boolean) => void;\n  onFilter?: (property: string, issue: T.Issue) => void;\n}\n\nexport default class SimilarIssuesFilter extends React.PureComponent<Props> {\n  handleFilter = (property: string, issue: T.Issue) => {\n    this.togglePopup(false);\n    if (this.props.onFilter) {\n      this.props.onFilter(property, issue);\n    }\n  };\n\n  togglePopup = (open?: boolean) => {\n    this.props.togglePopup('similarIssues', open);\n  };\n\n  handleClose = () => {\n    this.togglePopup(false);\n  };\n\n  render() {\n    return (\n      <div className=\"dropdown\">\n        <Toggler\n          onRequestClose={this.handleClose}\n          open={this.props.isOpen}\n          overlay={<SimilarIssuesPopup issue={this.props.issue} onFilter={this.handleFilter} />}>\n          <ButtonLink\n            aria-label={translate('issue.filter_similar_issues')}\n            className=\"issue-action issue-action-with-options js-issue-filter\"\n            onClick={this.togglePopup}\n            title={translate('issue.filter_similar_issues')}>\n            <FilterIcon className=\"icon-half-transparent\" />\n            <DropdownIcon className=\"icon-half-transparent\" />\n          </ButtonLink>\n        </Toggler>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport LinkIcon from 'sonar-ui-common/components/icons/LinkIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { getBranchLikeQuery } from '../../../helpers/branch-like';\nimport { getComponentIssuesUrl } from '../../../helpers/urls';\nimport { BranchLike } from '../../../types/branch-like';\nimport LocationIndex from '../../common/LocationIndex';\nimport { WorkspaceContext } from '../../workspace/context';\nimport IssueChangelog from './IssueChangelog';\nimport IssueMessage from './IssueMessage';\nimport SimilarIssuesFilter from './SimilarIssuesFilter';\n\nexport interface IssueTitleBarProps {\n  branchLike?: BranchLike;\n  currentPopup?: string;\n  displayLocationsCount?: boolean;\n  displayLocationsLink?: boolean;\n  issue: T.Issue;\n  onFilter?: (property: string, issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default function IssueTitleBar(props: IssueTitleBarProps) {\n  const { issue } = props;\n  const hasSimilarIssuesFilter = props.onFilter != null;\n\n  const locationsCount =\n    issue.secondaryLocations.length +\n    issue.flows.reduce((sum, locations) => sum + locations.length, 0);\n\n  const locationsBadge = (\n    <Tooltip\n      overlay={translateWithParameters(\n        'issue.this_issue_involves_x_code_locations',\n        formatMeasure(locationsCount, 'INT')\n      )}>\n      <LocationIndex>{locationsCount}</LocationIndex>\n    </Tooltip>\n  );\n\n  const displayLocations = props.displayLocationsCount && locationsCount > 0;\n\n  const issueUrl = getComponentIssuesUrl(issue.project, {\n    ...getBranchLikeQuery(props.branchLike),\n    issues: issue.key,\n    open: issue.key,\n    types: issue.type === 'SECURITY_HOTSPOT' ? issue.type : undefined\n  });\n\n  return (\n    <div className=\"issue-row\">\n      <WorkspaceContext.Consumer>\n        {({ externalRulesRepoNames, openRule }) => (\n          <IssueMessage\n            engine={issue.externalRuleEngine}\n            engineName={\n              issue.externalRuleEngine &&\n              externalRulesRepoNames &&\n              externalRulesRepoNames[issue.externalRuleEngine]\n            }\n            manualVulnerability={issue.fromHotspot && issue.type === 'VULNERABILITY'}\n            message={issue.message}\n            onOpenRule={openRule}\n            organization={issue.organization}\n            ruleKey={issue.rule}\n          />\n        )}\n      </WorkspaceContext.Consumer>\n\n      <div className=\"issue-row-meta\">\n        <ul className=\"issue-meta-list\">\n          <li className=\"issue-meta\">\n            <IssueChangelog\n              creationDate={issue.creationDate}\n              isOpen={props.currentPopup === 'changelog'}\n              issue={issue}\n              togglePopup={props.togglePopup}\n            />\n          </li>\n          {issue.textRange != null && (\n            <li className=\"issue-meta\">\n              <span className=\"issue-meta-label\" title={translate('line_number')}>\n                L{issue.textRange.endLine}\n              </span>\n            </li>\n          )}\n          {displayLocations && (\n            <li className=\"issue-meta\">\n              {props.displayLocationsLink ? (\n                <Link target=\"_blank\" to={issueUrl}>\n                  {locationsBadge}\n                </Link>\n              ) : (\n                locationsBadge\n              )}\n            </li>\n          )}\n          <li className=\"issue-meta\">\n            <Link\n              className=\"js-issue-permalink link-no-underline\"\n              target=\"_blank\"\n              title={translate('permalink')}\n              to={issueUrl}>\n              <LinkIcon />\n            </Link>\n          </li>\n          {hasSimilarIssuesFilter && (\n            <li className=\"issue-meta\">\n              <SimilarIssuesFilter\n                isOpen={props.currentPopup === 'similarIssues'}\n                issue={issue}\n                onFilter={props.onFilter}\n                togglePopup={props.togglePopup}\n              />\n            </li>\n          )}\n        </ul>\n      </div>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport Checkbox from 'sonar-ui-common/components/controls/Checkbox';\nimport { deleteIssueComment, editIssueComment } from '../../api/issues';\nimport { BranchLike } from '../../types/branch-like';\nimport { updateIssue } from './actions';\nimport IssueActionsBar from './components/IssueActionsBar';\nimport IssueCommentLine from './components/IssueCommentLine';\nimport IssueTitleBar from './components/IssueTitleBar';\n\ninterface Props {\n  branchLike?: BranchLike;\n  checked?: boolean;\n  currentPopup?: string;\n  displayLocationsCount?: boolean;\n  displayLocationsLink?: boolean;\n  issue: T.Issue;\n  onAssign: (login: string) => void;\n  onChange: (issue: T.Issue) => void;\n  onCheck?: (issue: string) => void;\n  onClick: (issueKey: string) => void;\n  onFilter?: (property: string, issue: T.Issue) => void;\n  selected: boolean;\n  togglePopup: (popup: string, show: boolean | void) => void;\n}\n\nexport default class IssueView extends React.PureComponent<Props> {\n  handleCheck = () => {\n    if (this.props.onCheck) {\n      this.props.onCheck(this.props.issue.key);\n    }\n  };\n\n  handleClick = (event: React.MouseEvent<HTMLDivElement>) => {\n    if (!isClickable(event.target as HTMLElement) && this.props.onClick) {\n      event.preventDefault();\n      this.props.onClick(this.props.issue.key);\n    }\n  };\n\n  editComment = (comment: string, text: string) => {\n    updateIssue(this.props.onChange, editIssueComment({ comment, text }));\n  };\n\n  deleteComment = (comment: string) => {\n    updateIssue(this.props.onChange, deleteIssueComment({ comment }));\n  };\n\n  render() {\n    const { issue } = this.props;\n\n    const hasCheckbox = this.props.onCheck != null;\n\n    const issueClass = classNames('issue', {\n      hotspot: issue.type === 'SECURITY_HOTSPOT',\n      'issue-with-checkbox': hasCheckbox,\n      selected: this.props.selected\n    });\n\n    return (\n      <div\n        className={issueClass}\n        data-issue={issue.key}\n        onClick={this.handleClick}\n        role=\"listitem\"\n        tabIndex={0}>\n        <IssueTitleBar\n          branchLike={this.props.branchLike}\n          currentPopup={this.props.currentPopup}\n          displayLocationsCount={this.props.displayLocationsCount}\n          displayLocationsLink={this.props.displayLocationsLink}\n          issue={issue}\n          onFilter={this.props.onFilter}\n          togglePopup={this.props.togglePopup}\n        />\n        <IssueActionsBar\n          currentPopup={this.props.currentPopup}\n          issue={issue}\n          onAssign={this.props.onAssign}\n          onChange={this.props.onChange}\n          togglePopup={this.props.togglePopup}\n        />\n        {issue.comments && issue.comments.length > 0 && (\n          <div className=\"issue-comments\">\n            {issue.comments.map(comment => (\n              <IssueCommentLine\n                comment={comment}\n                key={comment.key}\n                onDelete={this.deleteComment}\n                onEdit={this.editComment}\n              />\n            ))}\n          </div>\n        )}\n        {hasCheckbox && (\n          <>\n            <Checkbox\n              checked={this.props.checked || false}\n              className=\"issue-checkbox-container\"\n              onCheck={this.handleCheck}\n            />\n          </>\n        )}\n      </div>\n    );\n  }\n}\n\nfunction isClickable(node: HTMLElement | undefined | null): boolean {\n  if (!node) {\n    return false;\n  }\n  const clickableTags = ['A', 'BUTTON', 'INPUT', 'TEXTAREA'];\n  const tagName = (node.tagName || '').toUpperCase();\n  return clickableTags.includes(tagName) || isClickable(node.parentElement);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as key from 'keymaster';\nimport * as React from 'react';\nimport { setIssueAssignee } from '../../api/issues';\nimport { BranchLike } from '../../types/branch-like';\nimport { updateIssue } from './actions';\nimport './Issue.css';\nimport IssueView from './IssueView';\n\ninterface Props {\n  branchLike?: BranchLike;\n  checked?: boolean;\n  displayLocationsCount?: boolean;\n  displayLocationsLink?: boolean;\n  issue: T.Issue;\n  onChange: (issue: T.Issue) => void;\n  onCheck?: (issue: string) => void;\n  onClick: (issueKey: string) => void;\n  onFilter?: (property: string, issue: T.Issue) => void;\n  onPopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  openPopup?: string;\n  selected: boolean;\n}\n\nexport default class Issue extends React.PureComponent<Props> {\n  static defaultProps = {\n    selected: false\n  };\n\n  componentDidMount() {\n    if (this.props.selected) {\n      this.bindShortcuts();\n    }\n  }\n\n  componentWillUpdate(nextProps: Props) {\n    if (!nextProps.selected && this.props.selected) {\n      this.unbindShortcuts();\n    }\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (!prevProps.selected && this.props.selected) {\n      this.bindShortcuts();\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.props.selected) {\n      this.unbindShortcuts();\n    }\n  }\n\n  bindShortcuts() {\n    key('f', 'issues', () => {\n      this.togglePopup('transition');\n      return false;\n    });\n    key('a', 'issues', () => {\n      this.togglePopup('assign');\n      return false;\n    });\n    key('m', 'issues', () => {\n      if (this.props.issue.actions.includes('assign')) {\n        this.handleAssignement('_me');\n      }\n      return false;\n    });\n    key('i', 'issues', () => {\n      this.togglePopup('set-severity');\n      return false;\n    });\n    key('c', 'issues', () => {\n      this.togglePopup('comment');\n      return false;\n    });\n    key('t', 'issues', () => {\n      this.togglePopup('edit-tags');\n      return false;\n    });\n    key('space', 'issues', () => {\n      if (this.props.onCheck) {\n        this.props.onCheck(this.props.issue.key);\n        return false;\n      }\n      return undefined;\n    });\n  }\n\n  unbindShortcuts() {\n    key.unbind('f', 'issues');\n    key.unbind('a', 'issues');\n    key.unbind('m', 'issues');\n    key.unbind('i', 'issues');\n    key.unbind('c', 'issues');\n    key.unbind('space', 'issues');\n    key.unbind('t', 'issues');\n  }\n\n  togglePopup = (popupName: string, open?: boolean) => {\n    this.props.onPopupToggle(this.props.issue.key, popupName, open);\n  };\n\n  handleAssignement = (login: string) => {\n    const { issue } = this.props;\n    if (issue.assignee !== login) {\n      updateIssue(this.props.onChange, setIssueAssignee({ issue: issue.key, assignee: login }));\n    }\n    this.togglePopup('assign', false);\n  };\n\n  render() {\n    return (\n      <IssueView\n        branchLike={this.props.branchLike}\n        checked={this.props.checked}\n        currentPopup={this.props.openPopup}\n        displayLocationsCount={this.props.displayLocationsCount}\n        displayLocationsLink={this.props.displayLocationsLink}\n        issue={this.props.issue}\n        onAssign={this.handleAssignement}\n        onChange={this.props.onChange}\n        onCheck={this.props.onCheck}\n        onClick={this.props.onClick}\n        onFilter={this.props.onFilter}\n        selected={this.props.selected}\n        togglePopup={this.togglePopup}\n      />\n    );\n  }\n}\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = require(\"react\");\nvar Icon_1 = require(\"./Icon\");\nfunction ListIcon(_a) {\n    var _b = _a.fill, fill = _b === void 0 ? 'currentColor' : _b, iconProps = __rest(_a, [\"fill\"]);\n    return (React.createElement(Icon_1.default, __assign({}, iconProps),\n        React.createElement(\"path\", { d: \"M15.045 11.526v1.007q0 0.204-0.149 0.354t-0.354 0.149h-13.084q-0.204 0-0.354-0.149t-0.149-0.354v-1.006q0-0.204 0.149-0.354t0.354-0.149h13.084q0.204 0 0.354 0.149t0.149 0.354zM15.045 8.506v1.006q0 0.204-0.149 0.354t-0.354 0.149h-13.084q-0.204 0-0.354-0.149t-0.149-0.354v-1.006q0-0.204 0.149-0.354t0.354-0.149h13.084q0.204 0 0.354 0.149t0.149 0.354zM15.045 5.487v1.006q0 0.204-0.149 0.354t-0.354 0.149h-13.084q-0.204 0-0.354-0.149t-0.149-0.354v-1.006q0-0.204 0.149-0.354t0.354-0.149h13.084q0.204 0 0.354 0.149t0.149 0.354zM15.045 2.468v1.006q0 0.204-0.149 0.354t-0.354 0.149h-13.084q-0.204 0-0.354-0.149t-0.149-0.354v-1.006q0-0.204 0.149-0.354t0.354-0.149h13.084q0.204 0 0.354 0.149t0.149 0.354z\", style: { fill: fill } })));\n}\nexports.default = ListIcon;\n//# sourceMappingURL=ListIcon.js.map","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { searchIssues } from '../../../api/issues';\nimport { getBranchLikeQuery } from '../../../helpers/branch-like';\nimport { parseIssueFromResponse } from '../../../helpers/issues';\nimport { BranchLike } from '../../../types/branch-like';\n\n// maximum possible value\nconst PAGE_SIZE = 500;\n\nfunction buildQuery(component: string, branchLike: BranchLike | undefined) {\n  return {\n    additionalFields: '_all',\n    resolved: 'false',\n    componentKeys: component,\n    s: 'FILE_LINE',\n    ...getBranchLikeQuery(branchLike)\n  };\n}\n\nexport function loadPage(\n  query: T.RawQuery,\n  page: number,\n  pageSize = PAGE_SIZE\n): Promise<T.Issue[]> {\n  return searchIssues({\n    ...query,\n    p: page,\n    ps: pageSize\n  }).then(r =>\n    r.issues.map(issue => parseIssueFromResponse(issue, r.components, r.users, r.rules))\n  );\n}\n\nexport function loadPageAndNext(\n  query: T.RawQuery,\n  toLine: number,\n  page: number,\n  pageSize = PAGE_SIZE\n): Promise<T.Issue[]> {\n  return loadPage(query, page).then(issues => {\n    if (issues.length === 0) {\n      return [];\n    }\n\n    const lastIssue = issues[issues.length - 1];\n\n    if (\n      (lastIssue.textRange != null && lastIssue.textRange.endLine > toLine) ||\n      issues.length < pageSize\n    ) {\n      return issues;\n    }\n\n    return loadPageAndNext(query, toLine, page + 1, pageSize).then(nextIssues => {\n      return [...issues, ...nextIssues];\n    });\n  });\n}\n\nexport default function loadIssues(\n  component: string,\n  _fromLine: number,\n  toLine: number,\n  branchLike: BranchLike | undefined\n): Promise<T.Issue[]> {\n  const query = buildQuery(component, branchLike);\n  return new Promise(resolve => {\n    loadPageAndNext(query, toLine, 1).then(issues => {\n      resolve(issues);\n    });\n  });\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { BranchLike } from '../../types/branch-like';\nimport Line from './components/Line';\nimport { getSecondaryIssueLocationsForLine } from './helpers/issueLocations';\nimport {\n  optimizeHighlightedSymbols,\n  optimizeLocationMessage,\n  optimizeSelectedIssue\n} from './helpers/lines';\n\nconst EMPTY_ARRAY: any[] = [];\n\nconst ZERO_LINE = {\n  code: '',\n  duplicated: false,\n  isNew: false,\n  line: 0\n};\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  componentKey: string;\n  displayAllIssues?: boolean;\n  displayIssueLocationsCount?: boolean;\n  displayIssueLocationsLink?: boolean;\n  displayLocationMarkers?: boolean;\n  duplications: T.Duplication[] | undefined;\n  duplicationsByLine: { [line: number]: number[] };\n  hasSourcesAfter: boolean;\n  hasSourcesBefore: boolean;\n  highlightedLine: number | undefined;\n  highlightedLocationMessage: { index: number; text: string | undefined } | undefined;\n  // `undefined` elements mean they are located in a different file,\n  // but kept to maintain the location indexes\n  highlightedLocations: (T.FlowLocation | undefined)[] | undefined;\n  highlightedSymbols: string[];\n  issueLocationsByLine: { [line: number]: T.LinearIssueLocation[] };\n  issuePopup: { issue: string; name: string } | undefined;\n  issues: T.Issue[] | undefined;\n  issuesByLine: { [line: number]: T.Issue[] };\n  loadDuplications: (line: T.SourceLine) => void;\n  loadingSourcesAfter: boolean;\n  loadingSourcesBefore: boolean;\n  loadSourcesAfter: () => void;\n  loadSourcesBefore: () => void;\n  onIssueChange: (issue: T.Issue) => void;\n  onIssuePopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  onIssuesClose: (line: T.SourceLine) => void;\n  onIssueSelect: (issueKey: string) => void;\n  onIssuesOpen: (line: T.SourceLine) => void;\n  onIssueUnselect: () => void;\n  onLocationSelect: ((index: number) => void) | undefined;\n  onSymbolClick: (symbols: string[]) => void;\n  openIssuesByLine: { [line: number]: boolean };\n  renderDuplicationPopup: (index: number, line: number) => React.ReactNode;\n  scroll?: (element: HTMLElement) => void;\n  selectedIssue: string | undefined;\n  sources: T.SourceLine[];\n  symbolsByLine: { [line: number]: string[] };\n}\n\nexport default class SourceViewerCode extends React.PureComponent<Props> {\n  getDuplicationsForLine = (line: T.SourceLine): number[] => {\n    return this.props.duplicationsByLine[line.line] || EMPTY_ARRAY;\n  };\n\n  getIssuesForLine = (line: T.SourceLine): T.Issue[] => {\n    return this.props.issuesByLine[line.line] || EMPTY_ARRAY;\n  };\n\n  getIssueLocationsForLine = (line: T.SourceLine): T.LinearIssueLocation[] => {\n    return this.props.issueLocationsByLine[line.line] || EMPTY_ARRAY;\n  };\n\n  renderLine = ({\n    line,\n    index,\n    displayCoverage,\n    displayDuplications,\n    displayIssues\n  }: {\n    line: T.SourceLine;\n    index: number;\n    displayCoverage: boolean;\n    displayDuplications: boolean;\n    displayIssues: boolean;\n  }) => {\n    const { highlightedLocationMessage, highlightedLocations, selectedIssue, sources } = this.props;\n\n    const secondaryIssueLocations = getSecondaryIssueLocationsForLine(line, highlightedLocations);\n\n    const duplicationsCount = this.props.duplications ? this.props.duplications.length : 0;\n\n    const issuesForLine = this.getIssuesForLine(line);\n\n    return (\n      <Line\n        branchLike={this.props.branchLike}\n        displayAllIssues={this.props.displayAllIssues}\n        displayCoverage={displayCoverage}\n        displayDuplications={displayDuplications}\n        displayIssueLocationsCount={this.props.displayIssueLocationsCount}\n        displayIssueLocationsLink={this.props.displayIssueLocationsLink}\n        displayIssues={displayIssues}\n        displayLocationMarkers={this.props.displayLocationMarkers}\n        duplications={this.getDuplicationsForLine(line)}\n        duplicationsCount={duplicationsCount}\n        highlighted={line.line === this.props.highlightedLine}\n        highlightedLocationMessage={optimizeLocationMessage(\n          highlightedLocationMessage,\n          secondaryIssueLocations\n        )}\n        highlightedSymbols={optimizeHighlightedSymbols(\n          this.props.symbolsByLine[line.line],\n          this.props.highlightedSymbols\n        )}\n        issueLocations={this.getIssueLocationsForLine(line)}\n        issuePopup={this.props.issuePopup}\n        issues={issuesForLine}\n        key={line.line}\n        last={index === this.props.sources.length - 1 && !this.props.hasSourcesAfter}\n        line={line}\n        loadDuplications={this.props.loadDuplications}\n        onIssueChange={this.props.onIssueChange}\n        onIssuePopupToggle={this.props.onIssuePopupToggle}\n        onIssueSelect={this.props.onIssueSelect}\n        onIssueUnselect={this.props.onIssueUnselect}\n        onIssuesClose={this.props.onIssuesClose}\n        onIssuesOpen={this.props.onIssuesOpen}\n        onLocationSelect={this.props.onLocationSelect}\n        onSymbolClick={this.props.onSymbolClick}\n        openIssues={this.props.openIssuesByLine[line.line] || false}\n        previousLine={index > 0 ? sources[index - 1] : undefined}\n        renderDuplicationPopup={this.props.renderDuplicationPopup}\n        scroll={this.props.scroll}\n        secondaryIssueLocations={secondaryIssueLocations}\n        selectedIssue={optimizeSelectedIssue(selectedIssue, issuesForLine)}\n      />\n    );\n  };\n\n  render() {\n    const { issues = [], sources } = this.props;\n\n    const displayCoverage = sources.some(s => s.coverageStatus != null);\n    const displayDuplications = sources.some(s => !!s.duplicated);\n    const displayIssues = issues.length > 0;\n\n    const hasFileIssues = displayIssues && issues.some(issue => !issue.textRange);\n\n    return (\n      <div className=\"source-viewer-code\">\n        {this.props.hasSourcesBefore && (\n          <div className=\"source-viewer-more-code\">\n            {this.props.loadingSourcesBefore ? (\n              <div className=\"js-component-viewer-loading-before\">\n                <i className=\"spinner\" />\n                <span className=\"note spacer-left\">\n                  {translate('source_viewer.loading_more_code')}\n                </span>\n              </div>\n            ) : (\n              <Button\n                className=\"js-component-viewer-source-before\"\n                onClick={this.props.loadSourcesBefore}>\n                {translate('source_viewer.load_more_code')}\n              </Button>\n            )}\n          </div>\n        )}\n\n        <table className=\"source-table\">\n          <tbody>\n            {hasFileIssues &&\n              this.renderLine({\n                line: ZERO_LINE,\n                index: -1,\n                displayCoverage,\n                displayDuplications,\n                displayIssues\n              })}\n            {sources.map((line, index) =>\n              this.renderLine({ line, index, displayCoverage, displayDuplications, displayIssues })\n            )}\n          </tbody>\n        </table>\n\n        {this.props.hasSourcesAfter && (\n          <div className=\"source-viewer-more-code\">\n            {this.props.loadingSourcesAfter ? (\n              <div className=\"js-component-viewer-loading-after\">\n                <i className=\"spinner\" />\n                <span className=\"note spacer-left\">\n                  {translate('source_viewer.loading_more_code')}\n                </span>\n              </div>\n            ) : (\n              <Button\n                className=\"js-component-viewer-source-after\"\n                onClick={this.props.loadSourcesAfter}>\n                {translate('source_viewer.load_more_code')}\n              </Button>\n            )}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport { getLocalizedMetricName } from 'sonar-ui-common/helpers/l10n';\nimport { isMetricKey, MetricKey } from '../../../types/metrics';\nimport Measure from '../../measure/Measure';\n\nexport interface MeasureWithMetric {\n  metric: T.Metric;\n  value?: string;\n}\n\ninterface Props {\n  measure: MeasureWithMetric;\n}\n\nexport default function MeasuresOverlayMeasure({ measure }: Props) {\n  return (\n    <div\n      className=\"measure measure-one-line\"\n      data-metric={measure.metric.key}\n      key={measure.metric.key}>\n      <span className=\"measure-name\">\n        {isMetricKey(measure.metric.key) &&\n          [MetricKey.bugs, MetricKey.vulnerabilities, MetricKey.code_smells].includes(\n            measure.metric.key\n          ) && <IssueTypeIcon className=\"little-spacer-right\" query={measure.metric.key} />}\n        {getLocalizedMetricName(measure.metric)}\n      </span>\n      <span className=\"measure-value\">\n        <Measure\n          metricKey={measure.metric.key}\n          metricType={measure.metric.type}\n          small={true}\n          value={measure.value}\n        />\n      </span>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { groupBy, keyBy, sortBy } from 'lodash';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { ResetButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport QualifierIcon from 'sonar-ui-common/components/icons/QualifierIcon';\nimport TagsIcon from 'sonar-ui-common/components/icons/TagsIcon';\nimport DuplicationsRating from 'sonar-ui-common/components/ui/DuplicationsRating';\nimport { getLocalizedMetricName, translate } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { getFacets } from '../../../api/issues';\nimport { getMeasures } from '../../../api/measures';\nimport { getAllMetrics } from '../../../api/metrics';\nimport { getBranchLikeQuery } from '../../../helpers/branch-like';\nimport { ISSUE_TYPES, SEVERITIES } from '../../../helpers/constants';\nimport { enhanceMeasuresWithMetrics, getDisplayMetrics } from '../../../helpers/measures';\nimport { getBranchLikeUrl } from '../../../helpers/urls';\nimport { BranchLike } from '../../../types/branch-like';\nimport Measure from '../../measure/Measure';\nimport SeverityHelper from '../../shared/SeverityHelper';\nimport CoverageRating from '../../ui/CoverageRating';\nimport MeasuresOverlayMeasure from './MeasuresOverlayMeasure';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  onClose: () => void;\n  sourceViewerFile: T.SourceViewerFile;\n}\n\ninterface Measures {\n  [metricKey: string]: T.MeasureEnhanced;\n}\n\ninterface State {\n  loading: boolean;\n  measures: Measures;\n  severitiesFacet?: T.FacetValue[];\n  showAllMeasures: boolean;\n  tagsFacet?: T.FacetValue[];\n  typesFacet?: T.FacetValue<T.IssueType>[];\n}\n\nexport default class MeasuresOverlay extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: true, measures: {}, showAllMeasures: false };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchData();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchData = () => {\n    Promise.all([this.fetchMeasures(), this.fetchIssues()]).then(\n      ([measures, facets]) => {\n        if (this.mounted) {\n          this.setState({ loading: false, measures, ...facets });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  fetchMeasures = () => {\n    return getAllMetrics().then(metrics => {\n      const metricKeys = getDisplayMetrics(metrics).map(metric => metric.key);\n\n      // eslint-disable-next-line promise/no-nesting\n      return getMeasures({\n        component: this.props.sourceViewerFile.key,\n        metricKeys: metricKeys.join(),\n        ...getBranchLikeQuery(this.props.branchLike)\n      }).then(measures => {\n        const withMetrics = enhanceMeasuresWithMetrics(measures, metrics).filter(\n          measure => measure.metric\n        );\n        return keyBy(withMetrics, measure => measure.metric.key);\n      });\n    });\n  };\n\n  fetchIssues = () => {\n    return getFacets(\n      {\n        componentKeys: this.props.sourceViewerFile.key,\n        resolved: 'false',\n        ...getBranchLikeQuery(this.props.branchLike)\n      },\n      ['types', 'severities', 'tags']\n    ).then(({ facets }) => {\n      const severitiesFacet = facets.find(f => f.property === 'severities');\n      const tagsFacet = facets.find(f => f.property === 'tags');\n      const typesFacet = facets.find(f => f.property === 'types');\n      return {\n        severitiesFacet: severitiesFacet && severitiesFacet.values,\n        tagsFacet: tagsFacet && tagsFacet.values,\n        typesFacet: typesFacet && (typesFacet.values as T.FacetValue<T.IssueType>[])\n      };\n    });\n  };\n\n  handleAllMeasuresClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.setState({ showAllMeasures: true });\n  };\n\n  renderMeasure = (measure: T.MeasureEnhanced | undefined) => {\n    return measure ? <MeasuresOverlayMeasure key={measure.metric.key} measure={measure} /> : null;\n  };\n\n  renderLines = () => {\n    const { measures } = this.state;\n\n    return (\n      <div className=\"measures-viewer-section\">\n        <div className=\"measures-viewer-card\">\n          <div className=\"measures\">\n            {this.renderMeasure(measures.lines)}\n            {this.renderMeasure(measures.ncloc)}\n            {this.renderMeasure(measures.comment_lines)}\n            {this.renderMeasure(measures.comment_lines_density)}\n          </div>\n\n          <div className=\"measures\">\n            {this.renderMeasure(measures.cognitive_complexity)}\n            {this.renderMeasure(measures.complexity)}\n            {this.renderMeasure(measures.function_complexity)}\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderBigMeasure = (measure: T.MeasureEnhanced | undefined) => {\n    return measure ? (\n      <div className=\"measure measure-big\" data-metric={measure.metric.key}>\n        <span className=\"measure-value\">\n          <Measure\n            metricKey={measure.metric.key}\n            metricType={measure.metric.type}\n            value={measure.value}\n          />\n        </span>\n        <span className=\"measure-name\">{getLocalizedMetricName(measure.metric, true)}</span>\n      </div>\n    ) : null;\n  };\n\n  renderIssues = () => {\n    const { measures, severitiesFacet, tagsFacet, typesFacet } = this.state;\n    return (\n      <div className=\"measures-viewer-section\">\n        <div className=\"measures-viewer-card\">\n          <div className=\"measures\">\n            {this.renderBigMeasure(measures.violations)}\n            {this.renderBigMeasure(measures.sqale_index)}\n          </div>\n          {measures.violations && !!measures.violations.value && (\n            <>\n              {typesFacet && (\n                <div className=\"measures\">\n                  {sortBy(typesFacet, f => ISSUE_TYPES.indexOf(f.val)).map(f => (\n                    <div className=\"measure measure-one-line\" key={f.val}>\n                      <span className=\"measure-name\">\n                        <IssueTypeIcon className=\"little-spacer-right\" query={f.val} />\n                        {translate('issue.type', f.val)}\n                      </span>\n                      <span className=\"measure-value\">{formatMeasure(f.count, 'SHORT_INT')}</span>\n                    </div>\n                  ))}\n                </div>\n              )}\n              {severitiesFacet && (\n                <div className=\"measures\">\n                  {sortBy(severitiesFacet, f => SEVERITIES.indexOf(f.val)).map(f => (\n                    <div className=\"measure measure-one-line\" key={f.val}>\n                      <span className=\"measure-name\">\n                        <SeverityHelper severity={f.val} />\n                      </span>\n                      <span className=\"measure-value\">{formatMeasure(f.count, 'SHORT_INT')}</span>\n                    </div>\n                  ))}\n                </div>\n              )}\n              {tagsFacet && (\n                <div className=\"measures\">\n                  {tagsFacet.map(f => (\n                    <div className=\"measure measure-one-line\" key={f.val}>\n                      <span className=\"measure-name\">\n                        <TagsIcon className=\"little-spacer-right\" />\n                        {f.val}\n                      </span>\n                      <span className=\"measure-value\">{formatMeasure(f.count, 'SHORT_INT')}</span>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </>\n          )}\n        </div>\n      </div>\n    );\n  };\n\n  renderCoverage = () => {\n    const { coverage } = this.state.measures;\n    if (!coverage) {\n      return null;\n    }\n    return (\n      <div className=\"measures-viewer-section\">\n        <div className=\"measures-viewer-card\">\n          <div className=\"measures\">\n            <div className=\"measures-chart\">\n              <CoverageRating size=\"big\" value={coverage.value} />\n            </div>\n            <div className=\"measure measure-big\" data-metric={coverage.metric.key}>\n              <span className=\"measure-value\">\n                <Measure\n                  metricKey={coverage.metric.key}\n                  metricType={coverage.metric.type}\n                  value={coverage.value}\n                />\n              </span>\n              <span className=\"measure-name\">{getLocalizedMetricName(coverage.metric)}</span>\n            </div>\n          </div>\n\n          <div className=\"measures\">\n            {this.renderMeasure(this.state.measures.uncovered_lines)}\n            {this.renderMeasure(this.state.measures.lines_to_cover)}\n            {this.renderMeasure(this.state.measures.uncovered_conditions)}\n            {this.renderMeasure(this.state.measures.conditions_to_cover)}\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderDuplications = () => {\n    const { duplicated_lines_density: duplications } = this.state.measures;\n    if (!duplications) {\n      return null;\n    }\n    return (\n      <div className=\"measures-viewer-section\">\n        <div className=\"measures-viewer-card\">\n          <div className=\"measures\">\n            <div className=\"measures-chart\">\n              <DuplicationsRating\n                muted={duplications.value === undefined}\n                size=\"big\"\n                value={Number(duplications.value || 0)}\n              />\n            </div>\n            <div className=\"measure measure-big\" data-metric={duplications.metric.key}>\n              <span className=\"measure-value\">\n                <Measure\n                  metricKey={duplications.metric.key}\n                  metricType={duplications.metric.type}\n                  value={duplications.value}\n                />\n              </span>\n              <span className=\"measure-name\">\n                {getLocalizedMetricName(duplications.metric, true)}\n              </span>\n            </div>\n          </div>\n\n          <div className=\"measures\">\n            {this.renderMeasure(this.state.measures.duplicated_blocks)}\n            {this.renderMeasure(this.state.measures.duplicated_lines)}\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderTests = () => {\n    const { measures } = this.state;\n    return (\n      <div className=\"measures-viewer\">\n        <div className=\"measures-viewer-section measures-viewer-section-limited\">\n          <div className=\"measures-viewer-card\">\n            <div className=\"measures\">\n              {this.renderMeasure(measures.tests)}\n              {this.renderMeasure(measures.test_success_density)}\n              {this.renderMeasure(measures.test_failures)}\n              {this.renderMeasure(measures.test_errors)}\n              {this.renderMeasure(measures.skipped_tests)}\n              {this.renderMeasure(measures.test_execution_time)}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderDomain = (domain: string, measures: T.MeasureEnhanced[]) => {\n    return (\n      <div className=\"measures-viewer-card\" key={domain}>\n        <div className=\"measures\">\n          <div className=\"measure measure-big\">\n            <span className=\"measure-name\">{translate('metric_domain', domain)}</span>\n          </div>\n          {sortBy(\n            measures.filter(measure => measure.value !== undefined),\n            measure => getLocalizedMetricName(measure.metric)\n          ).map(measure => this.renderMeasure(measure))}\n        </div>\n      </div>\n    );\n  };\n\n  renderAllMeasures = () => {\n    const domains = groupBy(Object.values(this.state.measures), measure => measure.metric.domain);\n    const domainKeys = Object.keys(domains);\n    const odd = domainKeys.filter((_, index) => index % 2 === 1);\n    const even = domainKeys.filter((_, index) => index % 2 === 0);\n    return (\n      <div className=\"measures-viewer measures-viewer-secondary\">\n        <div className=\"measures-viewer-section\">\n          {odd.map(domain => this.renderDomain(domain, domains[domain]))}\n        </div>\n        <div className=\"measures-viewer-section\">\n          {even.map(domain => this.renderDomain(domain, domains[domain]))}\n        </div>\n      </div>\n    );\n  };\n\n  render() {\n    const { branchLike, sourceViewerFile } = this.props;\n    const { loading } = this.state;\n\n    const header = translate('component_viewer.file_measures');\n    return (\n      <Modal contentLabel={header} onRequestClose={this.props.onClose} size=\"large\">\n        <div className=\"modal-head\">\n          <h2>{header}</h2>\n        </div>\n        <div className=\"modal-body modal-container\">\n          <div className=\"measures-viewer-header big-spacer-bottom\">\n            <div>\n              <QualifierIcon className=\"little-spacer-right\" qualifier=\"TRK\" />\n              <Link to={getBranchLikeUrl(sourceViewerFile.project, branchLike)}>\n                {sourceViewerFile.projectName}\n              </Link>\n\n              {sourceViewerFile.subProject && (\n                <>\n                  <QualifierIcon className=\"big-spacer-left little-spacer-right\" qualifier=\"BRC\" />\n                  {sourceViewerFile.subProjectName}\n                </>\n              )}\n            </div>\n\n            <div className=\"display-flex-center little-spacer-top\">\n              <QualifierIcon className=\"little-spacer-right\" qualifier={sourceViewerFile.q} />\n              {sourceViewerFile.path}\n            </div>\n          </div>\n\n          {loading ? (\n            <i className=\"spinner\" />\n          ) : (\n            <>\n              {sourceViewerFile.q === 'UTS' ? (\n                this.renderTests()\n              ) : (\n                <div className=\"measures-viewer\">\n                  {this.renderLines()}\n                  {this.renderIssues()}\n                  {this.renderCoverage()}\n                  {this.renderDuplications()}\n                </div>\n              )}\n            </>\n          )}\n\n          <div className=\"spacer-top\">\n            {this.state.showAllMeasures ? (\n              this.renderAllMeasures()\n            ) : (\n              <a className=\"js-show-all-measures\" href=\"#\" onClick={this.handleAllMeasuresClick}>\n                {translate('component_viewer.show_all_measures')}\n              </a>\n            )}\n          </div>\n        </div>\n\n        <footer className=\"modal-foot\">\n          <ResetButtonLink onClick={this.props.onClose}>{translate('close')}</ResetButtonLink>\n        </footer>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { stringify } from 'querystring';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { ButtonIcon } from 'sonar-ui-common/components/controls/buttons';\nimport { ClipboardIconButton } from 'sonar-ui-common/components/controls/clipboard';\nimport Dropdown from 'sonar-ui-common/components/controls/Dropdown';\nimport ListIcon from 'sonar-ui-common/components/icons/ListIcon';\nimport QualifierIcon from 'sonar-ui-common/components/icons/QualifierIcon';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { collapsedDirFromPath, fileFromPath } from 'sonar-ui-common/helpers/path';\nimport { omitNil } from 'sonar-ui-common/helpers/request';\nimport { getBaseUrl, getPathUrlAsString } from 'sonar-ui-common/helpers/urls';\nimport { getBranchLikeQuery } from '../../helpers/branch-like';\nimport { getBranchLikeUrl, getCodeUrl, getComponentIssuesUrl } from '../../helpers/urls';\nimport { BranchLike } from '../../types/branch-like';\nimport { ComponentQualifier } from '../../types/component';\nimport { WorkspaceContextShape } from '../workspace/context';\nimport MeasuresOverlay from './components/MeasuresOverlay';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  componentMeasures?: T.Measure[];\n  openComponent: WorkspaceContextShape['openComponent'];\n  showMeasures?: boolean;\n  sourceViewerFile: T.SourceViewerFile;\n}\n\ninterface State {\n  measuresOverlay: boolean;\n}\n\nconst METRIC_KEY_FOR_ISSUE_TYPE: { [type in T.IssueType]: string } = {\n  BUG: 'bugs',\n  VULNERABILITY: 'vulnerabilities',\n  CODE_SMELL: 'code_smells',\n  SECURITY_HOTSPOT: 'security_hotspots'\n};\n\nexport default class SourceViewerHeader extends React.PureComponent<Props, State> {\n  state: State = { measuresOverlay: false };\n\n  handleShowMeasuresClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    this.setState({ measuresOverlay: true });\n  };\n\n  handleMeasuresOverlayClose = () => {\n    this.setState({ measuresOverlay: false });\n  };\n\n  openInWorkspace = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    const { key } = this.props.sourceViewerFile;\n    this.props.openComponent({ branchLike: this.props.branchLike, key });\n  };\n\n  renderIssueMeasures = () => {\n    const { branchLike, componentMeasures, sourceViewerFile } = this.props;\n    return (\n      componentMeasures &&\n      componentMeasures.length > 0 && (\n        <>\n          <div className=\"source-viewer-header-measure-separator\" />\n\n          {['BUG', 'VULNERABILITY', 'CODE_SMELL', 'SECURITY_HOTSPOT'].map((type: T.IssueType) => {\n            const params = {\n              ...getBranchLikeQuery(branchLike),\n              fileUuids: sourceViewerFile.uuid,\n              resolved: 'false',\n              types: type\n            };\n\n            const measure = componentMeasures.find(\n              m => m.metric === METRIC_KEY_FOR_ISSUE_TYPE[type]\n            );\n            return (\n              <div className=\"source-viewer-header-measure\" key={type}>\n                <span className=\"source-viewer-header-measure-label\">\n                  {translate('issue.type', type)}\n                </span>\n                <span className=\"source-viewer-header-measure-value\">\n                  <Link to={getComponentIssuesUrl(sourceViewerFile.project, params)}>\n                    {formatMeasure((measure && measure.value) || 0, 'INT')}\n                  </Link>\n                </span>\n              </div>\n            );\n          })}\n        </>\n      )\n    );\n  };\n\n  render() {\n    const { showMeasures } = this.props;\n    const {\n      key,\n      measures,\n      path,\n      project,\n      projectName,\n      q,\n      subProject,\n      subProjectName\n    } = this.props.sourceViewerFile;\n    const unitTestsOrLines = q === ComponentQualifier.TestFile ? 'tests' : 'lines';\n    const workspace = false;\n    const rawSourcesLink =\n      getBaseUrl() +\n      '/api/sources/raw?' +\n      stringify(omitNil({ key, ...getBranchLikeQuery(this.props.branchLike) }));\n\n    // TODO favorite\n    return (\n      <div className=\"source-viewer-header display-flex-center\">\n        <div className=\"flex-1 little-spacer-top\">\n          <div className=\"component-name\">\n            <div className=\"component-name-parent\">\n              <a\n                className=\"link-with-icon\"\n                href={getPathUrlAsString(getBranchLikeUrl(project, this.props.branchLike))}>\n                <QualifierIcon qualifier=\"TRK\" /> <span>{projectName}</span>\n              </a>\n            </div>\n\n            {subProject !== undefined && (\n              <div className=\"component-name-parent\">\n                <QualifierIcon qualifier=\"BRC\" /> <span>{subProjectName}</span>\n              </div>\n            )}\n\n            <div className=\"component-name-path\">\n              <QualifierIcon qualifier={q} /> <span>{collapsedDirFromPath(path)}</span>\n              <span className=\"component-name-file\">{fileFromPath(path)}</span>\n              <span className=\"nudged-up spacer-left\">\n                <ClipboardIconButton className=\"button-link link-no-underline\" copyValue={path} />\n              </span>\n            </div>\n          </div>\n        </div>\n\n        {this.state.measuresOverlay && (\n          <MeasuresOverlay\n            branchLike={this.props.branchLike}\n            onClose={this.handleMeasuresOverlayClose}\n            sourceViewerFile={this.props.sourceViewerFile}\n          />\n        )}\n\n        {showMeasures && (\n          <div className=\"display-flex-center\">\n            {measures[unitTestsOrLines] && (\n              <div className=\"source-viewer-header-measure\">\n                <span className=\"source-viewer-header-measure-label\">\n                  {translate(`metric.${unitTestsOrLines}.name`)}\n                </span>\n                <span className=\"source-viewer-header-measure-value\">\n                  {formatMeasure(measures[unitTestsOrLines], 'SHORT_INT')}\n                </span>\n              </div>\n            )}\n\n            {measures.coverage !== undefined && (\n              <div className=\"source-viewer-header-measure\">\n                <span className=\"source-viewer-header-measure-label\">\n                  {translate('metric.coverage.name')}\n                </span>\n                <span className=\"source-viewer-header-measure-value\">\n                  {formatMeasure(measures.coverage, 'PERCENT')}\n                </span>\n              </div>\n            )}\n\n            {measures.duplicationDensity !== undefined && (\n              <div className=\"source-viewer-header-measure\">\n                <span className=\"source-viewer-header-measure-label\">\n                  {translate('duplications')}\n                </span>\n                <span className=\"source-viewer-header-measure-value\">\n                  {formatMeasure(measures.duplicationDensity, 'PERCENT')}\n                </span>\n              </div>\n            )}\n\n            {this.renderIssueMeasures()}\n          </div>\n        )}\n\n        <Dropdown\n          className=\"source-viewer-header-actions flex-0\"\n          overlay={\n            <ul className=\"menu\">\n              <li>\n                <a className=\"js-measures\" href=\"#\" onClick={this.handleShowMeasuresClick}>\n                  {translate('component_viewer.show_details')}\n                </a>\n              </li>\n              <li>\n                <Link\n                  className=\"js-new-window\"\n                  rel=\"noopener noreferrer\"\n                  target=\"_blank\"\n                  to={getCodeUrl(this.props.sourceViewerFile.project, this.props.branchLike, key)}>\n                  {translate('component_viewer.new_window')}\n                </Link>\n              </li>\n              {!workspace && (\n                <li>\n                  <a className=\"js-workspace\" href=\"#\" onClick={this.openInWorkspace}>\n                    {translate('component_viewer.open_in_workspace')}\n                  </a>\n                </li>\n              )}\n              <li>\n                <a\n                  className=\"js-raw-source\"\n                  href={rawSourcesLink}\n                  rel=\"noopener noreferrer\"\n                  target=\"_blank\">\n                  {translate('component_viewer.show_raw_source')}\n                </a>\n              </li>\n            </ul>\n          }\n          overlayPlacement={PopupPlacement.BottomRight}>\n          <ButtonIcon className=\"js-actions\">\n            <ListIcon />\n          </ButtonIcon>\n        </Dropdown>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { intersection, uniqBy } from 'lodash';\nimport * as React from 'react';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport {\n  getComponentData,\n  getComponentForSourceViewer,\n  getDuplications,\n  getSources\n} from '../../api/components';\nimport { getBranchLikeQuery, isSameBranchLike } from '../../helpers/branch-like';\nimport { BranchLike } from '../../types/branch-like';\nimport { WorkspaceContext } from '../workspace/context';\nimport DuplicationPopup from './components/DuplicationPopup';\nimport {\n  filterDuplicationBlocksByLine,\n  getDuplicationBlocksForIndex,\n  isDuplicationBlockInRemovedComponent\n} from './helpers/duplications';\nimport getCoverageStatus from './helpers/getCoverageStatus';\nimport {\n  duplicationsByLine,\n  issuesByLine,\n  locationsByLine,\n  symbolsByLine\n} from './helpers/indexing';\nimport defaultLoadIssues from './helpers/loadIssues';\nimport SourceViewerCode from './SourceViewerCode';\nimport { SourceViewerContext } from './SourceViewerContext';\nimport SourceViewerHeader from './SourceViewerHeader';\nimport SourceViewerHeaderSlim from './SourceViewerHeaderSlim';\nimport './styles.css';\n\n// TODO react-virtualized\n\nexport interface Props {\n  aroundLine?: number;\n  branchLike: BranchLike | undefined;\n  component: string;\n  componentMeasures?: T.Measure[];\n  displayAllIssues?: boolean;\n  displayIssueLocationsCount?: boolean;\n  displayIssueLocationsLink?: boolean;\n  displayLocationMarkers?: boolean;\n  highlightedLine?: number;\n  // `undefined` elements mean they are located in a different file,\n  // but kept to maintaint the location indexes\n  highlightedLocations?: (T.FlowLocation | undefined)[];\n  highlightedLocationMessage?: { index: number; text: string | undefined };\n  loadComponent?: (\n    component: string,\n    branchLike: BranchLike | undefined\n  ) => Promise<T.SourceViewerFile>;\n  loadIssues?: (\n    component: string,\n    from: number,\n    to: number,\n    branchLike: BranchLike | undefined\n  ) => Promise<T.Issue[]>;\n  loadSources?: (\n    component: string,\n    from: number,\n    to: number,\n    branchLike: BranchLike | undefined\n  ) => Promise<T.SourceLine[]>;\n  onLoaded?: (component: T.SourceViewerFile, sources: T.SourceLine[], issues: T.Issue[]) => void;\n  onLocationSelect?: (index: number) => void;\n  onIssueChange?: (issue: T.Issue) => void;\n  onIssueSelect?: (issueKey: string) => void;\n  onIssueUnselect?: () => void;\n  scroll?: (element: HTMLElement) => void;\n  selectedIssue?: string;\n  showMeasures?: boolean;\n  slimHeader?: boolean;\n}\n\ninterface State {\n  component?: T.SourceViewerFile;\n  duplicatedFiles?: T.Dict<T.DuplicatedFile>;\n  duplications?: T.Duplication[];\n  duplicationsByLine: { [line: number]: number[] };\n  hasSourcesAfter: boolean;\n  highlightedSymbols: string[];\n  issueLocationsByLine: { [line: number]: T.LinearIssueLocation[] };\n  issuePopup?: { issue: string; name: string };\n  issues?: T.Issue[];\n  issuesByLine: { [line: number]: T.Issue[] };\n  loading: boolean;\n  loadingSourcesAfter: boolean;\n  loadingSourcesBefore: boolean;\n  notAccessible: boolean;\n  notExist: boolean;\n  openIssuesByLine: { [line: number]: boolean };\n  selectedIssue?: string;\n  sourceRemoved: boolean;\n  sources?: T.SourceLine[];\n  symbolsByLine: { [line: number]: string[] };\n}\n\nconst LINES = 500;\n\nexport default class SourceViewerBase extends React.PureComponent<Props, State> {\n  node?: HTMLElement | null;\n  mounted = false;\n\n  static defaultProps = {\n    displayAllIssues: false,\n    displayIssueLocationsCount: true,\n    displayIssueLocationsLink: true,\n    displayLocationMarkers: true\n  };\n\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      duplicationsByLine: {},\n      hasSourcesAfter: false,\n      highlightedSymbols: [],\n      issuesByLine: {},\n      issueLocationsByLine: {},\n      loading: true,\n      loadingSourcesAfter: false,\n      loadingSourcesBefore: false,\n      notAccessible: false,\n      notExist: false,\n      openIssuesByLine: {},\n      selectedIssue: props.selectedIssue,\n      sourceRemoved: false,\n      symbolsByLine: {}\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchComponent();\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    // if a component or a branch has changed,\n    // set `loading: true` immediately to avoid unwanted scrolling in `LineCode`\n    if (\n      nextProps.component !== this.props.component ||\n      !isSameBranchLike(nextProps.branchLike, this.props.branchLike)\n    ) {\n      this.setState({ loading: true });\n    }\n    if (\n      nextProps.onIssueSelect !== undefined &&\n      nextProps.selectedIssue !== this.props.selectedIssue\n    ) {\n      this.setState({ selectedIssue: nextProps.selectedIssue });\n    }\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (\n      prevProps.component !== this.props.component ||\n      !isSameBranchLike(prevProps.branchLike, this.props.branchLike)\n    ) {\n      this.fetchComponent();\n    } else if (\n      this.props.aroundLine !== undefined &&\n      prevProps.aroundLine !== this.props.aroundLine &&\n      this.isLineOutsideOfRange(this.props.aroundLine)\n    ) {\n      this.fetchSources();\n    } else {\n      const { selectedIssue } = this.props;\n      const { issues } = this.state;\n      if (\n        selectedIssue !== undefined &&\n        issues !== undefined &&\n        issues.find(issue => issue.key === selectedIssue) === undefined\n      ) {\n        this.reloadIssues();\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  get loadComponent() {\n    return this.props.loadComponent || defaultLoadComponent;\n  }\n\n  get loadIssues() {\n    return this.props.loadIssues || defaultLoadIssues;\n  }\n\n  get propsLoadSources() {\n    return this.props.loadSources || defaultLoadSources;\n  }\n\n  computeCoverageStatus(lines: T.SourceLine[]) {\n    return lines.map(line => ({ ...line, coverageStatus: getCoverageStatus(line) }));\n  }\n\n  isLineOutsideOfRange(lineNumber: number) {\n    const { sources } = this.state;\n    if (sources && sources.length > 0) {\n      const firstLine = sources[0];\n      const lastList = sources[sources.length - 1];\n      return lineNumber < firstLine.line || lineNumber > lastList.line;\n    } else {\n      return true;\n    }\n  }\n\n  fetchComponent() {\n    this.setState({ loading: true });\n\n    const to = (this.props.aroundLine || 0) + LINES;\n    const loadIssues = (component: T.SourceViewerFile, sources: T.SourceLine[]) => {\n      this.loadIssues(this.props.component, 1, to, this.props.branchLike).then(\n        issues => {\n          if (this.mounted) {\n            const finalSources = sources.slice(0, LINES);\n\n            this.setState(\n              {\n                component,\n                duplicatedFiles: undefined,\n                duplications: undefined,\n                duplicationsByLine: {},\n                hasSourcesAfter: sources.length > LINES,\n                highlightedSymbols: [],\n                issueLocationsByLine: locationsByLine(issues),\n                issues,\n                issuesByLine: issuesByLine(issues),\n                loading: false,\n                notAccessible: false,\n                notExist: false,\n                openIssuesByLine: {},\n                issuePopup: undefined,\n                sourceRemoved: false,\n                sources: this.computeCoverageStatus(finalSources),\n                symbolsByLine: symbolsByLine(sources.slice(0, LINES))\n              },\n              () => {\n                if (this.props.onLoaded) {\n                  this.props.onLoaded(component, finalSources, issues);\n                }\n              }\n            );\n          }\n        },\n        () => {\n          // TODO\n        }\n      );\n    };\n\n    const onFailLoadComponent = (response: Response) => {\n      // TODO handle other statuses\n      if (this.mounted) {\n        if (response.status === 403) {\n          this.setState({ loading: false, notAccessible: true });\n        } else if (response.status === 404) {\n          this.setState({ loading: false, notExist: true });\n        }\n      }\n    };\n\n    const onFailLoadSources = (response: Response, component: T.SourceViewerFile) => {\n      // TODO handle other statuses\n      if (this.mounted) {\n        if (response.status === 403) {\n          this.setState({ component, loading: false, notAccessible: true });\n        } else if (response.status === 404) {\n          this.setState({ component, loading: false, sourceRemoved: true });\n        }\n      }\n    };\n\n    const onResolve = (component: T.SourceViewerFile) => {\n      const sourcesRequest =\n        component.q === 'FIL' || component.q === 'UTS' ? this.loadSources() : Promise.resolve([]);\n      sourcesRequest.then(\n        sources => loadIssues(component, sources),\n        response => onFailLoadSources(response, component)\n      );\n    };\n\n    this.loadComponent(this.props.component, this.props.branchLike).then(\n      onResolve,\n      onFailLoadComponent\n    );\n  }\n\n  fetchSources() {\n    this.loadSources().then(\n      sources => {\n        if (this.mounted) {\n          const finalSources = sources.slice(0, LINES);\n          this.setState(\n            {\n              sources: sources.slice(0, LINES),\n              hasSourcesAfter: sources.length > LINES\n            },\n            () => {\n              if (this.props.onLoaded && this.state.component && this.state.issues) {\n                this.props.onLoaded(this.state.component, finalSources, this.state.issues);\n              }\n            }\n          );\n        }\n      },\n      () => {\n        // TODO\n      }\n    );\n  }\n\n  reloadIssues() {\n    if (!this.state.sources) {\n      return;\n    }\n    const firstSourceLine = this.state.sources[0];\n    const lastSourceLine = this.state.sources[this.state.sources.length - 1];\n    this.loadIssues(\n      this.props.component,\n      firstSourceLine && firstSourceLine.line,\n      lastSourceLine && lastSourceLine.line,\n      this.props.branchLike\n    ).then(\n      issues => {\n        if (this.mounted) {\n          this.setState({\n            issues,\n            issuesByLine: issuesByLine(issues),\n            issueLocationsByLine: locationsByLine(issues)\n          });\n        }\n      },\n      () => {\n        // TODO\n      }\n    );\n  }\n\n  loadSources = (): Promise<T.SourceLine[]> => {\n    return new Promise((resolve, reject) => {\n      const onFailLoadSources = (response: Response) => {\n        // TODO handle other statuses\n        if (this.mounted) {\n          if ([403, 404].includes(response.status)) {\n            reject(response);\n          } else {\n            resolve([]);\n          }\n        }\n      };\n\n      const from = this.props.aroundLine ? Math.max(1, this.props.aroundLine - LINES / 2 + 1) : 1;\n\n      let to = this.props.aroundLine ? this.props.aroundLine + LINES / 2 + 1 : LINES + 1;\n      // make sure we try to download `LINES` lines\n      if (from === 1 && to < LINES) {\n        to = LINES;\n      }\n      // request one additional line to define `hasSourcesAfter`\n      to++;\n\n      return this.propsLoadSources(this.props.component, from, to, this.props.branchLike).then(\n        sources => resolve(sources),\n        onFailLoadSources\n      );\n    });\n  };\n\n  loadSourcesBefore = () => {\n    if (!this.state.sources) {\n      return;\n    }\n    const firstSourceLine = this.state.sources[0];\n    this.setState({ loadingSourcesBefore: true });\n    const from = Math.max(1, firstSourceLine.line - LINES);\n    Promise.all([\n      this.propsLoadSources(\n        this.props.component,\n        from,\n        firstSourceLine.line - 1,\n        this.props.branchLike\n      ),\n      this.loadIssues(this.props.component, from, firstSourceLine.line - 1, this.props.branchLike)\n    ]).then(\n      ([sources, issues]) => {\n        if (this.mounted) {\n          this.setState(prevState => {\n            const nextIssues = uniqBy([...issues, ...(prevState.issues || [])], issue => issue.key);\n            return {\n              issues: nextIssues,\n              issuesByLine: issuesByLine(nextIssues),\n              issueLocationsByLine: locationsByLine(nextIssues),\n              loadingSourcesBefore: false,\n              sources: [...this.computeCoverageStatus(sources), ...(prevState.sources || [])],\n              symbolsByLine: { ...prevState.symbolsByLine, ...symbolsByLine(sources) }\n            };\n          });\n        }\n      },\n      () => {\n        // TODO\n      }\n    );\n  };\n\n  loadSourcesAfter = () => {\n    if (!this.state.sources) {\n      return;\n    }\n    const lastSourceLine = this.state.sources[this.state.sources.length - 1];\n    this.setState({ loadingSourcesAfter: true });\n    const fromLine = lastSourceLine.line + 1;\n    // request one additional line to define `hasSourcesAfter`\n    const toLine = lastSourceLine.line + LINES + 1;\n    Promise.all([\n      this.propsLoadSources(this.props.component, fromLine, toLine, this.props.branchLike),\n      this.loadIssues(this.props.component, fromLine, toLine, this.props.branchLike)\n    ]).then(\n      ([sources, issues]) => {\n        if (this.mounted) {\n          this.setState(prevState => {\n            const nextIssues = uniqBy([...(prevState.issues || []), ...issues], issue => issue.key);\n            return {\n              issues: nextIssues,\n              issuesByLine: issuesByLine(nextIssues),\n              issueLocationsByLine: locationsByLine(nextIssues),\n              hasSourcesAfter: sources.length > LINES,\n              loadingSourcesAfter: false,\n              sources: [\n                ...(prevState.sources || []),\n                ...this.computeCoverageStatus(sources.slice(0, LINES))\n              ],\n              symbolsByLine: {\n                ...prevState.symbolsByLine,\n                ...symbolsByLine(sources.slice(0, LINES))\n              }\n            };\n          });\n        }\n      },\n      () => {\n        // TODO\n      }\n    );\n  };\n\n  loadDuplications = () => {\n    getDuplications({\n      key: this.props.component,\n      ...getBranchLikeQuery(this.props.branchLike)\n    }).then(\n      r => {\n        if (this.mounted) {\n          this.setState({\n            duplications: r.duplications,\n            duplicationsByLine: duplicationsByLine(r.duplications),\n            duplicatedFiles: r.files\n          });\n        }\n      },\n      () => {\n        // TODO\n      }\n    );\n  };\n\n  handleIssuePopupToggle = (issue: string, popupName: string, open?: boolean) => {\n    this.setState((state: State) => {\n      const samePopup =\n        state.issuePopup && state.issuePopup.name === popupName && state.issuePopup.issue === issue;\n      if (open !== false && !samePopup) {\n        return { issuePopup: { issue, name: popupName } };\n      } else if (open !== true && samePopup) {\n        return { issuePopup: undefined };\n      }\n      return null;\n    });\n  };\n\n  handleSymbolClick = (symbols: string[]) => {\n    this.setState(state => {\n      const shouldDisable = intersection(state.highlightedSymbols, symbols).length > 0;\n      const highlightedSymbols = shouldDisable ? [] : symbols;\n      return { highlightedSymbols };\n    });\n  };\n\n  handleIssueSelect = (issue: string) => {\n    if (this.props.onIssueSelect) {\n      this.props.onIssueSelect(issue);\n    } else {\n      this.setState({ selectedIssue: issue });\n    }\n  };\n\n  handleIssueUnselect = () => {\n    if (this.props.onIssueUnselect) {\n      this.props.onIssueUnselect();\n    } else {\n      this.setState({ selectedIssue: undefined });\n    }\n  };\n\n  handleOpenIssues = (line: T.SourceLine) => {\n    this.setState(state => ({\n      openIssuesByLine: { ...state.openIssuesByLine, [line.line]: true }\n    }));\n  };\n\n  handleCloseIssues = (line: T.SourceLine) => {\n    this.setState(state => ({\n      openIssuesByLine: { ...state.openIssuesByLine, [line.line]: false }\n    }));\n  };\n\n  handleIssueChange = (issue: T.Issue) => {\n    this.setState(({ issues = [] }) => {\n      const newIssues = issues.map(candidate => (candidate.key === issue.key ? issue : candidate));\n      return { issues: newIssues, issuesByLine: issuesByLine(newIssues) };\n    });\n    if (this.props.onIssueChange) {\n      this.props.onIssueChange(issue);\n    }\n  };\n\n  renderDuplicationPopup = (index: number, line: number) => {\n    const { component, duplicatedFiles, duplications } = this.state;\n\n    if (!component || !duplicatedFiles) {\n      return null;\n    }\n\n    const blocks = getDuplicationBlocksForIndex(duplications, index);\n\n    return (\n      <WorkspaceContext.Consumer>\n        {({ openComponent }) => (\n          <DuplicationPopup\n            blocks={filterDuplicationBlocksByLine(blocks, line)}\n            branchLike={this.props.branchLike}\n            duplicatedFiles={duplicatedFiles}\n            inRemovedComponent={isDuplicationBlockInRemovedComponent(blocks)}\n            openComponent={openComponent}\n            sourceViewerFile={component}\n          />\n        )}\n      </WorkspaceContext.Consumer>\n    );\n  };\n\n  renderCode(sources: T.SourceLine[]) {\n    const hasSourcesBefore = sources.length > 0 && sources[0].line > 1;\n    return (\n      <SourceViewerCode\n        branchLike={this.props.branchLike}\n        componentKey={this.props.component}\n        displayAllIssues={this.props.displayAllIssues}\n        displayIssueLocationsCount={this.props.displayIssueLocationsCount}\n        displayIssueLocationsLink={this.props.displayIssueLocationsLink}\n        displayLocationMarkers={this.props.displayLocationMarkers}\n        duplications={this.state.duplications}\n        duplicationsByLine={this.state.duplicationsByLine}\n        hasSourcesAfter={this.state.hasSourcesAfter}\n        hasSourcesBefore={hasSourcesBefore}\n        highlightedLine={this.props.highlightedLine}\n        highlightedLocationMessage={this.props.highlightedLocationMessage}\n        highlightedLocations={this.props.highlightedLocations}\n        highlightedSymbols={this.state.highlightedSymbols}\n        issueLocationsByLine={this.state.issueLocationsByLine}\n        issuePopup={this.state.issuePopup}\n        issues={this.state.issues}\n        issuesByLine={this.state.issuesByLine}\n        loadDuplications={this.loadDuplications}\n        loadSourcesAfter={this.loadSourcesAfter}\n        loadSourcesBefore={this.loadSourcesBefore}\n        loadingSourcesAfter={this.state.loadingSourcesAfter}\n        loadingSourcesBefore={this.state.loadingSourcesBefore}\n        onIssueChange={this.handleIssueChange}\n        onIssuePopupToggle={this.handleIssuePopupToggle}\n        onIssueSelect={this.handleIssueSelect}\n        onIssueUnselect={this.handleIssueUnselect}\n        onIssuesClose={this.handleCloseIssues}\n        onIssuesOpen={this.handleOpenIssues}\n        onLocationSelect={this.props.onLocationSelect}\n        onSymbolClick={this.handleSymbolClick}\n        openIssuesByLine={this.state.openIssuesByLine}\n        renderDuplicationPopup={this.renderDuplicationPopup}\n        scroll={this.props.scroll}\n        selectedIssue={this.state.selectedIssue}\n        sources={sources}\n        symbolsByLine={this.state.symbolsByLine}\n      />\n    );\n  }\n\n  renderHeader(branchLike: BranchLike | undefined, sourceViewerFile: T.SourceViewerFile) {\n    return this.props.slimHeader ? (\n      <SourceViewerHeaderSlim branchLike={branchLike} sourceViewerFile={sourceViewerFile} />\n    ) : (\n      <WorkspaceContext.Consumer>\n        {({ openComponent }) => (\n          <SourceViewerHeader\n            branchLike={this.props.branchLike}\n            componentMeasures={this.props.componentMeasures}\n            openComponent={openComponent}\n            showMeasures={this.props.showMeasures}\n            sourceViewerFile={sourceViewerFile}\n          />\n        )}\n      </WorkspaceContext.Consumer>\n    );\n  }\n\n  render() {\n    const { component, loading, sources, notAccessible, sourceRemoved } = this.state;\n\n    if (loading) {\n      return null;\n    }\n\n    if (this.state.notExist) {\n      return (\n        <Alert className=\"spacer-top\" variant=\"warning\">\n          {translate('component_viewer.no_component')}\n        </Alert>\n      );\n    }\n\n    if (notAccessible) {\n      return (\n        <Alert className=\"spacer-top\" variant=\"warning\">\n          {translate('code_viewer.no_source_code_displayed_due_to_security')}\n        </Alert>\n      );\n    }\n\n    if (!component) {\n      return null;\n    }\n\n    return (\n      <SourceViewerContext.Provider value={{ branchLike: this.props.branchLike, file: component }}>\n        <div className=\"source-viewer\" ref={node => (this.node = node)}>\n          {this.renderHeader(this.props.branchLike, component)}\n          {sourceRemoved && (\n            <Alert className=\"spacer-top\" variant=\"warning\">\n              {translate('code_viewer.no_source_code_displayed_due_to_source_removed')}\n            </Alert>\n          )}\n          {!sourceRemoved && sources !== undefined && this.renderCode(sources)}\n        </div>\n      </SourceViewerContext.Provider>\n    );\n  }\n}\n\nfunction defaultLoadComponent(\n  component: string,\n  branchLike: BranchLike | undefined\n): Promise<T.SourceViewerFile> {\n  return Promise.all([\n    getComponentForSourceViewer({ component, ...getBranchLikeQuery(branchLike) }),\n    getComponentData({ component, ...getBranchLikeQuery(branchLike) })\n  ]).then(([sourceViewerComponent, { component }]) => ({\n    ...sourceViewerComponent,\n    leakPeriodDate: component.leakPeriodDate\n  }));\n}\n\nfunction defaultLoadSources(\n  key: string,\n  from: number | undefined,\n  to: number | undefined,\n  branchLike: BranchLike | undefined\n) {\n  return getSources({ key, from, to, ...getBranchLikeQuery(branchLike) });\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".source-viewer{width:100%;min-height:200px;border:1px solid #cdcdcd;box-sizing:border-box;background-color:#fff;overflow:hidden}.source-table{width:100%;border:none;border-collapse:collapse}.source-viewer-header{position:relative;padding:2px 10px 4px;border-bottom:1px solid #e6e6e6;background-color:#f3f3f3}.source-viewer-header-measure{vertical-align:middle;font-size:13px}.source-viewer-header-measure .rating{font-size:18px}.source-viewer-header-measure-separator{margin:0 24px;height:30px;border-right:1px solid #cdcdcd}.source-viewer-header-measure+.source-viewer-header-measure{margin-left:24px}.source-viewer-header-measure-label{display:block;line-height:12px;color:#777;font-size:12px}.source-viewer-header-measure-value{display:block;margin-top:2px;line-height:18px;color:#444;font-size:16px}.source-viewer-header-actions{display:block;margin-left:24px;padding:8px 4px}.source-viewer-header-actions svg{margin-top:2px}.source-viewer-header-more-actions{position:absolute;z-index:7500;right:0;top:100%;padding:10px;border:1px solid #e6e6e6;border-right:none;background-color:#fff;line-height:1.8}.source-viewer-code{overflow-x:auto}.source-viewer-more-code{padding:40px 0;border-bottom:1px solid #e6e6e6;background-color:#f3f3f3;text-align:center}.source-viewer-more-code .spinner{top:-1px}.source-table+.source-viewer-more-code{border-bottom:none;border-top:1px solid #e6e6e6}.source-viewer-bubble-popup{font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:13px;text-align:left;-webkit-user-select:text;-ms-user-select:text;user-select:text}.issue-location.highlighted{border-color:#e1e1f2;background-color:#e1e1f2}.issue-location.selected{border-color:#f4b1b0;background-color:#f4b1b0}.measures-viewer{display:flex;margin:0 -8px}.measures-viewer+.measures-viewer{margin-top:8px}.measures-viewer-header{font-size:12px}.measures-viewer-secondary .measures-viewer-card{background-color:#f3f3f3}.measures-viewer-section{flex:1}.measures-viewer-section-limited{max-width:25%}.measures-viewer-card{margin:16px 8px;padding:8px;border:1px solid #e6e6e6;background-color:#fff}.measures+.measures{margin-top:16px;padding-top:16px;border-top:1px solid #e6e6e6}.measures-chart{display:inline-block;vertical-align:middle;width:80px;margin-right:24px;text-align:center}.measure{line-height:1.34}.measure-one-line{display:flex;justify-content:space-between}.measure-one-line .measure-name{display:inline}.measure-name{display:block;font-size:13px}.measure-value{color:#236a97;font-size:16px;font-weight:400}.measure-big{display:inline-block;vertical-align:middle}.measure-big .measure-name{margin-top:4px;margin-bottom:8px;font-size:16px}.measure-big .measure-value,.measure-big .rating{font-size:24px}.measure-big+.measure-big{margin-left:24px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var arrayMap = require('./_arrayMap'),\n    baseIteratee = require('./_baseIteratee'),\n    baseMap = require('./_baseMap'),\n    isArray = require('./isArray');\n\n/**\n * Creates an array of values by running each element in `collection` thru\n * `iteratee`. The iteratee is invoked with three arguments:\n * (value, index|key, collection).\n *\n * Many lodash methods are guarded to work as iteratees for methods like\n * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.\n *\n * The guarded methods are:\n * `ary`, `chunk`, `curry`, `curryRight`, `drop`, `dropRight`, `every`,\n * `fill`, `invert`, `parseInt`, `random`, `range`, `rangeRight`, `repeat`,\n * `sampleSize`, `slice`, `some`, `sortBy`, `split`, `take`, `takeRight`,\n * `template`, `trim`, `trimEnd`, `trimStart`, and `words`\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n * @example\n *\n * function square(n) {\n *   return n * n;\n * }\n *\n * _.map([4, 8], square);\n * // => [16, 64]\n *\n * _.map({ 'a': 4, 'b': 8 }, square);\n * // => [16, 64] (iteration order is not guaranteed)\n *\n * var users = [\n *   { 'user': 'barney' },\n *   { 'user': 'fred' }\n * ];\n *\n * // The `_.property` iteratee shorthand.\n * _.map(users, 'user');\n * // => ['barney', 'fred']\n */\nfunction map(collection, iteratee) {\n  var func = isArray(collection) ? arrayMap : baseMap;\n  return func(collection, baseIteratee(iteratee, 3));\n}\n\nmodule.exports = map;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = require(\"react\");\nvar react_intl_1 = require(\"react-intl\");\nvar dates_1 = require(\"../../helpers/dates\");\nexports.formatterOption = {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n    hour: 'numeric',\n    minute: 'numeric',\n};\nfunction DateTimeFormatter(_a) {\n    var children = _a.children, date = _a.date;\n    return (React.createElement(react_intl_1.FormattedDate, __assign({ value: dates_1.parseDate(date) }, exports.formatterOption), children));\n}\nexports.default = DateTimeFormatter;\n//# sourceMappingURL=DateTimeFormatter.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = require(\"react\");\nvar react_intl_1 = require(\"react-intl\");\nvar dates_1 = require(\"../../helpers/dates\");\nfunction DateFromNow(_a) {\n    var children = _a.children, date = _a.date;\n    return React.createElement(react_intl_1.FormattedRelative, { value: dates_1.parseDate(date) }, children);\n}\nexports.default = DateFromNow;\n//# sourceMappingURL=DateFromNow.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar classNames = require(\"classnames\");\nvar React = require(\"react\");\nvar measures_1 = require(\"../../helpers/measures\");\nrequire(\"./Level.css\");\nfunction Level(props) {\n    var formatted = measures_1.formatMeasure(props.level, 'LEVEL');\n    var className = classNames(props.className, 'level', 'level-' + props.level, {\n        'level-small': props.small,\n        'level-muted': props.muted,\n    });\n    return (React.createElement(\"span\", { \"aria-label\": props['aria-label'], \"aria-labelledby\": props['aria-labelledby'], className: className }, formatted));\n}\nexports.default = Level;\n//# sourceMappingURL=Level.js.map","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport SeverityIcon from 'sonar-ui-common/components/icons/SeverityIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  className?: string;\n  severity: string;\n}\n\nexport default function SeverityHelper({ className, severity }: Props) {\n  if (!severity) {\n    return null;\n  }\n  return (\n    <span className={className}>\n      <SeverityIcon className=\"little-spacer-right\" severity={severity} />\n      {translate('severity', severity)}\n    </span>\n  );\n}\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar classNames = require(\"classnames\");\nvar React = require(\"react\");\nvar l10n_1 = require(\"../../helpers/l10n\");\nvar measures_1 = require(\"../../helpers/measures\");\nrequire(\"./Rating.css\");\nfunction Rating(_a) {\n    var className = _a.className, _b = _a.muted, muted = _b === void 0 ? false : _b, _c = _a.small, small = _c === void 0 ? false : _c, value = _a.value, ariaAttrs = __rest(_a, [\"className\", \"muted\", \"small\", \"value\"]);\n    if (value === undefined) {\n        return (React.createElement(\"span\", __assign({ \"aria-label\": l10n_1.translate('metric.no_rating') }, ariaAttrs), \"\\u2013\"));\n    }\n    var formatted = measures_1.formatMeasure(value, 'RATING');\n    return (React.createElement(\"span\", __assign({ \"aria-label\": l10n_1.translateWithParameters('metric.has_rating_X', formatted), className: classNames('rating', \"rating-\" + formatted, { 'rating-small': small, 'rating-muted': muted }, className) }, ariaAttrs), formatted));\n}\nexports.default = Rating;\n//# sourceMappingURL=Rating.js.map","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getRatingTooltip as nextGetRatingTooltip, isDiffMetric } from '../../helpers/measures';\nimport { getLeakPeriod } from '../../helpers/periods';\n\nconst KNOWN_RATINGS = [\n  'sqale_rating',\n  'maintainability_rating', // Needed to provide the label for \"new_maintainability_rating\"\n  'reliability_rating',\n  'security_rating',\n  'security_review_rating'\n];\n\nexport function enhanceMeasure(measure: T.Measure, metrics: T.Dict<T.Metric>): T.MeasureEnhanced {\n  return {\n    ...measure,\n    metric: metrics[measure.metric],\n    leak: getLeakValue(measure)\n  };\n}\n\nexport function getLeakValue(measure: T.MeasureIntern | undefined): string | undefined {\n  if (!measure || !measure.periods) {\n    return undefined;\n  }\n  const period = getLeakPeriod(measure.periods);\n  return period && period.value;\n}\n\nexport function getRatingTooltip(metricKey: string, value: number): string | undefined {\n  const finalMetricKey = isDiffMetric(metricKey) ? metricKey.substr(4) : metricKey;\n  if (KNOWN_RATINGS.includes(finalMetricKey)) {\n    return nextGetRatingTooltip(finalMetricKey, value);\n  }\n  return undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport Level from 'sonar-ui-common/components/ui/Level';\nimport Rating from 'sonar-ui-common/components/ui/Rating';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { getRatingTooltip } from './utils';\n\ninterface Props {\n  className?: string;\n  decimals?: number | null;\n  metricKey: string;\n  metricType: string;\n  small?: boolean;\n  value: string | undefined;\n}\n\nexport default function Measure({\n  className,\n  decimals,\n  metricKey,\n  metricType,\n  small,\n  value\n}: Props) {\n  if (value === undefined) {\n    return <span className={className}></span>;\n  }\n\n  if (metricType === 'LEVEL') {\n    return <Level className={className} level={value} small={small} />;\n  }\n\n  if (metricType !== 'RATING') {\n    const formattedValue = formatMeasure(value, metricType, {\n      decimals,\n      omitExtraDecimalZeros: metricType === 'PERCENT'\n    });\n    return <span className={className}>{formattedValue != null ? formattedValue : ''}</span>;\n  }\n\n  const tooltip = getRatingTooltip(metricKey, Number(value));\n  const rating = <Rating small={small} value={value} />;\n  if (tooltip) {\n    return (\n      <Tooltip overlay={tooltip}>\n        <span className={className}>{rating}</span>\n      </Tooltip>\n    );\n  }\n  return rating;\n}\n","var api = require(\"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../css-loader/dist/cjs.js??ref--6-1!../../../postcss-loader/src/index.js??postcss!./Level.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".level{display:inline-block;min-width:80px;height:24px;line-height:24px;border-radius:24px;box-sizing:border-box;color:#fff;letter-spacing:.02em;font-size:13px;font-weight:400;text-align:center;text-shadow:0 0 1px rgba(0,0,0,.35)}.level,.level-small{width:auto;padding-left:9px;padding-right:9px}.level-small{min-width:64px;margin-top:-1px;margin-bottom:-1px;height:20px;line-height:20px;font-size:12px}.level-muted{background-color:#bdbdbd!important}a>.level{margin-bottom:-1px;border-bottom:1px solid;transition:all .2s ease}a>.level:hover{opacity:.8}.level-OK{background-color:#0a0}.level-WARN{background-color:#ed7d20}.level-ERROR{background-color:#d4333f}.level-NONE{background-color:#b4b4b4}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./TagsList.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { parseDate } from 'sonar-ui-common/helpers/dates';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { ApplicationPeriod } from '../types/application';\n\nfunction getPeriod<T extends T.Period | T.PeriodMeasure>(periods: T[] | undefined, index: number) {\n  if (!Array.isArray(periods)) {\n    return undefined;\n  }\n  return periods.find(period => period.index === index);\n}\n\nexport function getLeakPeriod<T extends T.Period | T.PeriodMeasure>(periods: T[] | undefined) {\n  return getPeriod(periods, 1);\n}\n\nexport function getPeriodLabel(\n  period: T.Period | undefined,\n  dateFormatter: (date: string) => string\n) {\n  if (!period) {\n    return undefined;\n  }\n\n  let parameter = period.modeParam || period.parameter || '';\n\n  switch (period.mode) {\n    case 'SPECIFIC_ANALYSIS':\n      parameter = dateFormatter(period.date);\n      break;\n    case 'PREVIOUS_VERSION':\n      parameter = parameter || dateFormatter(period.date);\n      break;\n    /*\n     * Handle legacy period modes, that predate MMF-1579\n     */\n    case 'previous_version':\n      if (!parameter) {\n        return translate('overview.period.previous_version_only_date');\n      }\n      break;\n    case 'date':\n      parameter = parameter && dateFormatter(parameter);\n      break;\n    case 'manual_baseline':\n      parameter = parameter || dateFormatter(period.date);\n      break;\n    default: // No change in the parameter\n  }\n\n  return translateWithParameters(`overview.period.${period.mode.toLowerCase()}`, parameter);\n}\n\nexport function getPeriodDate(period?: { date?: string }): Date | undefined {\n  return period && period.date ? parseDate(period.date) : undefined;\n}\n\nexport function isApplicationPeriod(\n  period: T.Period | ApplicationPeriod\n): period is ApplicationPeriod {\n  return (period as ApplicationPeriod).project !== undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport Checkbox from 'sonar-ui-common/components/controls/Checkbox';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\nexport interface MultiSelectOptionProps {\n  active?: boolean;\n  custom?: boolean;\n  disabled?: boolean;\n  element: string;\n  onHover: (element: string) => void;\n  onSelectChange: (selected: boolean, element: string) => void;\n  renderLabel: (element: string) => React.ReactNode;\n  selected?: boolean;\n}\n\nexport default function MultiSelectOption(props: MultiSelectOptionProps) {\n  const { active, custom, disabled, element, selected } = props;\n  const onHover = () => props.onHover(element);\n  const className = classNames({ active, disabled });\n  const label = props.renderLabel(element);\n\n  return (\n    <li onFocus={onHover} onMouseOver={onHover}>\n      <Checkbox\n        checked={Boolean(selected)}\n        className={className}\n        disabled={disabled}\n        id={element}\n        onCheck={props.onSelectChange}>\n        {custom ? (\n          <span\n            aria-label={`${translate('create_new_element')}: ${label}`}\n            className=\"little-spacer-left\">\n            <span aria-hidden={true} className=\"little-spacer-right\">\n              +\n            </span>\n            {label}\n          </span>\n        ) : (\n          <span className=\"little-spacer-left\">{label}</span>\n        )}\n      </Checkbox>\n    </li>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { difference } from 'lodash';\nimport * as React from 'react';\nimport SearchBox from 'sonar-ui-common/components/controls/SearchBox';\nimport { translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport MultiSelectOption from './MultiSelectOption';\n\ninterface Props {\n  allowNewElements?: boolean;\n  allowSelection?: boolean;\n  elements: string[];\n  filterSelected?: (query: string, selectedElements: string[]) => string[];\n  footerNode?: React.ReactNode;\n  listSize?: number;\n  onSearch: (query: string) => Promise<void>;\n  onSelect: (item: string) => void;\n  onUnselect: (item: string) => void;\n  placeholder: string;\n  renderLabel?: (element: string) => React.ReactNode;\n  selectedElements: string[];\n  validateSearchInput?: (value: string) => string;\n}\n\ninterface State {\n  activeIdx: number;\n  loading: boolean;\n  query: string;\n  selectedElements: string[];\n  unselectedElements: string[];\n}\n\ninterface DefaultProps {\n  filterSelected: (query: string, selectedElements: string[]) => string[];\n  listSize: number;\n  renderLabel: (element: string) => React.ReactNode;\n  validateSearchInput: (value: string) => string;\n}\n\ntype PropsWithDefault = Props & DefaultProps;\n\nexport default class MultiSelect extends React.PureComponent<Props, State> {\n  container?: HTMLDivElement | null;\n  searchInput?: HTMLInputElement | null;\n  mounted = false;\n\n  static defaultProps: DefaultProps = {\n    filterSelected: (query: string, selectedElements: string[]) =>\n      selectedElements.filter(elem => elem.includes(query)),\n    listSize: 0,\n    renderLabel: (element: string) => element,\n    validateSearchInput: (value: string) => value\n  };\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      activeIdx: 0,\n      loading: true,\n      query: '',\n      selectedElements: [],\n      unselectedElements: []\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.onSearchQuery('');\n    this.updateSelectedElements(this.props as PropsWithDefault);\n    this.updateUnselectedElements(this.props as PropsWithDefault);\n    if (this.container) {\n      this.container.addEventListener('keydown', this.handleKeyboard, true);\n    }\n  }\n\n  componentWillReceiveProps(nextProps: PropsWithDefault) {\n    if (\n      this.props.elements !== nextProps.elements ||\n      this.props.selectedElements !== nextProps.selectedElements\n    ) {\n      this.updateSelectedElements(nextProps);\n      this.updateUnselectedElements(nextProps);\n\n      const totalElements = this.getAllElements(nextProps, this.state).length;\n      if (this.state.activeIdx >= totalElements) {\n        this.setState({ activeIdx: totalElements - 1 });\n      }\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.searchInput) {\n      this.searchInput.focus();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    if (this.container) {\n      this.container.removeEventListener('keydown', this.handleKeyboard);\n    }\n  }\n\n  handleSelectChange = (selected: boolean, item: string) => {\n    if (selected) {\n      this.onSelectItem(item);\n    } else {\n      this.onUnselectItem(item);\n    }\n  };\n\n  handleSearchChange = (value: string) => {\n    this.onSearchQuery((this.props as PropsWithDefault).validateSearchInput(value));\n  };\n\n  handleElementHover = (element: string) => {\n    this.setState((prevState, props) => {\n      return { activeIdx: this.getAllElements(props, prevState).indexOf(element) };\n    });\n  };\n\n  handleKeyboard = (evt: KeyboardEvent) => {\n    switch (evt.keyCode) {\n      case 40: // down\n        evt.stopPropagation();\n        evt.preventDefault();\n        this.setState(this.selectNextElement);\n        break;\n      case 38: // up\n        evt.stopPropagation();\n        evt.preventDefault();\n        this.setState(this.selectPreviousElement);\n        break;\n      case 37: // left\n      case 39: // right\n        evt.stopPropagation();\n        break;\n      case 13: // enter\n        if (this.state.activeIdx >= 0) {\n          this.toggleSelect(this.getAllElements(this.props, this.state)[this.state.activeIdx]);\n        }\n        break;\n    }\n  };\n\n  onSearchQuery = (query: string) => {\n    this.setState({ activeIdx: 0, loading: true, query });\n    this.props.onSearch(query).then(this.stopLoading, this.stopLoading);\n  };\n\n  onSelectItem = (item: string) => {\n    if (this.isNewElement(item, this.props)) {\n      this.onSearchQuery('');\n    }\n    this.props.onSelect(item);\n  };\n\n  onUnselectItem = (item: string) => this.props.onUnselect(item);\n\n  isNewElement = (elem: string, { selectedElements, elements }: Props) =>\n    elem.length > 0 && selectedElements.indexOf(elem) === -1 && elements.indexOf(elem) === -1;\n\n  updateSelectedElements = (props: PropsWithDefault) => {\n    this.setState((state: State) => {\n      if (state.query) {\n        return {\n          selectedElements: props.filterSelected(state.query, props.selectedElements)\n        };\n      } else {\n        return { selectedElements: [...props.selectedElements] };\n      }\n    });\n  };\n\n  updateUnselectedElements = (props: PropsWithDefault) => {\n    this.setState((state: State) => {\n      if (props.listSize === 0) {\n        return { unselectedElements: difference(props.elements, props.selectedElements) };\n      } else if (props.listSize < state.selectedElements.length) {\n        return { unselectedElements: [] };\n      } else {\n        return {\n          unselectedElements: difference(props.elements, props.selectedElements).slice(\n            0,\n            props.listSize - state.selectedElements.length\n          )\n        };\n      }\n    });\n  };\n\n  getAllElements = (props: Props, state: State) => {\n    if (this.isNewElement(state.query, props)) {\n      return [...state.selectedElements, ...state.unselectedElements, state.query];\n    } else {\n      return [...state.selectedElements, ...state.unselectedElements];\n    }\n  };\n\n  setElementActive = (idx: number) => this.setState({ activeIdx: idx });\n\n  selectNextElement = (state: State, props: Props) => {\n    const { activeIdx } = state;\n    const allElements = this.getAllElements(props, state);\n    if (activeIdx < 0 || activeIdx >= allElements.length - 1) {\n      return { activeIdx: 0 };\n    } else {\n      return { activeIdx: activeIdx + 1 };\n    }\n  };\n\n  selectPreviousElement = (state: State, props: Props) => {\n    const { activeIdx } = state;\n    const allElements = this.getAllElements(props, state);\n    if (activeIdx <= 0) {\n      const lastIdx = allElements.length - 1;\n      return { activeIdx: lastIdx };\n    } else {\n      return { activeIdx: activeIdx - 1 };\n    }\n  };\n\n  stopLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  toggleSelect = (item: string) => {\n    if (this.props.selectedElements.indexOf(item) === -1) {\n      this.onSelectItem(item);\n    } else {\n      this.onUnselectItem(item);\n    }\n  };\n\n  render() {\n    const { allowSelection = true, allowNewElements = true, footerNode = '' } = this.props;\n    const { renderLabel } = this.props as PropsWithDefault;\n    const { query, activeIdx, selectedElements, unselectedElements } = this.state;\n    const activeElement = this.getAllElements(this.props, this.state)[activeIdx];\n    const showNewElement = allowNewElements && this.isNewElement(query, this.props);\n    const infiniteList = this.props.listSize === 0;\n    const listClasses = classNames('menu', {\n      'menu-vertically-limited': infiniteList,\n      'spacer-top': infiniteList,\n      'with-top-separator': infiniteList,\n      'with-bottom-separator': Boolean(footerNode)\n    });\n\n    return (\n      <div className=\"multi-select\" ref={div => (this.container = div)}>\n        <div className=\"menu-search\">\n          <SearchBox\n            autoFocus={true}\n            className=\"little-spacer-top\"\n            loading={this.state.loading}\n            onChange={this.handleSearchChange}\n            placeholder={this.props.placeholder}\n            value={query}\n          />\n        </div>\n        <ul className={listClasses}>\n          {selectedElements.length > 0 &&\n            selectedElements.map(element => (\n              <MultiSelectOption\n                active={activeElement === element}\n                element={element}\n                key={element}\n                onHover={this.handleElementHover}\n                onSelectChange={this.handleSelectChange}\n                renderLabel={renderLabel}\n                selected={true}\n              />\n            ))}\n          {unselectedElements.length > 0 &&\n            unselectedElements.map(element => (\n              <MultiSelectOption\n                active={activeElement === element}\n                disabled={!allowSelection}\n                element={element}\n                key={element}\n                onHover={this.handleElementHover}\n                onSelectChange={this.handleSelectChange}\n                renderLabel={renderLabel}\n              />\n            ))}\n          {showNewElement && (\n            <MultiSelectOption\n              active={activeElement === query}\n              custom={true}\n              element={query}\n              key={query}\n              onHover={this.handleElementHover}\n              onSelectChange={this.handleSelectChange}\n              renderLabel={renderLabel}\n            />\n          )}\n          {!showNewElement && selectedElements.length < 1 && unselectedElements.length < 1 && (\n            <li className=\"spacer-left\">{translateWithParameters('no_results_for_x', query)}</li>\n          )}\n        </ul>\n        {footerNode}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport TagsIcon from 'sonar-ui-common/components/icons/TagsIcon';\nimport { translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport './TagsList.css';\n\ninterface Props {\n  allowUpdate?: boolean;\n  className?: string;\n  tags: string[];\n}\n\nexport default function TagsList({ allowUpdate = false, className, tags }: Props) {\n  return (\n    <span\n      aria-label={translateWithParameters('tags_list_x', tags.join(', '))}\n      className={classNames('tags-list', className)}>\n      <TagsIcon className=\"text-middle\" />\n      <span aria-hidden={true} className=\"text-ellipsis text-middle\" title={tags.join(', ')}>\n        {tags.join(', ')}\n      </span>\n      {allowUpdate && <DropdownIcon className=\"text-middle\" />}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getMarkdownHelpUrl } from '../../helpers/urls';\n\ninterface Props {\n  className?: string;\n}\n\nexport default class MarkdownTips extends React.PureComponent<Props> {\n  handleClick(evt: React.SyntheticEvent<HTMLAnchorElement>) {\n    evt.preventDefault();\n    window.open(getMarkdownHelpUrl(), 'Markdown', 'height=300,width=600,scrollbars=1,resizable=1');\n  }\n\n  render() {\n    return (\n      <div className={classNames('markdown-tips', this.props.className)}>\n        <a className=\"little-spacer-right\" href=\"#\" onClick={this.handleClick}>\n          {translate('markdown.helplink')}\n        </a>\n        {':'}\n        <span className=\"spacer-left\">*{translate('bold')}*</span>\n        <span className=\"spacer-left\">\n          ``\n          {translate('code')}\n          ``\n        </span>\n        <span className=\"spacer-left\">* {translate('bulleted_point')}</span>\n      </div>\n    );\n  }\n}\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".tags-list{white-space:nowrap;line-height:16px}.tags-list i:before{font-size:12px}.tags-list span{display:inline-block;vertical-align:middle;text-align:left;max-width:220px;padding-left:4px;padding-right:4px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../css-loader/dist/cjs.js??ref--6-1!../../../postcss-loader/src/index.js??postcss!./Rating.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".rating{display:inline-block;width:24px;height:24px;line-height:24px;border-radius:24px;box-sizing:border-box;color:#fff;font-size:16px;font-weight:400;text-align:center;text-shadow:0 0 1px rgba(0,0,0,.35)}.rating-muted{background-color:#bdbdbd!important;color:#fff!important;text-shadow:0 0 1px rgba(0,0,0,.35)!important}a>.rating{margin-bottom:-1px;border-bottom:1px solid;transition:all .2s ease}a>.rating:hover{opacity:.8}.rating-A{line-height:23px;background-color:#0a0}a>.rating-A{border-bottom-color:#0a0}.rating-B{background-color:#b0d513}a .rating-B{border-bottom-color:#b0d513}.rating-C{background-color:#eabe06}a .rating-C{border-bottom-color:#eabe06}.rating-D{background-color:#ed7d20}a .rating-D{border-bottom-color:#ed7d20}.rating-E{background-color:#d4333f}a .rating-E{border-bottom-color:#d4333f}.rating-small{width:18px;height:18px;line-height:18px;margin-top:-1px;margin-bottom:-1px;font-size:12px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport MultiSelect from '../common/MultiSelect';\nimport './TagsList.css';\n\ninterface Props {\n  listSize: number;\n  onSearch: (query: string) => Promise<void>;\n  onSelect: (item: string) => void;\n  onUnselect: (item: string) => void;\n  selectedTags: string[];\n  tags: string[];\n}\n\nexport default function TagsSelector(props: Props) {\n  return (\n    <MultiSelect\n      elements={props.tags}\n      listSize={props.listSize}\n      onSearch={props.onSearch}\n      onSelect={props.onSelect}\n      onUnselect={props.onUnselect}\n      placeholder={translate('search.search_for_tags')}\n      selectedElements={props.selectedTags}\n      validateSearchInput={validateTag}\n    />\n  );\n}\n\nexport function validateTag(value: string) {\n  // Allow only a-z, 0-9, '+', '-', '#', '.'\n  return value.toLowerCase().replace(/[^-a-z0-9+#.]/gi, '');\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport { colors } from '../../app/theme';\n\nconst DonutChart = lazyLoadComponent(\n  () => import('sonar-ui-common/components/charts/DonutChart'),\n  'DonutChart'\n);\n\nconst SIZE_TO_WIDTH_MAPPING = { small: 16, normal: 24, big: 40, huge: 60 };\n\nconst SIZE_TO_THICKNESS_MAPPING = { small: 2, normal: 3, big: 3, huge: 4 };\n\nexport interface CoverageRatingProps {\n  muted?: boolean;\n  size?: 'small' | 'normal' | 'big' | 'huge';\n  value: number | string | null | undefined;\n}\n\nexport default function CoverageRating({\n  muted = false,\n  size = 'normal',\n  value\n}: CoverageRatingProps) {\n  let data = [{ value: 100, fill: '#ccc ' }];\n  let padAngle = 0;\n\n  if (value != null) {\n    const numberValue = Number(value);\n    data = [\n      { value: numberValue, fill: muted ? colors.gray71 : colors.green },\n      { value: 100 - numberValue, fill: muted ? colors.barBackgroundColor : colors.lineCoverageRed }\n    ];\n    if (numberValue !== 0 && numberValue < 100) {\n      padAngle = 0.1; // Same for all sizes, because it scales automatically\n    }\n  }\n\n  const width = SIZE_TO_WIDTH_MAPPING[size];\n  const thickness = SIZE_TO_THICKNESS_MAPPING[size];\n\n  return (\n    <DonutChart\n      data={data}\n      height={width}\n      padAngle={padAngle}\n      thickness={thickness}\n      width={width}\n    />\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport './LocationIndex.css';\n\ninterface Props {\n  children?: React.ReactNode;\n  leading?: boolean;\n  onClick?: () => void;\n  selected?: boolean;\n  [x: string]: any;\n}\n\nexport default function LocationIndex(props: Props) {\n  const { children, leading, onClick, selected, ...other } = props;\n  const clickAttributes = onClick ? { onClick, role: 'button', tabIndex: 0 } : {};\n  // put {...others} because Tooltip sets some event handlers\n  return (\n    <div\n      className={classNames('location-index', {\n        'is-leading': leading,\n        selected\n      })}\n      {...clickAttributes}\n      {...other}>\n      {children}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport StatusIcon from 'sonar-ui-common/components/icons/StatusIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  className?: string;\n  resolution: string | undefined;\n  status: string;\n}\n\nexport default function StatusHelper(props: Props) {\n  const resolution = props.resolution && ` (${translate('issue.resolution', props.resolution)})`;\n  return (\n    <span className={props.className}>\n      <StatusIcon className=\"little-spacer-right\" status={props.status} />\n      {translate('issue.status', props.status)}\n      {resolution}\n    </span>\n  );\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar classNames = require(\"classnames\");\nvar lodash_1 = require(\"lodash\");\nvar React = require(\"react\");\nrequire(\"./DuplicationsRating.css\");\nfunction DuplicationsRating(_a) {\n    var _b = _a.muted, muted = _b === void 0 ? false : _b, _c = _a.size, size = _c === void 0 ? 'normal' : _c, value = _a.value;\n    var className = classNames('duplications-rating', {\n        'duplications-rating-small': size === 'small',\n        'duplications-rating-big': size === 'big',\n        'duplications-rating-huge': size === 'huge',\n        'duplications-rating-muted': muted || value == null || isNaN(value),\n        'duplications-rating-A': lodash_1.inRange(value || 0, 0, 3),\n        'duplications-rating-B': lodash_1.inRange(value || 0, 3, 5),\n        'duplications-rating-C': lodash_1.inRange(value || 0, 5, 10),\n        'duplications-rating-D': lodash_1.inRange(value || 0, 10, 20),\n        'duplications-rating-E': (value || 0) >= 20,\n    });\n    return React.createElement(\"div\", { className: className });\n}\nexports.default = DuplicationsRating;\n//# sourceMappingURL=DuplicationsRating.js.map","var api = require(\"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../css-loader/dist/cjs.js??ref--6-1!../../../postcss-loader/src/index.js??postcss!./DuplicationsRating.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".duplications-rating{position:relative;display:inline-flex;vertical-align:top;justify-content:center;align-items:center;width:24px;height:24px;border:3px solid #ed7d20;border-radius:24px;box-sizing:border-box}.duplications-rating-small{width:16px;height:16px;border-width:2px}.duplications-rating-big{width:40px;height:40px;border-width:3px}.duplications-rating-huge{width:60px;height:60px;border-width:4px;border-radius:30px}.duplications-rating-muted{border-color:#bdbdbd!important}.duplications-rating-muted:after{background-color:#bdbdbd!important}.duplications-rating:after{border-radius:24px;content:\\\"\\\"}.duplications-rating-A{border-color:#0a0}.duplications-rating-A:after{display:none}.duplications-rating-B{border-color:#b0d513}.duplications-rating-B:after{width:6px;height:6px;background-color:#b0d513}.duplications-rating-small.duplications-rating-B:after{width:2px;height:2px}.duplications-rating-big.duplications-rating-B:after{width:12px;height:12px}.duplications-rating-huge.duplications-rating-B:after{width:18px;height:18px}.duplications-rating-C{border-color:#eabe06}.duplications-rating-C:after{width:8px;height:8px;background-color:#eabe06}.duplications-rating-small.duplications-rating-C:after{width:6px;height:6px}.duplications-rating-big.duplications-rating-C:after{width:16px;height:16px}.duplications-rating-huge.duplications-rating-C:after{width:24px;height:24px}.duplications-rating-D{border-color:#ed7d20}.duplications-rating-D:after{width:12px;height:12px;background-color:#ed7d20}.duplications-rating-small.duplications-rating-D:after{width:8px;height:8px}.duplications-rating-big.duplications-rating-D:after{width:24px;height:24px}.duplications-rating-huge.duplications-rating-D:after{width:36px;height:36px}.duplications-rating-E{border-color:#d4333f}.duplications-rating-E:after{width:14px;height:14px;background-color:#d4333f}.duplications-rating-small.duplications-rating-E:after{width:10px;height:10px}.duplications-rating-big.duplications-rating-E:after{width:28px;height:28px}.duplications-rating-huge.duplications-rating-E:after{width:42px;height:42px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n"],"sourceRoot":""}