{"version":3,"sources":["webpack:///./src/main/js/api/user_groups.ts","webpack:///./src/main/js/apps/users/components/TokensFormItem.tsx","webpack:///./src/main/js/apps/users/components/TokensFormNewToken.tsx","webpack:///./src/main/js/apps/users/components/TokensForm.tsx","webpack:///./src/main/js/apps/users/components/UserScmAccountInput.tsx","webpack:///./src/main/js/apps/users/components/UserForm.tsx","webpack:///./src/main/js/apps/users/Header.tsx","webpack:///./src/main/js/apps/users/Search.tsx","webpack:///./src/main/js/apps/users/components/TokensFormModal.tsx","webpack:///./src/main/js/apps/users/components/DeactivateForm.tsx","webpack:///./src/main/js/apps/users/components/PasswordForm.tsx","webpack:///./src/main/js/apps/users/components/UserActions.tsx","webpack:///./src/main/js/apps/users/components/GroupsForm.tsx","webpack:///./src/main/js/apps/users/components/UserGroups.tsx","webpack:///./src/main/js/apps/users/components/UserListItemIdentity.tsx","webpack:///./src/main/js/apps/users/components/UserScmAccounts.tsx","webpack:///./src/main/js/apps/users/components/UserListItem.tsx","webpack:///./src/main/js/apps/users/UsersList.tsx","webpack:///./src/main/js/apps/users/utils.ts","webpack:///./src/main/js/apps/users/UsersApp.tsx","webpack:///./src/main/js/apps/users/UsersAppContainer.tsx","webpack:///./src/main/js/app/components/embed-docs-modal/Suggestions.tsx","webpack:///./src/main/js/app/utils/addGlobalSuccessMessage.ts","webpack:///./src/main/js/api/user-tokens.ts"],"names":["searchUsersGroups","data","catch","getUsersInGroup","addUserToGroup","removeUserFromGroup","createGroup","then","r","updateGroup","deleteGroup","mounted","state","loading","showConfirmation","handleClick","handleRevoke","setState","login","props","name","token","onRevokeToken","componentDidMount","this","componentWillUnmount","render","deleteConfirmation","overlay","className","date","lastConnectionDate","createdAt","long","confirmButtonText","isDestructive","modalBody","defaultMessage","id","values","modalHeader","onConfirm","onClick","disabled","title","TokensFormNewToken","Alert","variant","copyValue","generating","newTokenName","tokens","fetchTokens","updateTokensCount","length","handleGenerateToken","evt","preventDefault","newToken","handleRevokeToken","revokedToken","filter","handleNewTokenChange","currentTarget","value","renderItems","colSpan","map","key","customSpinner","autoComplete","onSubmit","maxLength","onChange","placeholder","required","type","handleChange","event","idx","handleRemove","onRemove","scmAccount","handleError","response","includes","status","errorMsg","error","throwGlobalError","handleEmailChange","email","handleLoginChange","handleNameChange","handlePasswordChange","password","handleCreateUser","undefined","scmAccounts","onUpdateUsers","onClose","handleUpdateUser","user","local","handleAddScmAccount","concat","handleUpdateScmAccount","slice","handleRemoveScmAccount","header","size","onCloseClick","onFormSubmit","submitting","htmlFor","autoFocus","minLength","scm","openUserForm","handleOpenUserForm","handleCloseUserForm","handleSearch","search","updateQuery","query","TokensFormModal","contentLabel","onRequestClose","TokensForm","handleDeactivate","confirmPassword","newPassword","oldPassword","handleConfirmPasswordChange","handleNewPasswordChange","handleOldPasswordChange","handleChangePassword","previousPassword","addGlobalSuccessMessage","isCurrentUser","handleOpenDeactivateForm","openForm","handleOpenPasswordForm","handleOpenUpdateForm","handleCloseForm","renderActions","ActionsDropdown","destructive","fetchUsers","searchParams","organization","p","page","ps","pageSize","q","selected","prevState","more","groups","newSeletedGroups","gp","selectedGroups","lastSearchParams","needToReload","groupsTotalCount","paging","total","handleSelect","handleUnselect","handleCloseClick","handleClose","renderElement","group","description","elements","elementsTotalCount","SelectList","All","onSearch","onSelect","onUnselect","selectedElements","withPaging","href","showMore","handleOpenForm","toggleShowMore","limit","GROUPS_LIMIT","tooltip","UserListItemIdentity","identityProvider","externalProvider","ExternalProvider","style","backgroundColor","color","secondFontColor","alt","height","src","iconPath","width","externalIdentity","SCM_LIMIT","openTokenForm","handleOpenTokensForm","handleCloseTokensForm","organizationsEnabled","Avatar","hash","avatar","tokensCount","UsersList","currentUser","identityProviders","users","find","provider","isLoggedIn","parseQuery","urlQuery","serializeQuery","finishLoading","fetchIdentityProviders","location","fetchMoreUsers","pageIndex","newQuery","router","push","componentWillReceiveProps","nextProps","Suggestions","suggestions","defer","count","loadMore","ready","withRouter","Consumer","addSuggestions","removeSuggestions","SuggestionsInner","componentDidUpdate","prevProps","message","dispatch","getTokens","generateToken","revokeToken"],"mappings":"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","file":"js/332.1593679646964.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post, postJSON } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\n\nexport function searchUsersGroups(data: {\n  f?: string;\n  organization?: string;\n  p?: number;\n  ps?: number;\n  q?: string;\n}): Promise<{ groups: T.Group[]; paging: T.Paging }> {\n  return getJSON('/api/user_groups/search', data).catch(throwGlobalError);\n}\n\nexport function getUsersInGroup(data: {\n  id?: number;\n  name?: string;\n  organization?: string;\n  p?: number;\n  ps?: number;\n  q?: string;\n  selected?: string;\n}): Promise<T.Paging & { users: T.UserSelected[] }> {\n  return getJSON('/api/user_groups/users', data).catch(throwGlobalError);\n}\n\nexport function addUserToGroup(data: {\n  id?: string;\n  name?: string;\n  login?: string;\n  organization?: string;\n}) {\n  return post('/api/user_groups/add_user', data).catch(throwGlobalError);\n}\n\nexport function removeUserFromGroup(data: {\n  id?: string;\n  name?: string;\n  login?: string;\n  organization?: string;\n}) {\n  return post('/api/user_groups/remove_user', data).catch(throwGlobalError);\n}\n\nexport function createGroup(data: {\n  description?: string;\n  organization: string | undefined;\n  name: string;\n}): Promise<T.Group> {\n  return postJSON('/api/user_groups/create', data).then(r => r.group, throwGlobalError);\n}\n\nexport function updateGroup(data: { description?: string; id: number; name?: string }) {\n  return post('/api/user_groups/update', data).catch(throwGlobalError);\n}\n\nexport function deleteGroup(data: { name: string; organization: string | undefined }) {\n  return post('/api/user_groups/delete', data).catch(throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport ConfirmButton from 'sonar-ui-common/components/controls/ConfirmButton';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport DateFormatter from 'sonar-ui-common/components/intl/DateFormatter';\nimport DateFromNowHourPrecision from 'sonar-ui-common/components/intl/DateFromNowHourPrecision';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { limitComponentName } from 'sonar-ui-common/helpers/path';\nimport { revokeToken } from '../../../api/user-tokens';\n\nexport type TokenDeleteConfirmation = 'inline' | 'modal';\n\ninterface Props {\n  deleteConfirmation: TokenDeleteConfirmation;\n  login: string;\n  onRevokeToken: (token: T.UserToken) => void;\n  token: T.UserToken;\n}\n\ninterface State {\n  loading: boolean;\n  showConfirmation: boolean;\n}\n\nexport default class TokensFormItem extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: false, showConfirmation: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleClick = () => {\n    if (this.state.showConfirmation) {\n      this.handleRevoke().then(() => {\n        if (this.mounted) {\n          this.setState({ showConfirmation: false });\n        }\n      });\n    } else {\n      this.setState({ showConfirmation: true });\n    }\n  };\n\n  handleRevoke = () => {\n    this.setState({ loading: true });\n    return revokeToken({ login: this.props.login, name: this.props.token.name }).then(\n      () => this.props.onRevokeToken(this.props.token),\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  render() {\n    const { deleteConfirmation, token } = this.props;\n    const { loading, showConfirmation } = this.state;\n    return (\n      <tr>\n        <td>\n          <Tooltip overlay={token.name}>\n            <span>{limitComponentName(token.name)}</span>\n          </Tooltip>\n        </td>\n        <td className=\"nowrap\">\n          <DateFromNowHourPrecision date={token.lastConnectionDate} />\n        </td>\n        <td className=\"thin nowrap text-right\">\n          <DateFormatter date={token.createdAt} long={true} />\n        </td>\n        <td className=\"thin nowrap text-right\">\n          <DeferredSpinner loading={loading}>\n            <i className=\"deferred-spinner-placeholder\" />\n          </DeferredSpinner>\n          {deleteConfirmation === 'modal' ? (\n            <ConfirmButton\n              confirmButtonText={translate('users.tokens.revoke_token')}\n              isDestructive={true}\n              modalBody={\n                <FormattedMessage\n                  defaultMessage={translate('users.tokens.sure_X')}\n                  id=\"users.tokens.sure_X\"\n                  values={{ token: <strong>{token.name}</strong> }}\n                />\n              }\n              modalHeader={translate('users.tokens.revoke_token')}\n              onConfirm={this.handleRevoke}>\n              {({ onClick }) => (\n                <Button\n                  className=\"spacer-left button-red input-small\"\n                  disabled={loading}\n                  onClick={onClick}\n                  title={translate('users.tokens.revoke_token')}>\n                  {translate('users.tokens.revoke')}\n                </Button>\n              )}\n            </ConfirmButton>\n          ) : (\n            <Button\n              className=\"button-red input-small spacer-left\"\n              disabled={loading}\n              onClick={this.handleClick}>\n              {showConfirmation ? translate('users.tokens.sure') : translate('users.tokens.revoke')}\n            </Button>\n          )}\n        </td>\n      </tr>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ClipboardButton } from 'sonar-ui-common/components/controls/clipboard';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport { translateWithParameters } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  token: { name: string; token: string };\n}\n\nexport default function TokensFormNewToken({ token }: Props) {\n  return (\n    <div className=\"panel panel-white big-spacer-top\">\n      <Alert variant=\"warning\">\n        {translateWithParameters('users.tokens.new_token_created', token.name)}\n      </Alert>\n      <ClipboardButton copyValue={token.token} />\n      <code className=\"big-spacer-left text-success\">{token.token}</code>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { generateToken, getTokens } from '../../../api/user-tokens';\nimport TokensFormItem, { TokenDeleteConfirmation } from './TokensFormItem';\nimport TokensFormNewToken from './TokensFormNewToken';\n\ninterface Props {\n  deleteConfirmation: TokenDeleteConfirmation;\n  login: string;\n  updateTokensCount?: (login: string, tokensCount: number) => void;\n}\n\ninterface State {\n  generating: boolean;\n  loading: boolean;\n  newToken?: { name: string; token: string };\n  newTokenName: string;\n  tokens: T.UserToken[];\n}\n\nexport default class TokensForm extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = {\n    generating: false,\n    loading: true,\n    newTokenName: '',\n    tokens: []\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchTokens();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchTokens = () => {\n    this.setState({ loading: true });\n    getTokens(this.props.login).then(\n      tokens => {\n        if (this.mounted) {\n          this.setState({ loading: false, tokens });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  updateTokensCount = () => {\n    if (this.props.updateTokensCount) {\n      this.props.updateTokensCount(this.props.login, this.state.tokens.length);\n    }\n  };\n\n  handleGenerateToken = (evt: React.SyntheticEvent<HTMLFormElement>) => {\n    evt.preventDefault();\n    if (this.state.newTokenName.length > 0) {\n      this.setState({ generating: true });\n      generateToken({ name: this.state.newTokenName, login: this.props.login }).then(\n        newToken => {\n          if (this.mounted) {\n            this.setState(state => {\n              const tokens = [\n                ...state.tokens,\n                { name: newToken.name, createdAt: newToken.createdAt }\n              ];\n              return { generating: false, newToken, newTokenName: '', tokens };\n            }, this.updateTokensCount);\n          }\n        },\n        () => {\n          if (this.mounted) {\n            this.setState({ generating: false });\n          }\n        }\n      );\n    }\n  };\n\n  handleRevokeToken = (revokedToken: T.UserToken) => {\n    this.setState(\n      state => ({\n        tokens: state.tokens.filter(token => token.name !== revokedToken.name)\n      }),\n      this.updateTokensCount\n    );\n  };\n\n  handleNewTokenChange = (evt: React.SyntheticEvent<HTMLInputElement>) =>\n    this.setState({ newTokenName: evt.currentTarget.value });\n\n  renderItems() {\n    const { tokens } = this.state;\n    if (tokens.length <= 0) {\n      return (\n        <tr>\n          <td className=\"note\" colSpan={3}>\n            {translate('users.no_tokens')}\n          </td>\n        </tr>\n      );\n    }\n    return tokens.map(token => (\n      <TokensFormItem\n        deleteConfirmation={this.props.deleteConfirmation}\n        key={token.name}\n        login={this.props.login}\n        onRevokeToken={this.handleRevokeToken}\n        token={token}\n      />\n    ));\n  }\n\n  render() {\n    const { generating, loading, newToken, newTokenName, tokens } = this.state;\n    const customSpinner = (\n      <tr>\n        <td>\n          <i className=\"spinner\" />\n        </td>\n      </tr>\n    );\n    return (\n      <>\n        <h3 className=\"spacer-bottom\">{translate('users.generate_tokens')}</h3>\n        <form\n          autoComplete=\"off\"\n          className=\"display-flex-center\"\n          id=\"generate-token-form\"\n          onSubmit={this.handleGenerateToken}>\n          <input\n            className=\"input-large spacer-right\"\n            maxLength={100}\n            onChange={this.handleNewTokenChange}\n            placeholder={translate('users.enter_token_name')}\n            required={true}\n            type=\"text\"\n            value={newTokenName}\n          />\n          <SubmitButton\n            className=\"js-generate-token\"\n            disabled={generating || newTokenName.length <= 0}>\n            {translate('users.generate')}\n          </SubmitButton>\n        </form>\n\n        {newToken && <TokensFormNewToken token={newToken} />}\n\n        <table className=\"data zebra big-spacer-top\">\n          <thead>\n            <tr>\n              <th>{translate('name')}</th>\n              <th>{translate('my_account.tokens_last_usage')}</th>\n              <th className=\"text-right\">{translate('created')}</th>\n              <th />\n            </tr>\n          </thead>\n          <tbody>\n            <DeferredSpinner customSpinner={customSpinner} loading={loading && tokens.length <= 0}>\n              {this.renderItems()}\n            </DeferredSpinner>\n          </tbody>\n        </table>\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DeleteButton } from 'sonar-ui-common/components/controls/buttons';\n\nexport interface Props {\n  idx: number;\n  scmAccount: string;\n  onChange: (idx: number, scmAccount: string) => void;\n  onRemove: (idx: number) => void;\n}\n\nexport default class UserScmAccountInput extends React.PureComponent<Props> {\n  handleChange = (event: React.SyntheticEvent<HTMLInputElement>) =>\n    this.props.onChange(this.props.idx, event.currentTarget.value);\n\n  handleRemove = () => this.props.onRemove(this.props.idx);\n\n  render() {\n    return (\n      <div className=\"js-scm-account display-flex-row spacer-bottom\">\n        <input\n          maxLength={255}\n          onChange={this.handleChange}\n          type=\"text\"\n          value={this.props.scmAccount}\n        />\n        <DeleteButton onClick={this.handleRemove} />\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { uniq } from 'lodash';\nimport * as React from 'react';\nimport { Button, ResetButtonLink, SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport SimpleModal from 'sonar-ui-common/components/controls/SimpleModal';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { parseError } from 'sonar-ui-common/helpers/request';\nimport { createUser, updateUser } from '../../../api/users';\nimport throwGlobalError from '../../../app/utils/throwGlobalError';\nimport UserScmAccountInput from './UserScmAccountInput';\n\nexport interface Props {\n  onClose: () => void;\n  onUpdateUsers: () => void;\n  user?: T.User;\n}\n\ninterface State {\n  email: string;\n  error?: string;\n  login: string;\n  name: string;\n  password: string;\n  scmAccounts: string[];\n}\n\nexport default class UserForm extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    const { user } = props;\n    if (user) {\n      this.state = {\n        email: user.email || '',\n        login: user.login,\n        name: user.name || '',\n        password: '',\n        scmAccounts: user.scmAccounts || []\n      };\n    } else {\n      this.state = {\n        email: '',\n        login: '',\n        name: '',\n        password: '',\n        scmAccounts: []\n      };\n    }\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleError = (response: Response) => {\n    if (!this.mounted || ![400, 500].includes(response.status)) {\n      return throwGlobalError(response);\n    } else {\n      return parseError(response).then(\n        errorMsg => this.setState({ error: errorMsg }),\n        throwGlobalError\n      );\n    }\n  };\n\n  handleEmailChange = (event: React.SyntheticEvent<HTMLInputElement>) =>\n    this.setState({ email: event.currentTarget.value });\n\n  handleLoginChange = (event: React.SyntheticEvent<HTMLInputElement>) =>\n    this.setState({ login: event.currentTarget.value });\n\n  handleNameChange = (event: React.SyntheticEvent<HTMLInputElement>) =>\n    this.setState({ name: event.currentTarget.value });\n\n  handlePasswordChange = (event: React.SyntheticEvent<HTMLInputElement>) =>\n    this.setState({ password: event.currentTarget.value });\n\n  handleCreateUser = () => {\n    return createUser({\n      email: this.state.email || undefined,\n      login: this.state.login,\n      name: this.state.name,\n      password: this.state.password,\n      scmAccount: uniq(this.state.scmAccounts)\n    }).then(() => {\n      this.props.onUpdateUsers();\n      this.props.onClose();\n    }, this.handleError);\n  };\n\n  handleUpdateUser = () => {\n    const { user } = this.props;\n    return updateUser({\n      email: user!.local ? this.state.email : undefined,\n      login: this.state.login,\n      name: user!.local ? this.state.name : undefined,\n      scmAccount: uniq(this.state.scmAccounts)\n    }).then(() => {\n      this.props.onUpdateUsers();\n      this.props.onClose();\n    }, this.handleError);\n  };\n\n  handleAddScmAccount = () => {\n    this.setState(({ scmAccounts }) => ({ scmAccounts: scmAccounts.concat('') }));\n  };\n\n  handleUpdateScmAccount = (idx: number, scmAccount: string) =>\n    this.setState(({ scmAccounts: oldScmAccounts }) => {\n      const scmAccounts = oldScmAccounts.slice();\n      scmAccounts[idx] = scmAccount;\n      return { scmAccounts };\n    });\n\n  handleRemoveScmAccount = (idx: number) =>\n    this.setState(({ scmAccounts }) => ({\n      scmAccounts: scmAccounts.slice(0, idx).concat(scmAccounts.slice(idx + 1))\n    }));\n\n  render() {\n    const { user } = this.props;\n    const { error } = this.state;\n\n    const header = user ? translate('users.update_user') : translate('users.create_user');\n    return (\n      <SimpleModal\n        header={header}\n        onClose={this.props.onClose}\n        onSubmit={user ? this.handleUpdateUser : this.handleCreateUser}\n        size=\"small\">\n        {({ onCloseClick, onFormSubmit, submitting }) => (\n          <form autoComplete=\"off\" id=\"user-form\" onSubmit={onFormSubmit}>\n            <header className=\"modal-head\">\n              <h2>{header}</h2>\n            </header>\n\n            <div className=\"modal-body modal-container\">\n              {error && <Alert variant=\"error\">{error}</Alert>}\n\n              {!error && user && !user.local && (\n                <Alert variant=\"warning\">{translate('users.cannot_update_delegated_user')}</Alert>\n              )}\n\n              {!user && (\n                <div className=\"modal-field\">\n                  <label htmlFor=\"create-user-login\">\n                    {translate('login')}\n                    <em className=\"mandatory\">*</em>\n                  </label>\n                  {/* keep this fake field to hack browser autofill */}\n                  <input className=\"hidden\" name=\"login-fake\" type=\"text\" />\n                  <input\n                    autoFocus={true}\n                    id=\"create-user-login\"\n                    maxLength={255}\n                    minLength={3}\n                    name=\"login\"\n                    onChange={this.handleLoginChange}\n                    required={true}\n                    type=\"text\"\n                    value={this.state.login}\n                  />\n                  <p className=\"note\">{translateWithParameters('users.minimum_x_characters', 3)}</p>\n                </div>\n              )}\n              <div className=\"modal-field\">\n                <label htmlFor=\"create-user-name\">\n                  {translate('name')}\n                  <em className=\"mandatory\">*</em>\n                </label>\n                {/* keep this fake field to hack browser autofill */}\n                <input className=\"hidden\" name=\"name-fake\" type=\"text\" />\n                <input\n                  autoFocus={!!user}\n                  disabled={user && !user.local}\n                  id=\"create-user-name\"\n                  maxLength={200}\n                  name=\"name\"\n                  onChange={this.handleNameChange}\n                  required={true}\n                  type=\"text\"\n                  value={this.state.name}\n                />\n              </div>\n              <div className=\"modal-field\">\n                <label htmlFor=\"create-user-email\">{translate('users.email')}</label>\n                {/* keep this fake field to hack browser autofill */}\n                <input className=\"hidden\" name=\"email-fake\" type=\"email\" />\n                <input\n                  disabled={user && !user.local}\n                  id=\"create-user-email\"\n                  maxLength={100}\n                  name=\"email\"\n                  onChange={this.handleEmailChange}\n                  type=\"email\"\n                  value={this.state.email}\n                />\n              </div>\n              {!user && (\n                <div className=\"modal-field\">\n                  <label htmlFor=\"create-user-password\">\n                    {translate('password')}\n                    <em className=\"mandatory\">*</em>\n                  </label>\n                  {/* keep this fake field to hack browser autofill */}\n                  <input className=\"hidden\" name=\"password-fake\" type=\"password\" />\n                  <input\n                    id=\"create-user-password\"\n                    maxLength={50}\n                    name=\"password\"\n                    onChange={this.handlePasswordChange}\n                    required={true}\n                    type=\"password\"\n                    value={this.state.password}\n                  />\n                </div>\n              )}\n              <div className=\"modal-field\">\n                <label>{translate('my_profile.scm_accounts')}</label>\n                {this.state.scmAccounts.map((scm, idx) => (\n                  <UserScmAccountInput\n                    idx={idx}\n                    key={idx}\n                    onChange={this.handleUpdateScmAccount}\n                    onRemove={this.handleRemoveScmAccount}\n                    scmAccount={scm}\n                  />\n                ))}\n                <div className=\"spacer-bottom\">\n                  <Button className=\"js-scm-account-add\" onClick={this.handleAddScmAccount}>\n                    {translate('add_verb')}\n                  </Button>\n                </div>\n                <p className=\"note\">{translate('user.login_or_email_used_as_scm_account')}</p>\n              </div>\n            </div>\n\n            <footer className=\"modal-foot\">\n              {submitting && <i className=\"spinner spacer-right\" />}\n              <SubmitButton disabled={submitting}>\n                {user ? translate('update_verb') : translate('create')}\n              </SubmitButton>\n              <ResetButtonLink onClick={onCloseClick}>{translate('cancel')}</ResetButtonLink>\n            </footer>\n          </form>\n        )}\n      </SimpleModal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport UserForm from './components/UserForm';\n\ninterface Props {\n  loading: boolean;\n  onUpdateUsers: () => void;\n}\n\ninterface State {\n  openUserForm: boolean;\n}\n\nexport default class Header extends React.PureComponent<Props, State> {\n  state: State = { openUserForm: false };\n\n  handleOpenUserForm = () => {\n    this.setState({ openUserForm: true });\n  };\n\n  handleCloseUserForm = () => {\n    this.setState({ openUserForm: false });\n  };\n\n  render() {\n    return (\n      <header className=\"page-header\" id=\"users-header\">\n        <h1 className=\"page-title\">{translate('users.page')}</h1>\n        <DeferredSpinner loading={this.props.loading} />\n\n        <div className=\"page-actions\">\n          <Button id=\"users-create\" onClick={this.handleOpenUserForm}>\n            {translate('users.create_user')}\n          </Button>\n        </div>\n\n        <p className=\"page-description\">{translate('users.page.description')}</p>\n        {this.state.openUserForm && (\n          <UserForm onClose={this.handleCloseUserForm} onUpdateUsers={this.props.onUpdateUsers} />\n        )}\n      </header>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport SearchBox from 'sonar-ui-common/components/controls/SearchBox';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { Query } from './utils';\n\ninterface Props {\n  query: Query;\n  updateQuery: (newQuery: Partial<Query>) => void;\n}\n\nexport default class Search extends React.PureComponent<Props> {\n  handleSearch = (search: string) => {\n    this.props.updateQuery({ search });\n  };\n\n  render() {\n    const { query } = this.props;\n\n    return (\n      <div className=\"panel panel-vertical bordered-bottom spacer-bottom\" id=\"users-search\">\n        <SearchBox\n          minLength={2}\n          onChange={this.handleSearch}\n          placeholder={translate('search.search_by_login_or_name')}\n          value={query.search}\n        />\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { ResetButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport TokensForm from './TokensForm';\n\ninterface Props {\n  user: T.User;\n  onClose: () => void;\n  updateTokensCount: (login: string, tokensCount: number) => void;\n}\n\nexport default function TokensFormModal(props: Props) {\n  return (\n    <Modal contentLabel={translate('users.tokens')} onRequestClose={props.onClose}>\n      <header className=\"modal-head\">\n        <h2>\n          <FormattedMessage\n            defaultMessage={translate('users.user_X_tokens')}\n            id=\"users.user_X_tokens\"\n            values={{ user: <em>{props.user.name}</em> }}\n          />\n        </h2>\n      </header>\n      <div className=\"modal-body modal-container\">\n        <TokensForm\n          deleteConfirmation=\"inline\"\n          login={props.user.login}\n          updateTokensCount={props.updateTokensCount}\n        />\n      </div>\n      <footer className=\"modal-foot\">\n        <ResetButtonLink onClick={props.onClose}>{translate('Done')}</ResetButtonLink>\n      </footer>\n    </Modal>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ResetButtonLink, SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { deactivateUser } from '../../../api/users';\n\nexport interface Props {\n  onClose: () => void;\n  onUpdateUsers: () => void;\n  user: T.UserActive;\n}\n\ninterface State {\n  submitting: boolean;\n}\n\nexport default class DeactivateForm extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { submitting: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleDeactivate = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    this.setState({ submitting: true });\n    deactivateUser({ login: this.props.user.login }).then(\n      () => {\n        this.props.onUpdateUsers();\n        this.props.onClose();\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ submitting: false });\n        }\n      }\n    );\n  };\n\n  render() {\n    const { user } = this.props;\n    const { submitting } = this.state;\n\n    const header = translate('users.deactivate_user');\n    return (\n      <Modal contentLabel={header} onRequestClose={this.props.onClose}>\n        <form autoComplete=\"off\" id=\"deactivate-user-form\" onSubmit={this.handleDeactivate}>\n          <header className=\"modal-head\">\n            <h2>{header}</h2>\n          </header>\n          <div className=\"modal-body\">\n            {translateWithParameters('users.deactivate_user.confirmation', user.name, user.login)}\n          </div>\n          <footer className=\"modal-foot\">\n            {submitting && <i className=\"spinner spacer-right\" />}\n            <SubmitButton className=\"js-confirm button-red\" disabled={submitting}>\n              {translate('users.deactivate')}\n            </SubmitButton>\n            <ResetButtonLink className=\"js-modal-close\" onClick={this.props.onClose}>\n              {translate('cancel')}\n            </ResetButtonLink>\n          </footer>\n        </form>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ResetButtonLink, SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { parseError } from 'sonar-ui-common/helpers/request';\nimport { changePassword } from '../../../api/users';\nimport addGlobalSuccessMessage from '../../../app/utils/addGlobalSuccessMessage';\nimport throwGlobalError from '../../../app/utils/throwGlobalError';\n\ninterface Props {\n  isCurrentUser: boolean;\n  onClose: () => void;\n  user: T.User;\n}\n\ninterface State {\n  confirmPassword: string;\n  error?: string;\n  newPassword: string;\n  oldPassword: string;\n  submitting: boolean;\n}\n\nexport default class PasswordForm extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = {\n    confirmPassword: '',\n    newPassword: '',\n    oldPassword: '',\n    submitting: false\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleError = (response: Response) => {\n    if (!this.mounted || response.status !== 400) {\n      return throwGlobalError(response);\n    } else {\n      return parseError(response).then(\n        errorMsg => this.setState({ error: errorMsg, submitting: false }),\n        throwGlobalError\n      );\n    }\n  };\n\n  handleConfirmPasswordChange = (event: React.SyntheticEvent<HTMLInputElement>) =>\n    this.setState({ confirmPassword: event.currentTarget.value });\n\n  handleNewPasswordChange = (event: React.SyntheticEvent<HTMLInputElement>) =>\n    this.setState({ newPassword: event.currentTarget.value });\n\n  handleOldPasswordChange = (event: React.SyntheticEvent<HTMLInputElement>) =>\n    this.setState({ oldPassword: event.currentTarget.value });\n\n  handleChangePassword = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    if (\n      this.state.newPassword.length > 0 &&\n      this.state.newPassword === this.state.confirmPassword\n    ) {\n      this.setState({ submitting: true });\n      changePassword({\n        login: this.props.user.login,\n        password: this.state.newPassword,\n        previousPassword: this.state.oldPassword\n      }).then(() => {\n        addGlobalSuccessMessage(translate('my_profile.password.changed'));\n        this.props.onClose();\n      }, this.handleError);\n    }\n  };\n\n  render() {\n    const { error, submitting, newPassword, confirmPassword } = this.state;\n\n    const header = translate('my_profile.password.title');\n    return (\n      <Modal contentLabel={header} onRequestClose={this.props.onClose} size=\"small\">\n        <form autoComplete=\"off\" id=\"user-password-form\" onSubmit={this.handleChangePassword}>\n          <header className=\"modal-head\">\n            <h2>{header}</h2>\n          </header>\n          <div className=\"modal-body\">\n            {error && <Alert variant=\"error\">{error}</Alert>}\n            {this.props.isCurrentUser && (\n              <div className=\"modal-field\">\n                <label htmlFor=\"old-user-password\">\n                  {translate('my_profile.password.old')}\n                  <em className=\"mandatory\">*</em>\n                </label>\n                {/* keep this fake field to hack browser autofill */}\n                <input className=\"hidden\" name=\"old-password-fake\" type=\"password\" />\n                <input\n                  id=\"old-user-password\"\n                  maxLength={50}\n                  name=\"old-password\"\n                  onChange={this.handleOldPasswordChange}\n                  required={true}\n                  type=\"password\"\n                  value={this.state.oldPassword}\n                />\n              </div>\n            )}\n            <div className=\"modal-field\">\n              <label htmlFor=\"user-password\">\n                {translate('my_profile.password.new')}\n                <em className=\"mandatory\">*</em>\n              </label>\n              {/* keep this fake field to hack browser autofill */}\n              <input className=\"hidden\" name=\"password-fake\" type=\"password\" />\n              <input\n                id=\"user-password\"\n                maxLength={50}\n                name=\"password\"\n                onChange={this.handleNewPasswordChange}\n                required={true}\n                type=\"password\"\n                value={this.state.newPassword}\n              />\n            </div>\n            <div className=\"modal-field\">\n              <label htmlFor=\"confirm-user-password\">\n                {translate('my_profile.password.confirm')}\n                <em className=\"mandatory\">*</em>\n              </label>\n              {/* keep this fake field to hack browser autofill */}\n              <input className=\"hidden\" name=\"confirm-password-fake\" type=\"password\" />\n              <input\n                id=\"confirm-user-password\"\n                maxLength={50}\n                name=\"confirm-password\"\n                onChange={this.handleConfirmPasswordChange}\n                required={true}\n                type=\"password\"\n                value={this.state.confirmPassword}\n              />\n            </div>\n          </div>\n          <footer className=\"modal-foot\">\n            {submitting && <i className=\"spinner spacer-right\" />}\n            <SubmitButton disabled={submitting || !newPassword || newPassword !== confirmPassword}>\n              {translate('change_verb')}\n            </SubmitButton>\n            <ResetButtonLink onClick={this.props.onClose}>{translate('cancel')}</ResetButtonLink>\n          </footer>\n        </form>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ActionsDropdown, {\n  ActionsDropdownDivider,\n  ActionsDropdownItem\n} from 'sonar-ui-common/components/controls/ActionsDropdown';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { isUserActive } from '../../../helpers/users';\nimport DeactivateForm from './DeactivateForm';\nimport PasswordForm from './PasswordForm';\nimport UserForm from './UserForm';\n\ninterface Props {\n  isCurrentUser: boolean;\n  onUpdateUsers: () => void;\n  user: T.User;\n}\n\ninterface State {\n  openForm?: string;\n}\n\nexport default class UserActions extends React.PureComponent<Props, State> {\n  state: State = {};\n\n  handleOpenDeactivateForm = () => {\n    this.setState({ openForm: 'deactivate' });\n  };\n\n  handleOpenPasswordForm = () => {\n    this.setState({ openForm: 'password' });\n  };\n\n  handleOpenUpdateForm = () => {\n    this.setState({ openForm: 'update' });\n  };\n\n  handleCloseForm = () => {\n    this.setState({ openForm: undefined });\n  };\n\n  renderActions = () => {\n    const { user } = this.props;\n    return (\n      <ActionsDropdown>\n        <ActionsDropdownItem className=\"js-user-update\" onClick={this.handleOpenUpdateForm}>\n          {translate('update_details')}\n        </ActionsDropdownItem>\n        {user.local && (\n          <ActionsDropdownItem\n            className=\"js-user-change-password\"\n            onClick={this.handleOpenPasswordForm}>\n            {translate('my_profile.password.title')}\n          </ActionsDropdownItem>\n        )}\n        <ActionsDropdownDivider />\n        {isUserActive(user) && (\n          <ActionsDropdownItem\n            className=\"js-user-deactivate\"\n            destructive={true}\n            onClick={this.handleOpenDeactivateForm}>\n            {translate('users.deactivate')}\n          </ActionsDropdownItem>\n        )}\n      </ActionsDropdown>\n    );\n  };\n\n  render() {\n    const { openForm } = this.state;\n    const { isCurrentUser, onUpdateUsers, user } = this.props;\n\n    return (\n      <>\n        {this.renderActions()}\n        {openForm === 'deactivate' && isUserActive(user) && (\n          <DeactivateForm\n            onClose={this.handleCloseForm}\n            onUpdateUsers={onUpdateUsers}\n            user={user}\n          />\n        )}\n        {openForm === 'password' && (\n          <PasswordForm isCurrentUser={isCurrentUser} onClose={this.handleCloseForm} user={user} />\n        )}\n        {openForm === 'update' && (\n          <UserForm onClose={this.handleCloseForm} onUpdateUsers={onUpdateUsers} user={user} />\n        )}\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { find, without } from 'lodash';\nimport * as React from 'react';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport SelectList, {\n  SelectListFilter,\n  SelectListSearchParams\n} from 'sonar-ui-common/components/controls/SelectList';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getUserGroups, UserGroup } from '../../../api/users';\nimport { addUserToGroup, removeUserFromGroup } from '../../../api/user_groups';\n\ninterface Props {\n  onClose: () => void;\n  onUpdateUsers: () => void;\n  user: T.User;\n}\n\ninterface State {\n  needToReload: boolean;\n  lastSearchParams?: SelectListSearchParams;\n  groups: UserGroup[];\n  groupsTotalCount?: number;\n  selectedGroups: string[];\n}\n\nexport default class GroupsForm extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      needToReload: false,\n      groups: [],\n      selectedGroups: []\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchUsers = (searchParams: SelectListSearchParams) =>\n    getUserGroups({\n      login: this.props.user.login,\n      organization: undefined,\n      p: searchParams.page,\n      ps: searchParams.pageSize,\n      q: searchParams.query !== '' ? searchParams.query : undefined,\n      selected: searchParams.filter\n    }).then(data => {\n      if (this.mounted) {\n        this.setState(prevState => {\n          const more = searchParams.page != null && searchParams.page > 1;\n\n          const groups = more ? [...prevState.groups, ...data.groups] : data.groups;\n          const newSeletedGroups = data.groups.filter(gp => gp.selected).map(gp => gp.name);\n          const selectedGroups = more\n            ? [...prevState.selectedGroups, ...newSeletedGroups]\n            : newSeletedGroups;\n\n          return {\n            lastSearchParams: searchParams,\n            needToReload: false,\n            groups,\n            groupsTotalCount: data.paging.total,\n            selectedGroups\n          };\n        });\n      }\n    });\n\n  handleSelect = (name: string) =>\n    addUserToGroup({\n      name,\n      login: this.props.user.login\n    }).then(() => {\n      if (this.mounted) {\n        this.setState((state: State) => ({\n          needToReload: true,\n          selectedGroups: [...state.selectedGroups, name]\n        }));\n      }\n    });\n\n  handleUnselect = (name: string) =>\n    removeUserFromGroup({\n      name,\n      login: this.props.user.login\n    }).then(() => {\n      if (this.mounted) {\n        this.setState((state: State) => ({\n          needToReload: true,\n          selectedGroups: without(state.selectedGroups, name)\n        }));\n      }\n    });\n\n  handleCloseClick = (event: React.SyntheticEvent<HTMLElement>) => {\n    event.preventDefault();\n    this.handleClose();\n  };\n\n  handleClose = () => {\n    this.props.onUpdateUsers();\n    this.props.onClose();\n  };\n\n  renderElement = (name: string): React.ReactNode => {\n    const group = find(this.state.groups, { name });\n    return (\n      <div className=\"select-list-list-item\">\n        {group === undefined ? (\n          name\n        ) : (\n          <>\n            {group.name}\n            <br />\n            <span className=\"note\">{group.description}</span>\n          </>\n        )}\n      </div>\n    );\n  };\n\n  render() {\n    const header = translate('users.update_groups');\n\n    return (\n      <Modal contentLabel={header} onRequestClose={this.handleClose}>\n        <div className=\"modal-head\">\n          <h2>{header}</h2>\n        </div>\n\n        <div className=\"modal-body modal-container\">\n          <SelectList\n            elements={this.state.groups.map(group => group.name)}\n            elementsTotalCount={this.state.groupsTotalCount}\n            needToReload={\n              this.state.needToReload &&\n              this.state.lastSearchParams &&\n              this.state.lastSearchParams.filter !== SelectListFilter.All\n            }\n            onSearch={this.fetchUsers}\n            onSelect={this.handleSelect}\n            onUnselect={this.handleUnselect}\n            renderElement={this.renderElement}\n            selectedElements={this.state.selectedGroups}\n            withPaging={true}\n          />\n        </div>\n\n        <footer className=\"modal-foot\">\n          <a className=\"js-modal-close\" href=\"#\" onClick={this.handleCloseClick}>\n            {translate('Done')}\n          </a>\n        </footer>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonIcon } from 'sonar-ui-common/components/controls/buttons';\nimport BulletListIcon from 'sonar-ui-common/components/icons/BulletListIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport GroupsForm from './GroupsForm';\n\ninterface Props {\n  groups: string[];\n  onUpdateUsers: () => void;\n  user: T.User;\n}\n\ninterface State {\n  openForm: boolean;\n  showMore: boolean;\n}\n\nconst GROUPS_LIMIT = 3;\n\nexport default class UserGroups extends React.PureComponent<Props, State> {\n  state: State = { openForm: false, showMore: false };\n\n  handleOpenForm = () => this.setState({ openForm: true });\n  handleCloseForm = () => this.setState({ openForm: false });\n\n  toggleShowMore = (evt: React.SyntheticEvent<HTMLAnchorElement>) => {\n    evt.preventDefault();\n    this.setState(state => ({ showMore: !state.showMore }));\n  };\n\n  render() {\n    const { groups } = this.props;\n    const limit = groups.length > GROUPS_LIMIT ? GROUPS_LIMIT - 1 : GROUPS_LIMIT;\n    return (\n      <ul>\n        {groups.slice(0, limit).map(group => (\n          <li className=\"little-spacer-bottom\" key={group}>\n            {group}\n          </li>\n        ))}\n        {groups.length > GROUPS_LIMIT &&\n          this.state.showMore &&\n          groups.slice(limit).map(group => (\n            <li className=\"little-spacer-bottom\" key={group}>\n              {group}\n            </li>\n          ))}\n        <li className=\"little-spacer-bottom\">\n          {groups.length > GROUPS_LIMIT && !this.state.showMore && (\n            <a className=\"js-user-more-groups spacer-right\" href=\"#\" onClick={this.toggleShowMore}>\n              {translateWithParameters('more_x', groups.length - limit)}\n            </a>\n          )}\n          <ButtonIcon\n            className=\"js-user-groups button-small\"\n            onClick={this.handleOpenForm}\n            tooltip={translate('users.update_groups')}>\n            <BulletListIcon />\n          </ButtonIcon>\n        </li>\n        {this.state.openForm && (\n          <GroupsForm\n            onClose={this.handleCloseForm}\n            onUpdateUsers={this.props.onUpdateUsers}\n            user={this.props.user}\n          />\n        )}\n      </ul>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { getTextColor } from 'sonar-ui-common/helpers/colors';\nimport { getBaseUrl } from 'sonar-ui-common/helpers/urls';\nimport { colors } from '../../../app/theme';\n\nexport interface Props {\n  identityProvider?: T.IdentityProvider;\n  user: T.User;\n}\n\nexport default function UserListItemIdentity({ identityProvider, user }: Props) {\n  return (\n    <td className=\"text-middle\">\n      <div>\n        <strong className=\"js-user-name\">{user.name}</strong>\n        <span className=\"js-user-login note little-spacer-left\">{user.login}</span>\n      </div>\n      {user.email && <div className=\"js-user-email little-spacer-top\">{user.email}</div>}\n      {!user.local && user.externalProvider !== 'sonarqube' && (\n        <ExternalProvider identityProvider={identityProvider} user={user} />\n      )}\n    </td>\n  );\n}\n\nexport function ExternalProvider({ identityProvider, user }: Props) {\n  if (!identityProvider) {\n    return (\n      <div className=\"js-user-identity-provider little-spacer-top\">\n        <span>\n          {user.externalProvider}: {user.externalIdentity}\n        </span>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"js-user-identity-provider little-spacer-top\">\n      <div\n        className=\"identity-provider\"\n        style={{\n          backgroundColor: identityProvider.backgroundColor,\n          color: getTextColor(identityProvider.backgroundColor, colors.secondFontColor)\n        }}>\n        <img\n          alt={identityProvider.name}\n          className=\"little-spacer-right\"\n          height=\"14\"\n          src={getBaseUrl() + identityProvider.iconPath}\n          width=\"14\"\n        />\n        {user.externalIdentity}\n      </div>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translateWithParameters } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  scmAccounts: string[];\n}\n\ninterface State {\n  showMore: boolean;\n}\n\nconst SCM_LIMIT = 3;\n\nexport default class UserScmAccounts extends React.PureComponent<Props, State> {\n  state: State = { showMore: false };\n\n  toggleShowMore = (evt: React.SyntheticEvent<HTMLAnchorElement>) => {\n    evt.preventDefault();\n    this.setState(state => ({ showMore: !state.showMore }));\n  };\n\n  render() {\n    const { scmAccounts } = this.props;\n    const limit = scmAccounts.length > SCM_LIMIT ? SCM_LIMIT - 1 : SCM_LIMIT;\n    return (\n      <ul className=\"js-scm-accounts\">\n        {scmAccounts.slice(0, limit).map((scmAccount, idx) => (\n          <li className=\"little-spacer-bottom\" key={idx}>\n            {scmAccount}\n          </li>\n        ))}\n        {scmAccounts.length > SCM_LIMIT &&\n          (this.state.showMore ? (\n            scmAccounts.slice(limit).map((scmAccount, idx) => (\n              <li className=\"little-spacer-bottom\" key={idx + limit}>\n                {scmAccount}\n              </li>\n            ))\n          ) : (\n            <li className=\"little-spacer-bottom\">\n              <a className=\"js-user-more-scm\" href=\"#\" onClick={this.toggleShowMore}>\n                {translateWithParameters('more_x', scmAccounts.length - limit)}\n              </a>\n            </li>\n          ))}\n      </ul>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonIcon } from 'sonar-ui-common/components/controls/buttons';\nimport BulletListIcon from 'sonar-ui-common/components/icons/BulletListIcon';\nimport DateFromNowHourPrecision from 'sonar-ui-common/components/intl/DateFromNowHourPrecision';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport Avatar from '../../../components/ui/Avatar';\nimport TokensFormModal from './TokensFormModal';\nimport UserActions from './UserActions';\nimport UserGroups from './UserGroups';\nimport UserListItemIdentity from './UserListItemIdentity';\nimport UserScmAccounts from './UserScmAccounts';\n\ninterface Props {\n  identityProvider?: T.IdentityProvider;\n  isCurrentUser: boolean;\n  onUpdateUsers: () => void;\n  organizationsEnabled?: boolean;\n  updateTokensCount: (login: string, tokensCount: number) => void;\n  user: T.User;\n}\n\ninterface State {\n  openTokenForm: boolean;\n}\n\nexport default class UserListItem extends React.PureComponent<Props, State> {\n  state: State = { openTokenForm: false };\n\n  handleOpenTokensForm = () => this.setState({ openTokenForm: true });\n  handleCloseTokensForm = () => this.setState({ openTokenForm: false });\n\n  render() {\n    const { identityProvider, onUpdateUsers, organizationsEnabled, user } = this.props;\n\n    return (\n      <tr>\n        <td className=\"thin nowrap text-middle\">\n          <Avatar hash={user.avatar} name={user.name} size={36} />\n        </td>\n        <UserListItemIdentity identityProvider={identityProvider} user={user} />\n        <td className=\"thin nowrap text-middle\">\n          <UserScmAccounts scmAccounts={user.scmAccounts || []} />\n        </td>\n        <td className=\"thin nowrap text-middle\">\n          <DateFromNowHourPrecision date={user.lastConnectionDate} />\n        </td>\n        {!organizationsEnabled && (\n          <td className=\"thin nowrap text-middle\">\n            <UserGroups groups={user.groups || []} onUpdateUsers={onUpdateUsers} user={user} />\n          </td>\n        )}\n        <td className=\"thin nowrap text-middle\">\n          {user.tokensCount}\n          <ButtonIcon\n            className=\"js-user-tokens spacer-left button-small\"\n            onClick={this.handleOpenTokensForm}\n            tooltip={translate('users.update_tokens')}>\n            <BulletListIcon />\n          </ButtonIcon>\n        </td>\n        <td className=\"thin nowrap text-right text-middle\">\n          <UserActions\n            isCurrentUser={this.props.isCurrentUser}\n            onUpdateUsers={onUpdateUsers}\n            user={user}\n          />\n        </td>\n        {this.state.openTokenForm && (\n          <TokensFormModal\n            onClose={this.handleCloseTokensForm}\n            updateTokensCount={this.props.updateTokensCount}\n            user={user}\n          />\n        )}\n      </tr>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport UserListItem from './components/UserListItem';\n\ninterface Props {\n  currentUser: { isLoggedIn: boolean; login?: string };\n  identityProviders: T.IdentityProvider[];\n  onUpdateUsers: () => void;\n  organizationsEnabled?: boolean;\n  updateTokensCount: (login: string, tokensCount: number) => void;\n  users: T.User[];\n}\n\nexport default function UsersList({\n  currentUser,\n  identityProviders,\n  onUpdateUsers,\n  organizationsEnabled,\n  updateTokensCount,\n  users\n}: Props) {\n  return (\n    <div className=\"boxed-group boxed-group-inner\">\n      <table className=\"data zebra\" id=\"users-list\">\n        <thead>\n          <tr>\n            <th />\n            <th className=\"nowrap\" />\n            <th className=\"nowrap\">{translate('my_profile.scm_accounts')}</th>\n            <th className=\"nowrap\">{translate('users.last_connection')}</th>\n            {!organizationsEnabled && <th className=\"nowrap\">{translate('my_profile.groups')}</th>}\n            <th className=\"nowrap\">{translate('users.tokens')}</th>\n            <th className=\"nowrap\">&nbsp;</th>\n          </tr>\n        </thead>\n        <tbody>\n          {users.map(user => (\n            <UserListItem\n              identityProvider={identityProviders.find(\n                provider => user.externalProvider === provider.key\n              )}\n              isCurrentUser={currentUser.isLoggedIn && currentUser.login === user.login}\n              key={user.login}\n              onUpdateUsers={onUpdateUsers}\n              organizationsEnabled={organizationsEnabled}\n              updateTokensCount={updateTokensCount}\n              user={user}\n            />\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { memoize } from 'lodash';\nimport { cleanQuery, parseAsString, serializeString } from 'sonar-ui-common/helpers/query';\n\nexport interface Query {\n  search: string;\n}\n\nexport const parseQuery = memoize(\n  (urlQuery: T.RawQuery): Query => ({\n    search: parseAsString(urlQuery['search'])\n  })\n);\n\nexport const serializeQuery = memoize(\n  (query: Query): T.RawQuery =>\n    cleanQuery({\n      search: query.search ? serializeString(query.search) : undefined\n    })\n);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Helmet } from 'react-helmet-async';\nimport ListFooter from 'sonar-ui-common/components/controls/ListFooter';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getIdentityProviders, searchUsers } from '../../api/users';\nimport Suggestions from '../../app/components/embed-docs-modal/Suggestions';\nimport { Location, Router, withRouter } from '../../components/hoc/withRouter';\nimport Header from './Header';\nimport Search from './Search';\nimport UsersList from './UsersList';\nimport { parseQuery, Query, serializeQuery } from './utils';\n\ninterface Props {\n  currentUser: { isLoggedIn: boolean; login?: string };\n  location: Pick<Location, 'query'>;\n  organizationsEnabled?: boolean;\n  router: Pick<Router, 'push'>;\n}\n\ninterface State {\n  identityProviders: T.IdentityProvider[];\n  loading: boolean;\n  paging?: T.Paging;\n  users: T.User[];\n}\n\nexport class UsersApp extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { identityProviders: [], loading: true, users: [] };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchIdentityProviders();\n    this.fetchUsers();\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    if (nextProps.location.query.search !== this.props.location.query.search) {\n      this.fetchUsers(nextProps);\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  finishLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  fetchIdentityProviders = () =>\n    getIdentityProviders().then(\n      ({ identityProviders }) => {\n        if (this.mounted) {\n          this.setState({ identityProviders });\n        }\n      },\n      () => {}\n    );\n\n  fetchUsers = ({ location } = this.props) => {\n    this.setState({ loading: true });\n    searchUsers({ q: parseQuery(location.query).search }).then(({ paging, users }) => {\n      if (this.mounted) {\n        this.setState({ loading: false, paging, users });\n      }\n    }, this.finishLoading);\n  };\n\n  fetchMoreUsers = () => {\n    const { paging } = this.state;\n    if (paging) {\n      this.setState({ loading: true });\n      searchUsers({\n        p: paging.pageIndex + 1,\n        q: parseQuery(this.props.location.query).search\n      }).then(({ paging, users }) => {\n        if (this.mounted) {\n          this.setState(state => ({ loading: false, users: [...state.users, ...users], paging }));\n        }\n      }, this.finishLoading);\n    }\n  };\n\n  updateQuery = (newQuery: Partial<Query>) => {\n    const query = serializeQuery({ ...parseQuery(this.props.location.query), ...newQuery });\n    this.props.router.push({ ...this.props.location, query });\n  };\n\n  updateTokensCount = (login: string, tokensCount: number) => {\n    this.setState(state => ({\n      users: state.users.map(user => (user.login === login ? { ...user, tokensCount } : user))\n    }));\n  };\n\n  render() {\n    const query = parseQuery(this.props.location.query);\n    const { loading, paging, users } = this.state;\n    return (\n      <div className=\"page page-limited\" id=\"users-page\">\n        <Suggestions suggestions=\"users\" />\n        <Helmet defer={false} title={translate('users.page')} />\n        <Header loading={loading} onUpdateUsers={this.fetchUsers} />\n        <Search query={query} updateQuery={this.updateQuery} />\n        <UsersList\n          currentUser={this.props.currentUser}\n          identityProviders={this.state.identityProviders}\n          onUpdateUsers={this.fetchUsers}\n          organizationsEnabled={this.props.organizationsEnabled}\n          updateTokensCount={this.updateTokensCount}\n          users={users}\n        />\n        {paging !== undefined && (\n          <ListFooter\n            count={users.length}\n            loadMore={this.fetchMoreUsers}\n            ready={!loading}\n            total={paging.total}\n          />\n        )}\n      </div>\n    );\n  }\n}\n\nexport default withRouter(UsersApp);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { connect } from 'react-redux';\nimport { areThereCustomOrganizations, getCurrentUser, Store } from '../../store/rootReducer';\nimport UsersApp from './UsersApp';\n\nconst mapStateToProps = (state: Store) => ({\n  currentUser: getCurrentUser(state),\n  organizationsEnabled: areThereCustomOrganizations(state)\n});\n\nexport default connect(mapStateToProps)(UsersApp);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { SuggestionsContext } from './SuggestionsContext';\n\ninterface Props {\n  suggestions: string;\n}\n\nexport default function Suggestions({ suggestions }: Props) {\n  return (\n    <SuggestionsContext.Consumer>\n      {({ addSuggestions, removeSuggestions }) => (\n        <SuggestionsInner\n          addSuggestions={addSuggestions}\n          removeSuggestions={removeSuggestions}\n          suggestions={suggestions}\n        />\n      )}\n    </SuggestionsContext.Consumer>\n  );\n}\n\ninterface SuggestionsInnerProps {\n  addSuggestions: (key: string) => void;\n  removeSuggestions: (key: string) => void;\n  suggestions: string;\n}\n\nclass SuggestionsInner extends React.PureComponent<SuggestionsInnerProps> {\n  componentDidMount() {\n    this.props.addSuggestions(this.props.suggestions);\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.suggestions !== this.props.suggestions) {\n      this.props.removeSuggestions(this.props.suggestions);\n      this.props.addSuggestions(prevProps.suggestions);\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.removeSuggestions(this.props.suggestions);\n  }\n\n  render() {\n    return null;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as globalMessages from '../../store/globalMessages';\nimport getStore from './getStore';\n\nexport default function addGlobalSuccessMessage(message: string): void {\n  const store = getStore();\n  store.dispatch(globalMessages.addGlobalSuccessMessage(message));\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post, postJSON } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\n\n/** List tokens for given user login */\nexport function getTokens(login: string): Promise<T.UserToken[]> {\n  return getJSON('/api/user_tokens/search', { login }).then(r => r.userTokens, throwGlobalError);\n}\n\nexport function generateToken(data: { name: string; login?: string }): Promise<T.NewUserToken> {\n  return postJSON('/api/user_tokens/generate', data).catch(throwGlobalError);\n}\n\nexport function revokeToken(data: { name: string; login?: string }) {\n  return post('/api/user_tokens/revoke', data).catch(throwGlobalError);\n}\n"],"sourceRoot":""}