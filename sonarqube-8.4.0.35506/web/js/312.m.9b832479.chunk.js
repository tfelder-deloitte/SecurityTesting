(window.webpackJsonp=window.webpackJsonp||[]).push([[312],{1074:function(e,t,a){"use strict";a.r(t),t.default="The Default gate is applied to all projects not explicitly assigned to a gate. Quality Profile and Gate administrators can assign projects to a gate from the Quality Profile page. Project administrators can also choose a non-default gate.\n"},1751:function(e,t,a){var n=a(313),r=a(1752);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var i={insert:"head",singleton:!1},o=(n(r,i),r.locals?r.locals:{});e.exports=o},1752:function(e,t,a){(t=a(314)(!1)).push([e.i,".quality-gate-section{max-width:1440px}.quality-gate-section+.quality-gate-section{margin-top:10px;padding-top:20px}.quality-gate-metric-select .Select-option{padding-left:16px}.quality-gate-metric-select .Select-option.is-disabled{opacity:1;font-weight:600;color:#444;padding-left:8px;font-style:normal}",""]),e.exports=t},1754:function(e,t,a){"use strict";a.r(t),t.default="Both conditions on New Code and Overall Code have to be met by a project to pass the Quality Gate.\n\n---\n\nSee also: [Clean as You Code](/user-guide/clean-as-you-code/)\n"},1755:function(e,t,a){"use strict";a.r(t),t.default="Built-in, immutable Quality Gate reflecting best practices.\n"},1756:function(e,t,a){"use strict";a.r(t),t.default="A Quality Gate is a set of measure-based, Boolean conditions. It helps you know immediately whether your projects are production-ready. Ideally, all projects will use the same quality gate. Each project's Quality Gate status is displayed prominently on its homepage.\n\n---\n\n[Learn more](/user-guide/quality-gates/)\n"},1873:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(332),i=a(318),o=a.n(i),s=a(31),c=a(440),l=a(490),d=a(333),h=a(448),p=(a(564),a(322)),u=(a(1751),a(321)),g=a(421),m=a(424),f=a(323),b=a(386),v=a(349);function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){j(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function j(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function E(e,t){const a=t.find(t=>t.id===e.id);return a&&a.isDefault||!1}function C(e,t){return O({},e,{conditions:[...e.conditions||[],t]})}function x(e,t){const a=e.conditions&&e.conditions.filter(e=>e!==t);return O({},e,{conditions:a})}function q(e,t,a){const n=e.conditions&&e.conditions.map(e=>e===a?t:e);return O({},e,{conditions:n})}function w(e){return 1===e.direction?"LT":-1===e.direction?"GT":["LT","GT"]}function P(e){const t=Object(b.default)().getState(),a=e.key.replace(/^new_/,"");return Object(v.isDiffMetric)(e.key)&&(n=a,void 0!==Object(f.getMetricByKey)(Object(b.default)().getState(),n))?Object(f.getMetricByKey)(t,a):"new_maintainability_rating"===e.key&&Object(f.getMetricByKey)(t,"sqale_rating")||e;var n}function S(e){return Object(s.getLocalizedMetricName)(P(e))}var N=a(361),_=a(541),k=a.n(_),D=a(329),z=a.n(D),G=a(351),T=a.n(G),R=a(1753),M=a.n(R),A=a(312),B=a(376),L=a.n(B),I=a(325),F=a(320),U=a(511),Q=a(395),W=a(311),K=a(348),J=a.n(K),Y=a(430),H=a.n(Y),X=a(343),$=a.n(X);class V extends n.PureComponent{constructor(){super(...arguments),this.handleChange=({value:e})=>{this.props.onOperatorChange(e)}}getLabel(e,t){return"RATING"===t.type?Object(s.translate)("quality_gates.operator",e,"rating"):Object(s.translate)("quality_gates.operator",e)}render(){const e=w(this.props.metric);if(Array.isArray(e)){const t=e.map(e=>({label:this.getLabel(e,this.props.metric),value:e}));return n.createElement($.a,{autoFocus:!0,className:"input-medium",clearable:!1,id:"condition-operator",name:"operator",onChange:this.handleChange,options:t,searchable:!1,value:this.props.op})}return n.createElement("span",{className:"display-inline-block note abs-width-150"},this.getLabel(e,this.props.metric))}}class Z extends n.PureComponent{constructor(){super(...arguments),this.handleChange=e=>{if(e){const{metrics:t}=this.props,a=t.find(t=>t.key===e.value);a&&this.props.onMetricChange(a)}}}render(){const{metric:e,metrics:t}=this.props,a=z()(t.map(e=>({value:e.key,label:S(e),domain:e.domain})),"domain"),r=[];return a.forEach((e,t,a)=>{const n=t>0?a[t-1]:null;!e.domain||n&&n.domain===e.domain||r.push({value:"<domain>",label:Object(s.getLocalizedMetricDomain)(e.domain),disabled:!0}),r.push(e)}),n.createElement($.a,{className:"text-middle quality-gate-metric-select",id:"condition-metric",onChange:this.handleChange,options:r,placeholder:Object(s.translate)("search.search_for_metrics"),value:e&&e.key})}}class ee extends n.PureComponent{constructor(){super(...arguments),this.handleChange=e=>{this.props.onChange(e.currentTarget.value)},this.handleSelectChange=e=>{e?this.props.onChange(e.value):this.props.onChange("")}}renderRatingInput(){const{name:e,value:t}=this.props;return n.createElement($.a,{className:"input-tiny text-middle",clearable:!0,id:"condition-threshold",name:e,onChange:this.handleSelectChange,options:[{label:"A",value:"1"},{label:"B",value:"2"},{label:"C",value:"3"},{label:"D",value:"4"}],placeholder:"",searchable:!1,value:t})}render(){const{name:e,value:t,metric:a}=this.props;return"RATING"===a.type?this.renderRatingInput():n.createElement("input",{className:"input-tiny text-middle","data-type":a.type,id:"condition-threshold",name:e,onChange:this.handleChange,type:"text",value:t})}}function te(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ae(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?te(Object(a),!0).forEach((function(t){ne(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):te(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ne(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class re extends n.PureComponent{constructor(e){super(e),this.handleFormSubmit=()=>{if(this.state.metric){const{condition:e,qualityGate:t,organization:a}=this.props,n={metric:this.state.metric.key,op:this.getSinglePossibleOperator(this.state.metric)||this.state.op,error:this.state.error};return(e?Object(l.p)(ae({organization:a,id:e.id},n)):Object(l.c)(ae({gateId:t.id,organization:a},n))).then(this.props.onAddCondition)}return Promise.reject()},this.handleScopeChange=e=>{this.setState(({metric:t})=>{const{metrics:a}=this.props;let n;if(t&&a){const r="new"===e?"new_".concat(t.key):t.key.replace(/^new_/,"");n=a.find(e=>e.key===r)}return{scope:e,metric:n}})},this.handleMetricChange=e=>{this.setState({metric:e,op:void 0,error:""})},this.handleOperatorChange=e=>{this.setState({op:e})},this.handleErrorChange=e=>{this.setState({error:e})},this.state={error:e.condition?e.condition.error:"",scope:"new",metric:e.metric?e.metric:void 0,op:e.condition?e.condition.op:void 0}}getSinglePossibleOperator(e){const t=w(e);return Array.isArray(t)?void 0:t}render(){const{header:e,metrics:t,onClose:a}=this.props,{op:r,error:i,scope:o,metric:c}=this.state;return n.createElement(J.a,{confirmButtonText:e,confirmDisable:void 0===c,header:e,onClose:a,onConfirm:this.handleFormSubmit,size:"small"},this.state.errorMessage&&n.createElement(I.Alert,{variant:"error"},this.state.errorMessage),void 0===this.props.metric&&n.createElement("div",{className:"modal-field display-flex-center"},n.createElement(H.a,{checked:"new"===o,onCheck:this.handleScopeChange,value:"new"},n.createElement("span",{"data-test":"quality-gates__condition-scope-new"},Object(s.translate)("quality_gates.conditions.new_code"))),n.createElement(H.a,{checked:"overall"===o,className:"big-spacer-left",onCheck:this.handleScopeChange,value:"overall"},n.createElement("span",{"data-test":"quality-gates__condition-scope-overall"},Object(s.translate)("quality_gates.conditions.overall_code")))),n.createElement("div",{className:"modal-field"},n.createElement("label",{htmlFor:"condition-metric"},Object(s.translate)("quality_gates.conditions.fails_when")),t&&n.createElement(Z,{metric:c,metrics:t.filter(e=>"new"===o?Object(F.isDiffMetric)(e.key):!Object(F.isDiffMetric)(e.key)),onMetricChange:this.handleMetricChange}),this.props.metric&&n.createElement("span",{className:"note"},Object(s.getLocalizedMetricName)(this.props.metric))),c&&n.createElement(n.Fragment,null,n.createElement("div",{className:"modal-field display-inline-block"},n.createElement("label",{htmlFor:"condition-operator"},Object(s.translate)("quality_gates.conditions.operator")),n.createElement(V,{metric:c,onOperatorChange:this.handleOperatorChange,op:r})),n.createElement("div",{className:"modal-field display-inline-block spacer-left"},n.createElement("label",{htmlFor:"condition-threshold"},Object(s.translate)("quality_gates.conditions.value")),n.createElement(ee,{metric:c,name:"error",onChange:this.handleErrorChange,value:i}))))}}class ie extends n.PureComponent{constructor(e){super(e),this.handleUpdateCondition=e=>{this.props.onSaveCondition(e,this.props.condition)},this.handleOpenUpdate=()=>{this.setState({modal:!0})},this.handleUpdateClose=()=>{this.setState({modal:!1})},this.handleDeleteClick=()=>{this.setState({deleteFormOpen:!0})},this.closeDeleteForm=()=>{this.setState({deleteFormOpen:!1})},this.removeCondition=e=>{Object(l.e)({id:e.id,organization:this.props.organization}).then(()=>this.props.onRemoveCondition(e),()=>{})},this.state={deleteFormOpen:!1,modal:!1}}renderOperator(){const{op:e="GT"}=this.props.condition;return"RATING"===this.props.metric.type?Object(s.translate)("quality_gates.operator",e,"rating"):Object(s.translate)("quality_gates.operator",e)}render(){const{condition:e,canEdit:t,metric:a,organization:r,qualityGate:i,updated:o}=this.props;return n.createElement("tr",{className:W({highlighted:o})},n.createElement("td",{className:"text-middle"},S(a),a.hidden&&n.createElement("span",{className:"text-danger little-spacer-left"},Object(s.translate)("deprecated"))),n.createElement("td",{className:"text-middle nowrap"},this.renderOperator()),n.createElement("td",{className:"text-middle nowrap"},Object(F.formatMeasure)(e.error,a.type)),t&&n.createElement(n.Fragment,null,n.createElement("td",{className:"text-center thin"},n.createElement(A.EditButton,{"data-test":"quality-gates__condition-update",onClick:this.handleOpenUpdate})),n.createElement("td",{className:"text-center thin"},n.createElement(A.DeleteButton,{"data-test":"quality-gates__condition-delete",onClick:this.handleDeleteClick})),this.state.modal&&n.createElement(re,{condition:e,header:Object(s.translate)("quality_gates.update_condition"),metric:a,onAddCondition:this.handleUpdateCondition,onClose:this.handleUpdateClose,organization:r,qualityGate:i}),this.state.deleteFormOpen&&n.createElement(J.a,{confirmButtonText:Object(s.translate)("delete"),confirmData:e,header:Object(s.translate)("quality_gates.delete_condition"),isDestructive:!0,onClose:this.closeDeleteForm,onConfirm:this.removeCondition},Object(s.translateWithParameters)("quality_gates.delete_condition.confirm.message",Object(s.getLocalizedMetricName)(this.props.metric)))))}}function oe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function se(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const ce=["DATA","DISTRIB","STRING","BOOL"],le=[Q.a.alert_status,Q.a.releasability_rating,Q.a.security_hotspots,Q.a.new_security_hotspots];class de extends n.PureComponent{constructor(){super(...arguments),this.renderConditionsTable=(e,t)=>{const{qualityGate:a,metrics:r,canEdit:i,onRemoveCondition:o,onSaveCondition:c,organization:l,updatedConditionId:d}=this.props;return n.createElement("table",{className:"data zebra","data-test":"quality-gates__conditions-".concat(t)},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",{className:"nowrap",style:{width:300}},Object(s.translate)("quality_gates.conditions.metric")),n.createElement("th",{className:"nowrap"},Object(s.translate)("quality_gates.conditions.operator")),n.createElement("th",{className:"nowrap"},Object(s.translate)("quality_gates.conditions.value")),i&&n.createElement(n.Fragment,null,n.createElement("th",{className:"thin"},Object(s.translate)("edit")),n.createElement("th",{className:"thin"},Object(s.translate)("delete"))))),n.createElement("tbody",null,e.map(e=>n.createElement(ie,{canEdit:i,condition:e,key:e.id,metric:r[e.metric],onRemoveCondition:o,onSaveCondition:c,organization:l,qualityGate:a,updated:e.id===d}))))}}render(){const{appState:e,conditions:t,metrics:r,canEdit:i}=this.props,o=t.filter(e=>r[e.metric]),c=z()(o,e=>r[e.metric]&&r[e.metric].name),l=c.filter(e=>!Object(F.isDiffMetric)(e.metric)),d=c.filter(e=>Object(F.isDiffMetric)(e.metric)),h=[],p=o.filter(e=>null!=e.id);p.forEach(e=>{p.filter(t=>t.metric===e.metric).length>1&&h.push(e)});const u=k()(h,e=>e.metric).map(e=>function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(a),!0).forEach((function(t){se(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):oe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{metric:r[e.metric]})),g=M()(T()(r,e=>e).filter(e=>!e.hidden&&!ce.includes(e.type)&&!le.includes(e.key)),t,(e,t)=>e.key===t.metric);return n.createElement("div",{className:"quality-gate-section"},i&&n.createElement("div",{className:"pull-right"},n.createElement(L.a,{modal:({onClose:e})=>n.createElement(re,{header:Object(s.translate)("quality_gates.add_condition"),metrics:g,onAddCondition:this.props.onAddCondition,onClose:e,organization:this.props.organization,qualityGate:this.props.qualityGate})},({onClick:e})=>n.createElement(A.Button,{"data-test":"quality-gates__add-condition",onClick:e},Object(s.translate)("quality_gates.add_condition")))),n.createElement("header",{className:"display-flex-center spacer-bottom"},n.createElement("h3",null,Object(s.translate)("quality_gates.conditions")),n.createElement(N.a,{className:"spacer-left",doc:Promise.resolve().then(a.bind(null,1754))})),u.length>0&&n.createElement(I.Alert,{variant:"warning"},n.createElement("p",null,Object(s.translate)("quality_gates.duplicated_conditions")),n.createElement("ul",{className:"list-styled spacer-top"},u.map(e=>n.createElement("li",{key:e.metric.key},Object(s.getLocalizedMetricName)(e.metric))))),d.length>0&&n.createElement("div",{className:"big-spacer-top"},n.createElement("h4",null,Object(s.translate)("quality_gates.conditions.new_code.long")),e.branchesEnabled&&n.createElement("p",{className:"spacer-top spacer-bottom"},Object(s.translate)("quality_gates.conditions.new_code.description")),this.renderConditionsTable(d,"new")),l.length>0&&n.createElement("div",{className:"big-spacer-top"},n.createElement("h4",null,Object(s.translate)("quality_gates.conditions.overall_code.long")),e.branchesEnabled&&n.createElement("p",{className:"spacer-top spacer-bottom"},Object(s.translate)("quality_gates.conditions.overall_code.description")),this.renderConditionsTable(l,"overall")),0===o.length&&n.createElement("div",{className:"big-spacer-top"},Object(s.translate)("quality_gates.no_conditions")))}}var he=Object(U.a)(de),pe=a(358),ue=a.n(pe),ge=a(504),me=a.n(ge),fe=a(480),be=a.n(fe);class ve extends n.PureComponent{constructor(e){super(e),this.mounted=!1,this.fetchProjects=e=>Object(l.n)({gateId:this.props.qualityGate.id,organization:this.props.organization,page:e.page,pageSize:e.pageSize,query:""!==e.query?e.query:void 0,selected:e.filter}).then(t=>{this.mounted&&this.setState(a=>{const n=null!=e.page&&e.page>1,r=n?[...a.projects,...t.results]:t.results,i=t.results.filter(e=>e.selected).map(e=>e.key),o=n?[...a.selectedProjects,...i]:i;return{lastSearchParams:e,needToReload:!1,projects:r,projectsTotalCount:t.paging.total,selectedProjects:o}})}),this.handleSelect=e=>Object(l.a)({gateId:this.props.qualityGate.id,organization:this.props.organization,projectKey:e}).then(()=>{this.mounted&&this.setState(t=>({needToReload:!0,selectedProjects:[...t.selectedProjects,e]}))}),this.handleUnselect=e=>Object(l.g)({gateId:this.props.qualityGate.id,organization:this.props.organization,projectKey:e}).then(()=>{this.mounted&&this.setState(t=>({needToReload:!0,selectedProjects:ue()(t.selectedProjects,e)}))}),this.renderElement=e=>{const t=me()(this.state.projects,{key:e});return n.createElement("div",{className:"select-list-list-item"},void 0===t?e:n.createElement(n.Fragment,null,t.name,n.createElement("br",null),n.createElement("span",{className:"note"},t.key)))},this.state={needToReload:!1,projects:[],selectedProjects:[]}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}render(){return n.createElement(be.a,{elements:this.state.projects.map(e=>e.key),elementsTotalCount:this.state.projectsTotalCount,labelAll:Object(s.translate)("quality_gates.projects.all"),labelSelected:Object(s.translate)("quality_gates.projects.with"),labelUnselected:Object(s.translate)("quality_gates.projects.without"),needToReload:this.state.needToReload&&this.state.lastSearchParams&&this.state.lastSearchParams.filter!==fe.SelectListFilter.All,onSearch:this.fetchProjects,onSelect:this.handleSelect,onUnselect:this.handleUnselect,readOnly:!this.props.canEdit,renderElement:this.renderElement,selectedElements:this.state.selectedProjects,withPaging:!0})}}var ye=n.memo((function(e){const{isDefault:t,metrics:r,organization:i,qualityGate:o,updatedConditionId:c}=e,l=o.conditions||[],d=o.actions||{};return n.createElement("div",{className:"layout-page-main-inner"},n.createElement(he,{canEdit:d.manageConditions,conditions:l,metrics:r,onAddCondition:e.onAddCondition,onRemoveCondition:e.onRemoveCondition,onSaveCondition:e.onSaveCondition,organization:i,qualityGate:o,updatedConditionId:c}),n.createElement("div",{className:"quality-gate-section",id:"quality-gate-projects"},n.createElement("header",{className:"display-flex-center spacer-bottom"},n.createElement("h3",null,Object(s.translate)("quality_gates.projects")),n.createElement(N.a,{className:"spacer-left",doc:Promise.resolve().then(a.bind(null,1074))})),t?Object(s.translate)("quality_gates.projects_for_default"):n.createElement(ve,{canEdit:d.associateProjects,key:o.id,organization:i,qualityGate:o})))}));function Oe({className:e}){return n.createElement(N.a,{doc:Promise.resolve().then(a.bind(null,1755))},n.createElement("div",{className:W("badge",e)},Object(s.translate)("quality_gates.built_in")))}var je=a(359);class Ee extends n.PureComponent{constructor(e){super(e),this.handleNameChange=e=>{this.setState({name:e.currentTarget.value})},this.handleCopy=()=>{const{qualityGate:e,organization:t}=this.props,{name:a}=this.state;if(a)return Object(l.b)({id:e.id,name:a,organization:t}).then(e=>{this.props.onCopy(),this.props.router.push(Object(p.w)(String(e.id),this.props.organization))})},this.state={name:e.qualityGate.name}}render(){const{qualityGate:e}=this.props,{name:t}=this.state,a=!t||e&&e.name===t;return n.createElement(J.a,{confirmButtonText:Object(s.translate)("copy"),confirmDisable:a,header:Object(s.translate)("quality_gates.copy"),onClose:this.props.onClose,onConfirm:this.handleCopy,size:"small"},n.createElement("div",{className:"modal-field"},n.createElement("label",{htmlFor:"quality-gate-form-name"},Object(s.translate)("name"),n.createElement("em",{className:"mandatory"},"*")),n.createElement("input",{autoFocus:!0,id:"quality-gate-form-name",maxLength:100,onChange:this.handleNameChange,required:!0,size:50,type:"text",value:t})))}}var Ce=Object(je.a)(Ee),xe=a(375),qe=a.n(xe);class we extends n.PureComponent{constructor(){super(...arguments),this.onDelete=()=>{const{organization:e,qualityGate:t}=this.props;return Object(l.f)({id:t.id,organization:e}).then(this.props.onDelete).then(()=>{this.props.router.push(Object(p.x)(e))})}}render(){const{qualityGate:e}=this.props;return n.createElement(qe.a,{confirmButtonText:Object(s.translate)("delete"),isDestructive:!0,modalBody:Object(s.translateWithParameters)("quality_gates.delete.confirm.message",e.name),modalHeader:Object(s.translate)("quality_gates.delete"),onConfirm:this.onDelete},({onClick:e})=>n.createElement(A.Button,{className:"little-spacer-left button-red",id:"quality-gate-delete",onClick:e},Object(s.translate)("delete")))}}var Pe=Object(je.a)(we);class Se extends n.PureComponent{constructor(e){super(e),this.handleNameChange=e=>{this.setState({name:e.currentTarget.value})},this.handleRename=()=>{const{qualityGate:e,organization:t}=this.props,{name:a}=this.state;if(a)return Object(l.m)({id:e.id,name:a,organization:t}).then(()=>this.props.onRename())},this.state={name:e.qualityGate.name}}render(){const{qualityGate:e}=this.props,{name:t}=this.state,a=!t||e&&e.name===t;return n.createElement(J.a,{confirmButtonText:Object(s.translate)("rename"),confirmDisable:a,header:Object(s.translate)("quality_gates.rename"),onClose:this.props.onClose,onConfirm:this.handleRename,size:"small"},n.createElement("div",{className:"modal-field"},n.createElement("label",{htmlFor:"quality-gate-form-name"},Object(s.translate)("name"),n.createElement("em",{className:"mandatory"},"*")),n.createElement("input",{autoFocus:!0,id:"quality-gate-form-name",maxLength:100,onChange:this.handleNameChange,required:!0,size:50,type:"text",value:t})))}}class Ne extends n.PureComponent{constructor(){super(...arguments),this.handleActionRefresh=()=>{const{refreshItem:e,refreshList:t}=this.props;return Promise.all([e(),t()]).then(()=>{},()=>{})},this.handleSetAsDefaultClick=()=>{const{organization:e,qualityGate:t}=this.props;t.isDefault||(this.props.onSetDefault(),Object(l.o)({id:t.id,organization:e}).then(this.handleActionRefresh,this.handleActionRefresh))}}render(){const{organization:e,qualityGate:t}=this.props,a=t.actions||{};return n.createElement("div",{className:"layout-page-header-panel layout-page-main-header issues-main-header"},n.createElement("div",{className:"layout-page-header-panel-inner layout-page-main-header-inner"},n.createElement("div",{className:"layout-page-main-inner"},n.createElement("div",{className:"pull-left display-flex-center"},n.createElement("h2",null,t.name),t.isBuiltIn&&n.createElement(Oe,{className:"spacer-left"})),n.createElement("div",{className:"pull-right"},a.rename&&n.createElement(L.a,{modal:({onClose:a})=>n.createElement(Se,{onClose:a,onRename:this.handleActionRefresh,organization:e,qualityGate:t})},({onClick:e})=>n.createElement(A.Button,{id:"quality-gate-rename",onClick:e},Object(s.translate)("rename"))),a.copy&&n.createElement(L.a,{modal:({onClose:a})=>n.createElement(Ce,{onClose:a,onCopy:this.handleActionRefresh,organization:e,qualityGate:t})},({onClick:e})=>n.createElement(A.Button,{className:"little-spacer-left",id:"quality-gate-copy",onClick:e},Object(s.translate)("copy"))),a.setAsDefault&&n.createElement(A.Button,{className:"little-spacer-left",id:"quality-gate-toggle-default",onClick:this.handleSetAsDefaultClick},Object(s.translate)("set_as_default")),a.delete&&n.createElement(Pe,{onDelete:this.props.refreshList,organization:e,qualityGate:t})))))}}function _e(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ke(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(a),!0).forEach((function(t){De(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_e(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function De(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ze extends n.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={loading:!0},this.fetchDetails=()=>{const{id:e,organization:t}=this.props;return this.setState({loading:!0}),Object(l.h)({id:e,organization:t}).then(e=>{this.mounted&&this.setState({loading:!1,qualityGate:e,updatedConditionId:void 0})},()=>{this.mounted&&this.setState({loading:!1})})},this.handleAddCondition=e=>{this.setState(({qualityGate:t})=>t?(Object(g.a)(Object(s.translate)("quality_gates.condition_added")),{qualityGate:C(t,e),updatedConditionId:e.id}):null)},this.handleSaveCondition=(e,t)=>{this.setState(({qualityGate:a})=>a?(Object(g.a)(Object(s.translate)("quality_gates.condition_updated")),{qualityGate:q(a,e,t),updatedConditionId:e.id}):null)},this.handleRemoveCondition=e=>{this.setState(({qualityGate:t})=>t?(Object(g.a)(Object(s.translate)("quality_gates.condition_deleted")),{qualityGate:x(t,e),updatedConditionId:void 0}):null)},this.handleSetDefault=()=>{this.setState(({qualityGate:e})=>{if(!e)return null;return this.props.onSetDefault(e),{qualityGate:ke({},e,{actions:ke({},e.actions,{delete:!1,setAsDefault:!1})})}})}}componentDidMount(){this.mounted=!0,this.props.fetchMetrics(),this.fetchDetails()}componentDidUpdate(e){e.id!==this.props.id&&this.fetchDetails()}componentWillUnmount(){this.mounted=!1}render(){const{organization:e,metrics:t,refreshQualityGates:a}=this.props,{loading:i,qualityGate:s,updatedConditionId:c}=this.state;return n.createElement("div",{className:"layout-page-main"},n.createElement(o.a,{loading:i,timeout:200},s&&n.createElement(n.Fragment,null,n.createElement(r.a,{defer:!1,title:s.name}),n.createElement(Ne,{onSetDefault:this.handleSetDefault,organization:e,qualityGate:s,refreshItem:this.fetchDetails,refreshList:a}),n.createElement(ye,{isDefault:E(s,this.props.qualityGates),metrics:t,onAddCondition:this.handleAddCondition,onRemoveCondition:this.handleRemoveCondition,onSaveCondition:this.handleSaveCondition,organization:e,qualityGate:s,updatedConditionId:c}))))}}const Ge={fetchMetrics:m.e};var Te=Object(u.connect)(e=>({metrics:Object(f.getMetrics)(e)}),Ge)(ze),Re=a(317);function Me({organization:e,qualityGates:t}){return n.createElement("div",{className:"list-group"},t.map(t=>n.createElement(Re.Link,{activeClassName:"active",className:"list-group-item display-flex-center","data-id":t.id,key:t.id,to:Object(p.w)(String(t.id),e)},n.createElement("span",{className:"flex-1"},t.name),t.isDefault&&n.createElement("span",{className:"badge little-spacer-left"},Object(s.translate)("default")),t.isBuiltIn&&n.createElement(Oe,{className:"little-spacer-left"}))))}class Ae extends n.PureComponent{constructor(){super(...arguments),this.state={name:""},this.handleNameChange=e=>{this.setState({name:e.currentTarget.value})},this.handleCreate=()=>{const{organization:e}=this.props,{name:t}=this.state;if(t)return Object(l.d)({name:t,organization:e}).then(e=>this.props.onCreate().then(()=>e)).then(t=>{this.props.router.push(Object(p.w)(String(t.id),e))})}}render(){const{name:e}=this.state;return n.createElement(J.a,{confirmButtonText:Object(s.translate)("save"),confirmDisable:!e,header:Object(s.translate)("quality_gates.create"),onClose:this.props.onClose,onConfirm:this.handleCreate,size:"small"},n.createElement("div",{className:"modal-field"},n.createElement("label",{htmlFor:"quality-gate-form-name"},Object(s.translate)("name"),n.createElement("em",{className:"mandatory"},"*")),n.createElement("input",{autoFocus:!0,id:"quality-gate-form-name",maxLength:100,onChange:this.handleNameChange,required:!0,size:50,type:"text",value:e})))}}var Be=Object(je.a)(Ae);function Le({canCreate:e,refreshQualityGates:t,organization:r}){return n.createElement("header",{className:"page-header"},e&&n.createElement("div",{className:"page-actions"},n.createElement(L.a,{modal:({onClose:e})=>n.createElement(Be,{onClose:e,onCreate:t,organization:r})},({onClick:e})=>n.createElement(A.Button,{"data-test":"quality-gates__add",onClick:e},Object(s.translate)("create")))),n.createElement("div",{className:"display-flex-center"},n.createElement("h1",{className:"page-title"},Object(s.translate)("quality_gates.page")),n.createElement(N.a,{className:"spacer-left",doc:Promise.resolve().then(a.bind(null,1756))})))}function Ie(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Fe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ue extends n.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={canCreate:!1,loading:!0,qualityGates:[]},this.fetchQualityGates=()=>{const{organization:e}=this.props;return Object(l.i)({organization:e&&e.key}).then(({actions:e,qualitygates:t})=>{this.mounted&&(this.setState({canCreate:e.create,loading:!1,qualityGates:t}),this.props.params.id||this.openDefault(t))},()=>{this.mounted&&this.setState({loading:!1})})},this.handleSetDefault=e=>{this.setState(({qualityGates:t})=>({qualityGates:t.map(t=>t.isDefault||t.id===e.id?function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(a),!0).forEach((function(t){Fe(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ie(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},t,{isDefault:t.id===e.id}):t)}))}}componentDidMount(){this.mounted=!0,this.fetchQualityGates(),Object(c.addWhitePageClass)(),Object(c.addSideBarClass)()}componentDidUpdate(e){void 0!==e.params.id&&void 0===this.props.params.id&&this.openDefault(this.state.qualityGates)}componentWillUnmount(){this.mounted=!1,Object(c.removeWhitePageClass)(),Object(c.removeSideBarClass)()}openDefault(e){const t=e.find(e=>Boolean(e.isDefault)),{organization:a}=this.props;this.props.router.replace(Object(p.w)(String(t.id),a&&a.key))}render(){const{id:e}=this.props.params,{canCreate:t,qualityGates:a}=this.state,i=Object(s.translate)("quality_gates.page"),c=this.props.organization&&this.props.organization.key;return n.createElement(n.Fragment,null,n.createElement(r.a,{defaultTitle:i,defer:!1,titleTemplate:"%s - ".concat(i)}),n.createElement("div",{className:"layout-page",id:"quality-gates-page"},n.createElement(d.a,{suggestions:"quality_gates"}),n.createElement(h.a,{className:"layout-page-side-outer"},({top:e})=>n.createElement("div",{className:"layout-page-side",style:{top:e}},n.createElement("div",{className:"layout-page-side-inner"},n.createElement("div",{className:"layout-page-filters"},n.createElement(Le,{canCreate:t,organization:c,refreshQualityGates:this.fetchQualityGates}),n.createElement(o.a,{loading:this.state.loading},n.createElement(Me,{organization:c,qualityGates:a})))))),void 0!==e&&n.createElement(Te,{id:e,onSetDefault:this.handleSetDefault,organization:c,qualityGates:this.state.qualityGates,refreshQualityGates:this.fetchQualityGates})))}}t.default=Ue},333:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(2),r=a(360);function i({suggestions:e}){return n.createElement(r.a.Consumer,null,({addSuggestions:t,removeSuggestions:a})=>n.createElement(o,{addSuggestions:t,removeSuggestions:a,suggestions:e}))}class o extends n.PureComponent{componentDidMount(){this.props.addSuggestions(this.props.suggestions)}componentDidUpdate(e){e.suggestions!==this.props.suggestions&&(this.props.removeSuggestions(this.props.suggestions),this.props.addSuggestions(e.suggestions))}componentWillUnmount(){this.props.removeSuggestions(this.props.suggestions)}render(){return null}}},361:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(2),r=a(324),i=a.n(r),o=a(327),s=a(385);const c=Object(o.lazyLoadComponent)(()=>Promise.all([a.e(5),a.e(22)]).then(a.bind(null,507)),"DocMarkdownBlock");class l extends n.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={}}componentDidMount(){this.mounted=!0,this.props.doc.then(({default:e})=>{this.mounted&&this.setState({content:e})},()=>{})}componentWillUnmount(){this.mounted=!1}render(){return this.state.content?n.createElement(i.a,{className:this.props.className,overlay:n.createElement("div",{className:"abs-width-300"},n.createElement(c,{childProps:this.props.overlayProps,className:"cut-margins",content:Object(s.filterContent)(this.state.content),isTooltip:!0}))},this.props.children):this.props.children||null}}},385:function(e,t,a){"use strict";function n(e){let t,a;for(let n=0;n<e.length;n++){if("---"===e[n].trim()){if(void 0!==t){a=n;break}t=n}}return void 0!==a?{firstLine:t,lastLine:a}:void 0}function r(e){const t={};for(let a=0;a<e.length;a++){const n=e[a].split(":").map(e=>e.trim());2===n.length&&(t[n[0]]=n[1])}return t}function i(e,t){const a="\x3c!-- ".concat(t," --\x3e"),n="\x3c!-- /".concat(t," --\x3e");let r=e,i=r.indexOf(a),o=r.indexOf(n);for(;-1!==i&&-1!==o;)i<o?r=r.substring(0,i)+r.substring(o+n.length):(console.error(new Error('Documentation - incorrect usage of conditional formatting tags here: "'.concat(r.substring(o,i+a.length),'"'))),r=r.substring(0,o)+r.substring(o+n.length,i)+r.substring(i+a.length)),i=r.indexOf(a),o=r.indexOf(n);return r}e.exports={getFrontMatter:function(e){const t=e.split("\n"),a=n(t);return a?r(t.slice(a.firstLine+1,a.lastLine)):{}},separateFrontMatter:function(e){const t=e.split("\n"),a=n(t);if(a){const e=r(t.slice(a.firstLine+1,a.lastLine)),n=t.slice(a.lastLine+1).join("\n");return{frontmatter:e,content:n}}return{frontmatter:{},content:e}},filterContent:function(e){const t="\x3c!-- \\/?(sonarqube|sonarcloud|static) --\x3e",{isSonarCloud:n,getInstance:r}=a(6),o=i(e.replace(/{instance}/gi,r()),"static");return(n()?i(o,"sonarqube"):i(o,"sonarcloud")).replace(new RegExp("^".concat(t,"(\n|\r|\r\n|$)"),"gm"),"").replace(new RegExp("".concat(t),"g"),"")}}},421:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(387),r=a(386);function i(e){Object(r.default)().dispatch(n.b(e))}},448:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(368),r=a.n(n),i=a(2);class o extends i.PureComponent{constructor(e){super(e),this.getPosition=()=>{const e=this.container&&this.container.getBoundingClientRect();return e?{top:window.pageYOffset+e.top,left:window.pageXOffset+e.left}:{top:0,left:0}},this.debouncedOnResize=r()(()=>this.forceUpdate(),250)}componentDidMount(){this.forceUpdate(),window.addEventListener("resize",this.debouncedOnResize)}componentWillUnmount(){window.removeEventListener("resize",this.debouncedOnResize)}render(){return i.createElement("div",{className:this.props.className,ref:e=>this.container=e},this.props.children(this.getPosition()))}}},564:function(e,t,a){var n=a(313),r=a(565);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var i={insert:"head",singleton:!1},o=(n(r,i),r.locals?r.locals:{});e.exports=o},565:function(e,t,a){(t=a(314)(!1)).push([e.i,'.search-navigator.sticky .search-navigator-workspace-header{position:fixed;z-index:50;top:0;left:300px;right:0}.search-navigator.sticky .search-navigator-workspace-details,.search-navigator.sticky .search-navigator-workspace-list{padding-top:43px}.search-navigator-facet-box{background-color:#f3f3f3;font-size:13px}.search-navigator-facet-box.leak-facet-box{background-color:#fbf3d5;border:1px solid #f1e8cb}.search-navigator-facet-box.is-inner{margin-left:8px;padding-left:12px;border-left:1px solid #e6e6e6}.search-navigator-facet-box.is-inner .search-navigator-facet-header{padding-top:6px;padding-bottom:6px}.leak-facet-box:not(.hidden)+.leak-facet-box{border-top:none}.search-navigator-facet-box-forbidden{background-color:transparent;opacity:.5}.search-navigator-facet-box-forbidden .search-navigator-facet-container,.search-navigator-facet-box-forbidden .search-navigator-facet-empty,.search-navigator-facet-box-forbidden .search-navigator-facet-list{display:none}.search-navigator-facet-box-forbidden .search-navigator-facet-header{color:#777}.search-navigator-facet-box-forbidden .search-navigator-facet-header:hover{color:#4b9fd5}.search-navigator-facet-box-forbidden .search-navigator-facet-header{cursor:default}.search-navigator-facet-box-forbidden .search-navigator-facet-header:hover{color:#777}.search-navigator-facet{position:relative;display:inline-flex;justify-content:space-between;align-items:center;width:100%;height:24px;margin:0 0 1px;padding:0 6px;border:1px solid transparent;border-radius:2px;box-sizing:border-box;white-space:normal;opacity:.3;cursor:not-allowed;transition:none}a.search-navigator-facet{opacity:1;cursor:pointer}a.search-navigator-facet .facet-name{color:#444}.search-navigator-facet.active,a.search-navigator-facet:focus,a.search-navigator-facet:hover{border-color:#4b9fd5}.search-navigator-facet.facet-category{opacity:1;cursor:default}.search-navigator-facet.facet-category .facet-name{color:#777}.search-navigator-facet .facet-name{flex:1 1 auto;min-width:0;line-height:16px;padding:1px 0;color:#777;font-size:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.search-navigator-facet .facet-stat{display:flex;align-items:center;margin-left:8px;color:#777;font-size:12px}.search-navigator-facet .facet-toggle{display:none;float:left;height:16px;line-height:16px;margin-top:-1px;padding:0 5px;border-radius:2px;font-size:11px;text-transform:lowercase}.search-navigator-facet .facet-toggle:hover{color:#444}.search-navigator-facet .facet-toggle-active.facet-toggle-green{background-color:#0a0;color:#fff}.search-navigator-facet .facet-toggle-active.facet-toggle-red{background-color:#d4333f;color:#fff}.leak-facet-box .search-navigator-facet .facet-name,.leak-facet-box .search-navigator-facet .facet-stat{background-color:#fbf3d5}.leak-facet-box .search-navigator-facet .facet-stat:before{background-image:linear-gradient(90deg,rgba(251,243,213,0),#fbf3d5 75%)}.search-navigator-facet.active{background-color:#cae3f2;text-decoration:none}.search-navigator-facet.active .facet-toggle{display:inline}.search-navigator-facet.compare .facet-toggle{cursor:not-allowed;opacity:.5}.search-navigator-facet.compare .facet-toggle.facet-toggle-green{background-color:#0a0;color:#fff}.search-navigator-facet.compare .facet-toggle.facet-toggle-red{background-color:transparent;color:#777}.search-navigator-facet-half{width:45%}.search-navigator-facet-half:nth-child(odd){margin-right:10%}.search-navigator-facet-highlight-under-container{margin-bottom:1px}.search-navigator-facet-highlight-under-container .search-navigator-facet{margin-bottom:0}.search-navigator-facet-highlight-under-container .search-navigator-facet.active,.search-navigator-facet-highlight-under-container .search-navigator-facet:hover{border-bottom:none;padding-bottom:1px;border-radius:2px 2px 0 0}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet,.search-navigator-facet-highlight-under-container .search-navigator-facet:hover~.search-navigator-facet{border-top:none;border-bottom:none;border-left-color:#4b9fd5;border-right-color:#4b9fd5;border-radius:0}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:last-of-type,.search-navigator-facet-highlight-under-container .search-navigator-facet:hover~.search-navigator-facet:last-of-type{border-bottom:1px solid #4b9fd5;border-radius:0 0 2px 2px}.search-navigator-facet-highlight-under-container .search-navigator-facet.active:last-of-type,.search-navigator-facet-highlight-under-container .search-navigator-facet:hover:last-of-type{border-bottom:1px solid #4b9fd5;border-radius:2px}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet{background-color:#cae3f2;text-decoration:none}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet .facet-toggle{display:inline}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:hover,.search-navigator-facet-highlight-under-container .search-navigator-facet:hover~.search-navigator-facet.active{border-top:1px solid #4b9fd5}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:hover,.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:hover~.search-navigator-facet{background-color:#a1cde8;text-decoration:none}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:hover .facet-toggle,.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:hover~.search-navigator-facet .facet-toggle{display:inline}.search-navigator-facet-header{display:block;flex-shrink:0;padding:8px 0;color:#444;font-weight:600;overflow:hidden;white-space:nowrap}.search-navigator-facet-header>a{border-bottom:none;color:#444}.search-navigator-facet-header>a:focus,.search-navigator-facet-header>a:hover{color:#4b9fd5}.search-navigator-facet-header>.note{font-weight:400}.search-navigator-facet-header-value{display:block;overflow:hidden}.search-navigator-facet-header-value>.badge{display:block}.search-navigator-facet-header-button{flex-shrink:0;margin-left:auto}.search-navigator-facet-header-wrapper{display:flex;align-items:center}.search-navigator-facet-list{padding-bottom:8px;font-size:0}.search-navigator-facet-list-title{margin:0 8px 4px;font-size:12px;font-weight:700}.search-navigator-facet-list+.search-navigator-facet-list>.search-navigator-facet-list-title{border-top:1px solid #e6e6e6;padding-top:8px}.search-navigator-facet-empty{margin:0;padding:0 10px 10px;color:#444;font-size:12px;white-space:nowrap}.search-navigator-facet-footer{display:block;padding-bottom:8px;border-bottom:none}.search-navigator-facet-container{margin-top:6px;padding:0 10px 16px}.search-navigator-date-facet-selection{position:relative;padding-left:8px;font-size:12px}.search-navigator-date-facet-selection:after,.search-navigator-date-facet-selection:before{display:table;content:"";line-height:0}.search-navigator-date-facet-selection:after{clear:both}.search-navigator-date-facet-selection .date-input-control-input{width:115px!important}.search-navigator-date-facet-selection-dropdown-left{float:left;border-bottom:none}.search-navigator-date-facet-selection-dropdown-right{float:right;border-bottom:none}.search-navigator-date-facet-selection-input-left{position:absolute;left:0;width:100px;visibility:hidden}.search-navigator-date-facet-selection-input-right{position:absolute;right:0;width:100px;visibility:hidden}.search-navigator-date-facet-selection .date-input-control:not(:first-of-type) .date-input-calendar{left:auto;right:0}.search-navigator-filters{position:relative;padding:5px 10px;background-color:#f3f3f3}.search-navigator-filters:after,.search-navigator-filters:before{display:table;content:"";line-height:0}.search-navigator-filters:after{clear:both}.search-navigator-filters-header{margin-bottom:12px;padding-bottom:11px;border-bottom:1px solid #e6e6e6}.search-navigator-intro{width:500px;margin:0 auto;padding-top:100px}',""]),e.exports=t}}]);
//# sourceMappingURL=312.m.9b832479.chunk.js.map